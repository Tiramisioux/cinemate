
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for Cinemate">
      
      
      
        <link rel="canonical" href="https://tiramisioux.github.io/cinemate/install-guide/">
      
      
        <link rel="prev" href="../overview/">
      
      
        <link rel="next" href="../settings-json/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>Installation - Cinemate Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="black">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#installing-cinepi-and-cinemate" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Cinemate Docs" class="md-header__button md-logo" aria-label="Cinemate Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Cinemate Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Installation
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="black"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/tiramisioux/cinemate" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Cinemate Docs" class="md-nav__button md-logo" aria-label="Cinemate Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Cinemate Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/tiramisioux/cinemate" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Getting started
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Prerequisites">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#libcamera" class="md-nav__link">
    <span class="md-ellipsis">
      libcamera
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#node-version-manager" class="md-nav__link">
    <span class="md-ellipsis">
      Node Version Manager
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cpp-mjpeg-streamer" class="md-nav__link">
    <span class="md-ellipsis">
      cpp-mjpeg-streamer
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cinepi-raw" class="md-nav__link">
    <span class="md-ellipsis">
      cinepi-raw
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-the-raspberry-pi" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring the Raspberry Pi
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuring the Raspberry Pi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#update-enable-i2c-and-setting-hostname" class="md-nav__link">
    <span class="md-ellipsis">
      Update &amp; enable I²C and setting hostname
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-bootfirmwareconfigtxt" class="md-nav__link">
    <span class="md-ellipsis">
      Update /boot/firmware/config.txt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-the-imx585-tuning-file-optional" class="md-nav__link">
    <span class="md-ellipsis">
      Add the IMX585 tuning file (optional)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ir-filter-switch-script-optional" class="md-nav__link">
    <span class="md-ellipsis">
      IR filter switch script (optional)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-the-console-font-optional" class="md-nav__link">
    <span class="md-ellipsis">
      Change the console font (optional)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-post-processing-configs" class="md-nav__link">
    <span class="md-ellipsis">
      Create post-processing configs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-pishrink" class="md-nav__link">
    <span class="md-ellipsis">
      Install PiShrink
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-cinemate" class="md-nav__link">
    <span class="md-ellipsis">
      Install Cinemate
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Install Cinemate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-a-python-virtual-environment" class="md-nav__link">
    <span class="md-ellipsis">
      Create a Python virtual environment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grant-sudo-privileges-and-enable-i2c" class="md-nav__link">
    <span class="md-ellipsis">
      Grant sudo privileges and enable I²C
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      Install dependencies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#replace-rpigpio-with-lgpio" class="md-nav__link">
    <span class="md-ellipsis">
      Replace RPi.GPIO with lgpio
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clone-the-cinemate-repo" class="md-nav__link">
    <span class="md-ellipsis">
      Clone the Cinemate repo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#allow-mainpy-to-run-with-sudo" class="md-nav__link">
    <span class="md-ellipsis">
      Allow main.py to run with sudo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enable-networkmanager" class="md-nav__link">
    <span class="md-ellipsis">
      Enable NetworkManager
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rotate-logs" class="md-nav__link">
    <span class="md-ellipsis">
      Rotate logs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#seed-redis-with-default-keys" class="md-nav__link">
    <span class="md-ellipsis">
      Seed Redis with default keys
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-a-convenience-alias" class="md-nav__link">
    <span class="md-ellipsis">
      Add a convenience alias
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-the-cinemate-services" class="md-nav__link">
    <span class="md-ellipsis">
      Install the Cinemate services
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backing-up-the-sd-card" class="md-nav__link">
    <span class="md-ellipsis">
      Backing up the SD card
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#starting-cinemate" class="md-nav__link">
    <span class="md-ellipsis">
      Starting Cinemate
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../settings-json/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Settings file
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Cinemate CLI
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Cinemate CLI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli-user-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    User guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli-commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Commands reference
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Code
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Code
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    modules
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cinepi-multi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    cinepi_multi.py
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../controller-methods/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    cinepi_controller.py
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Redis
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Redis
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../redis-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Basic API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../redis-keys/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Key reference
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset"><a class="md-content__button md-icon" download href="../pdf/combined.pdf" title="PDF Export"><svg style="height: 1.2rem; width: 1.2rem;" viewBox="0 0 384 512" xmlns="http://www.w3.org/2000/svg"><path d="M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm76.45 211.36l-96.42 95.7c-6.65 6.61-17.39 6.61-24.04 0l-96.42-95.7C73.42 337.29 80.54 320 94.82 320H160v-80c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v80h65.18c14.28 0 21.4 17.29 11.27 27.36zM377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"></path></svg></a>
                
<div class="markdown-body">
  <h1 id="installing-cinepi-and-cinemate">Installing CinePi and Cinemate<a class="headerlink" href="#installing-cinepi-and-cinemate" title="Permanent link">#</a></h1>
<p>This guide walks you through installing the <code>cinepi-raw</code> fork and the Cinemate UI on a fresh Bookworm installation. Lite version of Bookworm also works.</p>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">#</a></h2>
<p>If you run Raspberry Pi OS Lite, begin by installing the following packages:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>python-pip<span class="w"> </span>git<span class="w"> </span>python3-jinja2
</code></pre></div>
<h3 id="libcamera">libcamera<a class="headerlink" href="#libcamera" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/raspberrypi/libcamera<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
sudo<span class="w"> </span>find<span class="w"> </span>~/libcamera<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span><span class="se">\(</span><span class="w"> </span>-name<span class="w"> </span><span class="s1">&#39;*.py&#39;</span><span class="w"> </span>-o<span class="w"> </span>-name<span class="w"> </span><span class="s1">&#39;*.sh&#39;</span><span class="w"> </span><span class="se">\)</span><span class="w"> </span>-exec<span class="w"> </span>chmod<span class="w"> </span>+x<span class="w"> </span><span class="o">{}</span><span class="w"> </span><span class="se">\;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
<span class="nb">cd</span><span class="w"> </span>libcamera<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
sudo<span class="w"> </span>meson<span class="w"> </span>setup<span class="w"> </span>build<span class="w"> </span>--buildtype<span class="o">=</span>release<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-Dpipelines<span class="o">=</span>rpi/vc4,rpi/pisp<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-Dipas<span class="o">=</span>rpi/vc4,rpi/pisp<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-Dv4l2<span class="o">=</span><span class="nb">true</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-Dgstreamer<span class="o">=</span>enabled<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-Dtest<span class="o">=</span><span class="nb">false</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-Dlc-compliance<span class="o">=</span>disabled<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-Dcam<span class="o">=</span>disabled<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-Dqcam<span class="o">=</span>disabled<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-Ddocumentation<span class="o">=</span>disabled<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-Dpycamera<span class="o">=</span>enabled<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
sudo<span class="w"> </span>ninja<span class="w"> </span>-C<span class="w"> </span>build<span class="w"> </span>install<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
<span class="nb">cd</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/libcamera/utils<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>chmod<span class="w"> </span>+x<span class="w"> </span>*.py<span class="w"> </span>*.sh<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>chmod<span class="w"> </span>+x<span class="w"> </span>~/libcamera/src/ipa/ipa-sign.sh<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>~/libcamera<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>ninja<span class="w"> </span>-C<span class="w"> </span>build<span class="w"> </span>install
</code></pre></div>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>--reinstall<span class="w"> </span>libtiff5-dev<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>ln<span class="w"> </span>-sf<span class="w"> </span><span class="k">$(</span>find<span class="w"> </span>/usr/lib<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;libtiff.so&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-n<span class="w"> </span><span class="m">1</span><span class="k">)</span><span class="w"> </span>/usr/lib/aarch64-linux-gnu/libtiff.so.5<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>/usr/lib/aarch64-linux-gnu:<span class="nv">$LD_LIBRARY_PATH</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>ldconfig
</code></pre></div>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>python3-pip<span class="w"> </span>git<span class="w"> </span>python3-jinja2<span class="w"> </span>libboost-dev<span class="w"> </span>libgnutls28-dev<span class="w"> </span>openssl<span class="w"> </span>pybind11-dev<span class="w"> </span>qtbase5-dev<span class="w"> </span>libqt5core5a<span class="w"> </span>meson<span class="w"> </span>cmake<span class="w"> </span>python3-yaml<span class="w"> </span>python3-ply<span class="w"> </span>libglib2.0-dev<span class="w"> </span>libgstreamer-plugins-base1.0-dev<span class="w"> </span>libgstreamer1.0-dev<span class="w"> </span>libavdevice59
</code></pre></div>
<h3 id="node-version-manager">Node Version Manager<a class="headerlink" href="#node-version-manager" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code>wget<span class="w"> </span>-qO-<span class="w"> </span>https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.3/install.sh<span class="w"> </span><span class="p">|</span><span class="w"> </span>bash
<span class="nb">source</span><span class="w"> </span>~/.bashrc
nvm<span class="w"> </span>install<span class="w"> </span>--lts
</code></pre></div>
<h3 id="cpp-mjpeg-streamer">cpp-mjpeg-streamer <img src="https://img.shields.io/badge/cinemate-fork-gren" height="10" ><a class="headerlink" href="#cpp-mjpeg-streamer" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>libspdlog-dev<span class="w"> </span>libjsoncpp-dev
<span class="nb">cd</span><span class="w"> </span>/home/pi
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/Tiramisioux/cpp-mjpeg-streamer.git<span class="w"> </span>--branch<span class="w"> </span>cinemate
<span class="nb">cd</span><span class="w"> </span>cpp-mjpeg-streamer<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>mkdir<span class="w"> </span>build<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>build
cmake<span class="w"> </span>..<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>make
make<span class="w"> </span>install-here
</code></pre></div>
<h2 id="cinepi-raw">cinepi-raw <img src="https://img.shields.io/badge/cinemate-fork-gren" height="10" ><a class="headerlink" href="#cinepi-raw" title="Permanent link">#</a></h2>
<p>Cinemate depends on a custom branch of [cinepi-raw](https://github.com/Tiramisioux/cinepi-raw/tree/rpicam-apps_1.7_custom_encoder, created by Csaba Nagy.</p>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/Tiramisioux/cinepi-raw.git<span class="w"> </span>--branch<span class="w"> </span>rpicam-apps_1.7_custom_encoder
<span class="nb">cd</span><span class="w"> </span>/home/pi/cinepi-raw
sudo<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>build<span class="w"> </span><span class="o">(</span><span class="k">if</span><span class="w"> </span>you<span class="w"> </span>have<span class="w"> </span>a<span class="w"> </span>previous<span class="w"> </span>build<span class="o">)</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">PKG_CONFIG_PATH</span><span class="o">=</span>/home/pi/cpp-mjpeg-streamer/build:<span class="nv">$PKG_CONFIG_PATH</span>
sudo<span class="w"> </span>meson<span class="w"> </span>setup<span class="w"> </span>build
sudo<span class="w"> </span>ninja<span class="w"> </span>-C<span class="w"> </span>build
meson<span class="w"> </span>install<span class="w"> </span>-C<span class="w"> </span>build
</code></pre></div>
<blockquote>
<p>Join the CinePi Discord <a href="https://discord.gg/Hr4dfhuK">here</a>!</p>
</blockquote>
<h2 id="configuring-the-raspberry-pi">Configuring the Raspberry Pi<a class="headerlink" href="#configuring-the-raspberry-pi" title="Permanent link">#</a></h2>
<h3 id="update-enable-i2c-and-setting-hostname">Update &amp; enable I²C and setting hostname<a class="headerlink" href="#update-enable-i2c-and-setting-hostname" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>apt<span class="w"> </span>upgrade
sudo<span class="w"> </span>raspi-config<span class="w"> </span>nonint<span class="w"> </span>do_i2c<span class="w"> </span><span class="m">0</span>
sudo<span class="w"> </span>hostnamectl<span class="w"> </span>set-hostname<span class="w"> </span>cinepi
</code></pre></div>
<blockquote>
<p>Now you will find the pi as <code>cinepi.local</code> on the local network, or at the hotspot Cinemate creates</p>
</blockquote>
<h3 id="update-bootfirmwareconfigtxt">Update <code>/boot/firmware/config.txt</code><a class="headerlink" href="#update-bootfirmwareconfigtxt" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>nano<span class="w"> </span>/boot/firmware/config.txt
</code></pre></div>
<p>Paste this into your file, and uncomment the sensor you are using.</p>
<p>Also specify which physical camera port you have connected your sensor to.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Raspberry Pi HQ camera</span>
<span class="c1">#camera_auto_detect=1</span>
<span class="c1">#dtoverlay=imx477,cam0</span>

<span class="c1"># Raspberry Pi GS camera</span>
<span class="c1">#camera_auto_detect=1</span>
<span class="c1">#dtoverlay=imx296,cam0</span>

<span class="c1"># OneInchEye</span>
<span class="c1">#camera_auto_detect=0</span>
<span class="c1">#dtoverlay=imx283,cam0</span>

<span class="c1"># StarlightEye</span>
<span class="nv">camera_auto_detect</span><span class="o">=</span><span class="m">0</span>
<span class="nv">dtoverlay</span><span class="o">=</span>imx585,cam0

<span class="c1"># StarlightEye Mono</span>
<span class="nv">camera_auto_detect</span><span class="o">=</span><span class="m">0</span>
<span class="c1">#dtoverlay=imx585,cam1,mono</span>

<span class="c1"># CFE Hat (pi 5 only)</span>
<span class="nv">dtparam</span><span class="o">=</span>pciex1
<span class="nv">dtparam</span><span class="o">=</span><span class="nv">pciex1_gen</span><span class="o">=</span><span class="m">3</span>

<span class="nv">dtoverlay</span><span class="o">=</span>disable-bt

<span class="o">[</span>cm4<span class="o">]</span>
<span class="c1"># Enable host mode on the 2711 built-in XHCI USB controller.</span>
<span class="c1"># This line should be removed if the legacy DWC2 controller is required</span>
<span class="c1"># (e.g. for USB device mode) or if USB support is not required.</span>
<span class="nv">otg_mode</span><span class="o">=</span><span class="m">1</span>

<span class="o">[</span>all<span class="o">]</span>
<span class="nv">usb_max_current_enable</span><span class="o">=</span><span class="m">1</span>
<span class="c1">#dtoverlay=vc4-kms-DPI-4inch</span>
<span class="c1">#dtoverlay=waveshare-touch-4dpi</span>
<span class="nv">avoid_warnings</span><span class="o">=</span><span class="m">1</span>
<span class="nv">disable_splash</span><span class="o">=</span><span class="m">1</span>
<span class="c1">#boot_delay=0</span>
<span class="c1">#power_off_on_halt=1</span>
</code></pre></div>
<h3 id="add-the-imx585-tuning-file-optional">Add the IMX585 tuning file (optional)<a class="headerlink" href="#add-the-imx585-tuning-file-optional" title="Permanent link">#</a></h3>
<p><div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-L<span class="w"> </span>-o<span class="w"> </span>/home/pi/libcamera/src/ipa/rpi/pisp/data/imx585.json<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>https://raw.githubusercontent.com/will127534/libcamera/master/src/ipa/rpi/pisp/data/imx585.json
sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;8s/&quot;black_level&quot;: *[0-9]\+/&quot;black_level&quot;: 0/&#39;</span><span class="w"> </span>/home/pi/libcamera/src/ipa/rpi/pisp/data/imx585.json
<span class="c1"># cp /home/pi/libcamera/src/ipa/rpi/pisp/data/imx585.json /usr/local/share/libcamera/ipa/rpi/pisp/</span>
</code></pre></div>
For the mono sensor use <code>imx585_mono.json</code> instead.</p>
<h3 id="ir-filter-switch-script-optional">IR filter switch script (optional)<a class="headerlink" href="#ir-filter-switch-script-optional" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code>wget<span class="w"> </span>https://raw.githubusercontent.com/will127534/StarlightEye/master/software/IRFilter<span class="w"> </span>-O<span class="w"> </span>/usr/local/bin/IRFilter
sudo<span class="w"> </span>chmod<span class="w"> </span>+x<span class="w"> </span>/usr/local/bin/IRFilter
</code></pre></div>
<blockquote>
<p>Cinemate has its own way of handling the IR switch but the installation above can be convenient for use outside of Cinemate</p>
</blockquote>
<h3 id="change-the-console-font-optional">Change the console font (optional)<a class="headerlink" href="#change-the-console-font-optional" title="Permanent link">#</a></h3>
<p>This can be useful if running the Pi on a small HD field monitor</p>
<div class="highlight"><pre><span></span><code>sudi<span class="w"> </span>apt<span class="w"> </span>update
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>console-setup<span class="w"> </span>kbd
sudo<span class="w"> </span>dpkg-reconfigure<span class="w"> </span>console-setup<span class="w">  </span><span class="c1"># choose Terminus / 16x32</span>
</code></pre></div>
<p>Verify <code>/etc/default/console-setup</code> contains:
<div class="highlight"><pre><span></span><code>FONTFACE=&quot;Terminus&quot;
FONTSIZE=&quot;16x32&quot;
</code></pre></div>
Then enable the service:
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>console-setup.service
sudo<span class="w"> </span>systemctl<span class="w"> </span>start<span class="w"> </span>console-setup.service
</code></pre></div></p>
<h3 id="create-post-processing-configs">Create post-processing configs<a class="headerlink" href="#create-post-processing-configs" title="Permanent link">#</a></h3>
<p>Paste this into the terminal and hit enter:
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>bash<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;cat &gt; post-processing.json &lt;&lt; EOF</span>
<span class="s1">{</span>
<span class="s1">    &quot;sharedContext&quot;: {},</span>
<span class="s1">    &quot;mjpegPreview&quot;: {</span>
<span class="s1">        &quot;port&quot;: 8000</span>
<span class="s1">    }</span>
<span class="s1">}</span>
<span class="s1">EOF&#39;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
sudo<span class="w"> </span>chmod<span class="w"> </span>+x<span class="w"> </span>post-processing.json<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
sudo<span class="w"> </span>bash<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;cat &gt; post-processing0.json &lt;&lt; EOF</span>
<span class="s1">{</span>
<span class="s1">    &quot;sharedContext&quot;: {},</span>
<span class="s1">    &quot;mjpegPreview&quot;: {</span>
<span class="s1">        &quot;port&quot;: 8000</span>
<span class="s1">    }</span>
<span class="s1">}</span>
<span class="s1">EOF&#39;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
sudo<span class="w"> </span>chmod<span class="w"> </span>+x<span class="w"> </span>post-processing0.json<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
sudo<span class="w"> </span>bash<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;cat &gt; post-processing1.json &lt;&lt; EOF</span>
<span class="s1">{</span>
<span class="s1">    &quot;sharedContext&quot;: {},</span>
<span class="s1">    &quot;mjpegPreview&quot;: {</span>
<span class="s1">        &quot;port&quot;: 8001</span>
<span class="s1">    }</span>
<span class="s1">}</span>
<span class="s1">EOF&#39;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
sudo<span class="w"> </span>chmod<span class="w"> </span>+x<span class="w"> </span>post-processing1.json
</code></pre></div></p>
<h3 id="install-pishrink">Install PiShrink<a class="headerlink" href="#install-pishrink" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code>wget<span class="w"> </span>https://raw.githubusercontent.com/Drewsif/PiShrink/master/pishrink.sh
sudo<span class="w"> </span>install<span class="w"> </span>-m755<span class="w"> </span>pishrink.sh<span class="w"> </span>/usr/local/bin/pishrink
</code></pre></div>
<p>Reboot before installing Cinemate:</p>
<div class="highlight"><pre><span></span><code>reboot
</code></pre></div>
<h2 id="install-cinemate">Install Cinemate<a class="headerlink" href="#install-cinemate" title="Permanent link">#</a></h2>
<h3 id="create-a-python-virtual-environment">Create a Python virtual environment<a class="headerlink" href="#create-a-python-virtual-environment" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>python3-venv
python3<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>/home/pi/.Cinemate-env
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;source /home/pi/.Cinemate-env/bin/activate&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>~/.bashrc
<span class="nb">source</span><span class="w"> </span>/home/pi/.Cinemate-env/bin/activate
</code></pre></div>
<h3 id="grant-sudo-privileges-and-enable-i2c">Grant sudo privileges and enable I²C<a class="headerlink" href="#grant-sudo-privileges-and-enable-i2c" title="Permanent link">#</a></h3>
<p><div class="highlight"><pre><span></span><code><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;pi ALL=(ALL) NOPASSWD: /home/pi/.Cinemate-env/bin/*&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/etc/sudoers.d/Cinemate-env
sudo<span class="w"> </span>chown<span class="w"> </span>-R<span class="w"> </span>pi:pi<span class="w"> </span>/home/pi/.Cinemate-env
sudo<span class="w"> </span>chown<span class="w"> </span>-R<span class="w"> </span>pi:pi<span class="w"> </span>/media<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>chmod<span class="w"> </span><span class="m">755</span><span class="w"> </span>/media
sudo<span class="w"> </span>usermod<span class="w"> </span>-aG<span class="w"> </span>i2c<span class="w"> </span>pi
sudo<span class="w"> </span>modprobe<span class="w"> </span>i2c-dev<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span>i2c-dev<span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>-a<span class="w"> </span>/etc/modules
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;pi ALL=(ALL) NOPASSWD: /home/pi/run_Cinemate.sh&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>-a<span class="w"> </span>/etc/sudoers.d/pi_Cinemate
</code></pre></div>
Reboot so the group changes take effect:</p>
<div class="highlight"><pre><span></span><code>reboot
</code></pre></div>
<h3 id="install-dependencies">Install dependencies<a class="headerlink" href="#install-dependencies" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code><span class="nb">source</span><span class="w"> </span>/home/pi/.Cinemate-env/bin/activate
python3<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--upgrade<span class="w"> </span>pip<span class="w"> </span>setuptools<span class="w"> </span>wheel
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>i2c-tools<span class="w"> </span>portaudio19-dev<span class="w"> </span>build-essential<span class="w"> </span>python3-dev<span class="w"> </span>python3-pip<span class="w"> </span>python3-smbus<span class="w"> </span>python3-serial<span class="w"> </span>git
pip3<span class="w"> </span>install<span class="w"> </span>adafruit-circuitpython-ssd1306<span class="w"> </span>watchdog<span class="w"> </span>psutil<span class="w"> </span>Pillow<span class="w"> </span>redis<span class="w"> </span>keyboard<span class="w"> </span>pyudev<span class="w"> </span>sounddevice<span class="w"> </span>smbus2<span class="w"> </span>gpiozero<span class="w"> </span>RPI.GPIO<span class="w"> </span>evdev<span class="w"> </span>termcolor<span class="w"> </span>pyserial<span class="w"> </span>inotify_simple<span class="w"> </span>numpy<span class="w"> </span>rpi_hardware_pwm
pip3<span class="w"> </span>uninstall<span class="w"> </span>-y<span class="w"> </span>Pillow<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>pip3<span class="w"> </span>install<span class="w"> </span>Pillow
pip3<span class="w"> </span>install<span class="w"> </span>sugarpie<span class="w"> </span>flask_socketio<span class="w"> </span>board<span class="w"> </span>adafruit-blinka<span class="w"> </span>adafruit-circuitpython-seesaw<span class="w"> </span>luma.oled<span class="w"> </span>grove.py<span class="w"> </span>pigpio-encoder<span class="w"> </span>gpiod
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>python3-systemd<span class="w"> </span>e2fsprogs<span class="w"> </span>ntfs-3g<span class="w"> </span>exfatprogs<span class="w"> </span>console-terminus
</code></pre></div>
<h3 id="replace-rpigpio-with-lgpio">Replace RPi.GPIO with lgpio<a class="headerlink" href="#replace-rpigpio-with-lgpio" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>swig<span class="w"> </span>python3-dev<span class="w"> </span>build-essential<span class="w"> </span>git
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/joan2937/lg
<span class="nb">cd</span><span class="w"> </span>lg<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>make
sudo<span class="w"> </span>make<span class="w"> </span>install
<span class="nb">cd</span><span class="w"> </span>..<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>lgpio
</code></pre></div>
<h3 id="clone-the-cinemate-repo">Clone the Cinemate repo<a class="headerlink" href="#clone-the-cinemate-repo" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/Tiramisioux/Cinemate.git
</code></pre></div>
<h3 id="allow-mainpy-to-run-with-sudo">Allow <code>main.py</code> to run with sudo<a class="headerlink" href="#allow-mainpy-to-run-with-sudo" title="Permanent link">#</a></h3>
<p>Edit the sudoers file:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>visudo
</code></pre></div>
<p>add this to the end of the file:
<div class="highlight"><pre><span></span><code>pi ALL=(ALL) NOPASSWD: /home/pi/Cinemate/src/main.py
pi ALL=(ALL) NOPASSWD: /bin/mount, /bin/umount, /usr/bin/ntfs-3g
pi ALL=(ALL) NOPASSWD: /home/pi/Cinemate/src/logs/system.log
pi ALL=(ALL) NOPASSWD: /sbin/mount.ext4
</code></pre></div></p>
<h3 id="enable-networkmanager">Enable NetworkManager<a class="headerlink" href="#enable-networkmanager" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>NetworkManager<span class="w"> </span>--now
</code></pre></div>
<h3 id="rotate-logs">Rotate logs<a class="headerlink" href="#rotate-logs" title="Permanent link">#</a></h3>
<p>Paste this into the terminal and hit enter:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># tee /etc/logrotate.d/general_logs &lt;&lt;&#39;EOP&#39;</span>
/var/log/*.log<span class="w"> </span><span class="o">{</span>
<span class="w">   </span>size<span class="w"> </span>100M
<span class="w">   </span>rotate<span class="w"> </span><span class="m">5</span>
<span class="w">   </span>compress
<span class="w">   </span>missingok
<span class="w">   </span>notifempty
<span class="o">}</span>
EOP
</code></pre></div>
<h3 id="seed-redis-with-default-keys">Seed Redis with default keys<a class="headerlink" href="#seed-redis-with-default-keys" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code>redis-cli<span class="w"> </span><span class="s">&lt;&lt;&#39;EOF&#39;</span>
<span class="s">SET anamorphic_factor 1.0</span>
<span class="s">PUBLISH cp_controls anamorphic_factor</span>
<span class="s">SET bit_depth 12</span>
<span class="s">PUBLISH cp_controls bit_depth</span>
<span class="s">...</span>
<span class="s">EOF</span>
</code></pre></div>
<p>(See the settings guide for the full list.)</p>
<h3 id="add-a-convenience-alias">Add a convenience alias<a class="headerlink" href="#add-a-convenience-alias" title="Permanent link">#</a></h3>
<p>Append to <code>~/.bashrc</code>:</p>
<p><div class="highlight"><pre><span></span><code><span class="nb">alias</span><span class="w"> </span><span class="nv">Cinemate</span><span class="o">=</span><span class="s1">&#39;python3 /home/pi/Cinemate/src/main.py&#39;</span>
</code></pre></div>
Then, inside <code>cinemate</code> folder:</p>
<div class="highlight"><pre><span></span><code>make<span class="w"> </span>install
</code></pre></div>
<h3 id="install-the-cinemate-services">Install the Cinemate services<a class="headerlink" href="#install-the-cinemate-services" title="Permanent link">#</a></h3>
<p>Cinemate with two small helper services under <code>services/</code>:</p>
<ul>
<li><strong>storage-automount</strong> – mounts and unmounts removable drives such as SSDs,
  NVMe enclosures and the CFE HAT. Partitions named <code>RAW</code> are attached at
  <code>/media/RAW</code>; all others are mounted under <code>/media/&lt;LABEL&gt;</code>.</li>
<li><strong>wifi-hotspot</strong> – keeps a simple Wi‑Fi hotspot running via NetworkManager so
  you can reach the web UI even without other networking. The SSID and password
  come from the <code>system.wifi_hotspot</code> section of <code>settings.json</code>.</li>
</ul>
<p>Install and enable both services with:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>/home/pi/Cinemate/services
sudo<span class="w"> </span>make<span class="w"> </span>install
sudo<span class="w"> </span>make<span class="w"> </span><span class="nb">enable</span>
</code></pre></div>
<p>You can manage each one individually with <code>make &lt;action&gt;-&lt;service&gt;</code>, for example
<code>make status-wifi-hotspot</code>.</p>
<h2 id="backing-up-the-sd-card">Backing up the SD card<a class="headerlink" href="#backing-up-the-sd-card" title="Permanent link">#</a></h2>
<p>Create a compressed image:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>dd<span class="w"> </span><span class="k">if</span><span class="o">=</span>/dev/mmcblk0<span class="w"> </span><span class="nv">bs</span><span class="o">=</span>4M<span class="w"> </span><span class="nv">conv</span><span class="o">=</span>sparse,noerror<span class="w"> </span><span class="nv">status</span><span class="o">=</span>progress<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="se">\ </span>gzip<span class="w"> </span>-c<span class="w"> </span>&gt;<span class="w"> </span>/media/RAW/Cinemate_<span class="k">$(</span>date<span class="w"> </span>+<span class="s2">&quot;%Y%m%d_%H%M%S&quot;</span><span class="k">)</span>.img.gz
</code></pre></div>
<p>Or use PiShrink for a smaller file:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>bash<span class="w"> </span>-euo<span class="w"> </span>pipefail<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;</span>
<span class="s1">  ts=$(date +%Y%m%d_%H%M%S)</span>
<span class="s1">  raw=&quot;/media/RAW/Cinemate_${ts}.img&quot;</span>
<span class="s1">  final=&quot;/media/RAW/Cinemate_${ts}.img.gz&quot;</span>
<span class="s1">  dd if=/dev/mmcblk0 of=&quot;$raw&quot; bs=4M conv=sparse,noerror status=progress</span>
<span class="s1">  pishrink.sh -v -z &quot;$raw&quot; &quot;$final&quot;</span>
<span class="s1">  rm -f &quot;$raw&quot;</span>
<span class="s1">&#39;</span>
</code></pre></div>
<p>You now have cinepi-raw and Cinemate installed on your Raspberry Pi. Happy shooting!</p>
<h2 id="starting-cinemate">Starting Cinemate<a class="headerlink" href="#starting-cinemate" title="Permanent link">#</a></h2>
<p>If you are not using the service file for autostart, anywhere in the terminal, type:</p>
<div class="highlight"><pre><span></span><code>cinemate
</code></pre></div>
<blockquote>
<p>This would be the recommended way of trying out Cinemate as you will get extended logging in the terminal which can be helpful when troubleshooting. The Cinemate logger also relays logging messages from the running cinepi-raw instance.</p>
</blockquote>
<h1 id="extra-stuff">Extra stuff<a class="headerlink" href="#extra-stuff" title="Permanent link">#</a></h1>
<h2 id="hotspot-logic">Hotspot logic<a class="headerlink" href="#hotspot-logic" title="Permanent link">#</a></h2>
<p>If <code>wifi_hotspot</code> in <code>settings.json</code> is <code>true</code> and no hotspot is active, Cinemate starts its own hotspot <code>nmcli device wifi hotspot</code> using your chosen SSID and password. If the Pi is already connected to wifi (for example WiFi settings set with <code>sudo raspi-config</code>) this connection will be replaced by Cinemates hotspot. Set <code>enabled: false</code> to keep wlan0 free for regular Wi‑Fi use. </p>
<blockquote>
<p>Note that Cinemate still streams its web gui on whatever network the Pi is connected to, with GUI at <ip-address>:5000 and clean preview without GUI on <ip-address>:8000/stream</p>
</blockquote>
<h2 id="building-cinepi-raw">Building cinepi-raw<a class="headerlink" href="#building-cinepi-raw" title="Permanent link">#</a></h2>
<p>For easy later rebuilding and installation of cinepi-raw you can create this file [to be added]</p>
<h2 id="managing-the-cinemate-autostart-service">Managing the cinemate-autostart service<a class="headerlink" href="#managing-the-cinemate-autostart-service" title="Permanent link">#</a></h2>
<div class="highlight"><pre><span></span><code><span class="c1"># Here are the available Make commands for managing the service:</span>

make<span class="w"> </span>install<span class="w">   </span><span class="c1"># copy service file</span>
make<span class="w"> </span><span class="nb">enable</span><span class="w">    </span><span class="c1"># start on boot</span>
make<span class="w"> </span>start<span class="w">     </span><span class="c1"># launch now</span>
make<span class="w"> </span>stop<span class="w">      </span><span class="c1"># stop it</span>
make<span class="w"> </span>status<span class="w">    </span><span class="c1"># check status</span>
make<span class="w"> </span>disable<span class="w">   </span><span class="c1"># disable autostart</span>
make<span class="w"> </span>clean<span class="w">     </span><span class="c1"># remove the service</span>
</code></pre></div>
<p>Note that in order for the web ui to work properly you have to run <code>make install</code> once in the <code>/home/pi/cinemate</code> folder, even if you are not using the autostart service.</p>
<h2 id="managing-the-storage-automount-and-wifi-hotspot-services">Managing the storage-automount and wifi-hotspot services<a class="headerlink" href="#managing-the-storage-automount-and-wifi-hotspot-services" title="Permanent link">#</a></h2>
<p>Cinemate ships with two small helper services under <code>services/</code>:</p>
<ul>
<li><strong>storage-automount</strong> – mounts and unmounts removable drives such as SSDs,
  NVMe enclosures and the CFE HAT. Partitions named <code>RAW</code> are attached at
  <code>/media/RAW</code>; all others are mounted under <code>/media/&lt;LABEL&gt;</code>.</li>
<li><strong>wifi-hotspot</strong> – keeps a simple Wi‑Fi hotspot running via NetworkManager so
  you can reach the web UI even without other networking. The SSID and password
  come from the <code>system.wifi_hotspot</code> section of <code>settings.json</code>.</li>
</ul>
<p>Install and enable both services with:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>/home/pi/cinemate/services
sudo<span class="w"> </span>make<span class="w"> </span>install
sudo<span class="w"> </span>make<span class="w"> </span><span class="nb">enable</span>
</code></pre></div>
<p>You can manage each one individually with <code>make &lt;action&gt;-&lt;service&gt;</code>, for example
<code>make status-wifi-hotspot</code>.</p>
<h3 id="storage-automount-service">storage-automount service<a class="headerlink" href="#storage-automount-service" title="Permanent link">#</a></h3>
<p><code>storage-automount</code> is a systemd service that watches for removable drives and mounts them automatically. The accompanying Python script reacts to udev events and the CFE-HAT eject button so drives can be attached or detached safely.</p>
<p>It understands <code>ext4</code>, <code>ntfs</code> and <code>exfat</code> filesystems. Partitions labelled <code>RAW</code> are mounted at <code>/media/RAW</code>; any other label is mounted under <code>/media/&lt;LABEL&gt;</code> after sanitising the name. This applies to USB SSDs, NVMe drives and the CFE-HAT slot.</p>
<p>To manually install and enable the service:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>cinemate/services/storage-automount
sudo<span class="w"> </span>make<span class="w"> </span>install
sudo<span class="w"> </span>make<span class="w"> </span><span class="nb">enable</span>
</code></pre></div>
<p>You can stop or disable it later with:
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>make<span class="w"> </span>stop
sudo<span class="w"> </span>make<span class="w"> </span>disable
</code></pre></div></p>
<h3 id="wifi-hotspot-service">wifi-hotspot service<a class="headerlink" href="#wifi-hotspot-service" title="Permanent link">#</a></h3>
<p><code>wifi-hotspot</code> keeps a small access point running with the help of NetworkManager so you can always reach the web interface. The SSID and password are read from <code>/home/pi/cinemate/src/settings.json</code> under <code>system.wifi_hotspot</code>.</p>
<p>Install and enable it with:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>cinemate/services/wifi-hotspot
sudo<span class="w"> </span>make<span class="w"> </span>install
sudo<span class="w"> </span>make<span class="w"> </span><span class="nb">enable</span>
</code></pre></div>
<p>As with <code>storage-automount</code>, you can stop or disable the hotspot with <code>make stop</code> and <code>make disable</code>.</p>
</div>

              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.sections", "navigation.top", "toc.integrate", "toc.follow", "content.code.copy", "content.action.edit"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
    
  </body>
</html>