<!DOCTYPE html>

<html class="writer-html5" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><link href="https://tiramisioux.github.io/cinemate/installation-steps/" rel="canonical"/>
<link href="../img/favicon.ico" rel="shortcut icon"/>
<title>Manual installation (from scratch) - Cinemate Docs</title>
<link href="../css/theme.css" rel="stylesheet"/>
<link href="../css/theme_extra.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" rel="stylesheet"/>
<link href="../overrides/github-markdown.css" rel="stylesheet"/>
<link href="../templates/styles.scss" rel="stylesheet"/>
<script>
        // Current page data
        var mkdocs_page_name = "Manual installation (from scratch)";
        var mkdocs_page_input_path = "installation-steps.md";
        var mkdocs_page_url = "/cinemate/installation-steps/";
      </script>
<!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
<script>hljs.highlightAll();</script>
<link href="../renders/Cinemate-Docs.pdf" rel="alternate" title="PDF" type="application/pdf"/></head>
<body class="wy-body-for-nav" role="document">
<div class="wy-grid-for-nav">
<nav class="wy-nav-side stickynav" data-toggle="wy-nav-shift">
<div class="wy-side-scroll">
<div class="wy-side-nav-search">
<a class="icon icon-home" href=".."> Cinemate Docs
        </a><div role="search">
<form action="../search.html" class="wy-form" id="rtd-search-form" method="get">
<input aria-label="Search docs" name="q" placeholder="Search docs" title="Type search term here" type="text"/>
</form>
</div>
</div>
<div aria-label="Navigation menu" class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation">
<ul>
<li class="toctree-l1"><a class="reference internal" href="..">Home</a>
</li>
</ul>
<p class="caption"><span class="caption-text">Quick start</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/">Getting started with a minimal build</a>
</li>
</ul>
<p class="caption"><span class="caption-text">Using the camera</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../web-gui/">Web GUI</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../simple-gui/">HDMI GUI</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sensors/">Sensors</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../audio-recording/">Audio recording</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../digital-zoom/">Digital zoom</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../speed-ramping/">Speed ramping &amp; shutter angle synchronization</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dual-sensors/">Dual sensors</a>
</li>
</ul>
<p class="caption"><span class="caption-text">Customising your build</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../settings-json/">Settings file</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cli-user-guide/">Using the CLI</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cli-commands/">Commands reference</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ssh/">Connecting via SSH</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../hotspot-logic/">Configuring the Wi-Fi hotspot</a>
</li>
</ul>
<p class="caption"><span class="caption-text">System management</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../system-services/">System services</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../config-txt/">Modifying config.txt</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../compiling-cinepi-raw/">Recompiling cinepi-raw</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../overclocking/">Overclocking the Pi</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../backing-up-sd-card/">Backing up the SD card</a>
</li>
</ul>
<p class="caption"><span class="caption-text">Reference &amp; troubleshooting</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../redis-guide/">Redis API</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../redis-keys/">Key reference</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../preinstalled-hardware/">Hardware overview</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../known-issues/">Known issues</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting/">Troubleshooting</a>
</li>
</ul>
<p class="caption"><span class="caption-text">Cinemate builds</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../bare-bones-build/">Bare bones build</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../brick/">Box build</a>
</li>
</ul>
<p class="caption"><span class="caption-text">Development &amp; contributing</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal current" href="#">Manual installation (from scratch)</a>
<ul class="current">
<li class="toctree-l2"><a class="reference internal" href="#libcamera-170">libcamera 1.7.0</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nvm">nvm</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="#cpp-mjpeg-streamer">cpp-mjpeg-streamer</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="#cinepi-raw">CinePi-raw</a>
<ul>
<li class="toctree-l3"><a class="reference internal" href="#dependencies">Dependencies</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#cinepi-raw_1">cinepi-raw</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#imx585-driver">imx585 driver</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#imx283-driver">imx283 driver</a>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#enabling-i2c">Enabling I²C</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="#hostname">Hostname</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="#add-camera-modules-to-configtxt">Add camera modules to config.txt</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="#add-the-imx585-tuning-file-optional">Add the IMX585 tuning file (optional)</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ir-filter-switch-script-optional">IR filter switch script (optional)</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="#change-the-console-font-optional">Change the console font (optional)</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="#create-post-processing-configs">Create post-processing configs</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="#install-pishrink">Install PiShrink</a>
<ul>
<li class="toctree-l3"><a class="reference internal" href="#reboot-before-installing-cinemate">Reboot before installing Cinemate:</a>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#create-a-python-virtual-environment">Create a Python virtual environment</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="#grant-sudo-privileges-and-enable-i2c">Grant sudo privileges and enable I²C</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="#cinemate">Cinemate</a>
<ul>
<li class="toctree-l3"><a class="reference internal" href="#dependencies_1">Dependencies</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#replace-rpigpio-with-lgpio">Replace RPi.GPIO with lgpio</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#clone-the-cinemate-repo">Clone the Cinemate repo</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#allow-cinemates-mainpy-to-run-with-sudo">Allow Cinemates main.py to run with sudo</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#enable-networkmanager">Enable NetworkManager</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#rotate-logs">Rotate logs</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#seed-redis-with-default-keys">Seed Redis with default keys</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#add-a-convenience-alias">Add a convenience alias</a>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#cinemate-services">Cinemate services</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="#starting-cinemate">Starting Cinemate</a>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../todo/">Todo</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/">Contributing guide</a>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../renders/Cinemate-Docs.pdf">Download PDF</a>
</li>
</ul>
</div>
</div>
</nav>
<section class="wy-nav-content-wrap" data-toggle="wy-nav-shift">
<nav aria-label="Mobile navigation menu" class="wy-nav-top" role="navigation">
<i class="fa fa-bars" data-toggle="wy-nav-top"></i>
<a href="..">Cinemate Docs</a>
</nav>
<div class="wy-nav-content">
<div class="rst-content"><div aria-label="breadcrumbs navigation" role="navigation">
<ul class="wy-breadcrumbs">
<li><a aria-label="Docs" class="icon icon-home" href=".."></a></li>
<li class="breadcrumb-item">Development &amp; contributing</li>
<li class="breadcrumb-item active">Manual installation (from scratch)</li>
<li class="wy-breadcrumbs-aside">
<a class="icon icon-github" href="https://github.com/tiramisioux/cinemate/blob/cinemate-v3.1/docs/installation-steps.md"> Edit on GitHub</a>
</li>
</ul>
<hr/>
</div>
<div class="document" itemscope="itemscope" itemtype="http://schema.org/Article" role="main">
<div class="section" itemprop="articleBody">
<div class="markdown-body">
<h1 id="manual-installation">Manual installation<a class="headerlink" href="#manual-installation" title="Permanent link">#</a></h1>
<p>Here is how you can manually install libcamera, cinepi-raw, cinemate and accompanying software on the Raspberry Pi.</p>
<blockquote>
<p>Although Raspberry Pi 4 (and even 3) has been known to work with the stack below, a Raspopberry Pi 5B or Compute Module 5 is recommended. Also note that for high speed USB 3, a Raspberry Pi 4 or 5 is needed.</p>
</blockquote>
<p>This guide assumes fresh Raspbery Pi Bookworm installation running kernel 6.12.20+.</p>
<p>If you run Raspberry Pi OS Lite, begin by installing the following packages:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>python-pip<span class="w"> </span>git<span class="w"> </span>python3-jinja2
</code></pre></div>
<h2 id="libcamera-170">libcamera 1.7.0 <img height="12" src="https://img.shields.io/badge/raspberry pi-fork-red"/><a class="headerlink" href="#libcamera-170" title="Permanent link">#</a></h2>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/raspberrypi/libcamera<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
sudo<span class="w"> </span>find<span class="w"> </span>~/libcamera<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span><span class="se">\(</span><span class="w"> </span>-name<span class="w"> </span><span class="s1">'*.py'</span><span class="w"> </span>-o<span class="w"> </span>-name<span class="w"> </span><span class="s1">'*.sh'</span><span class="w"> </span><span class="se">\)</span><span class="w"> </span>-exec<span class="w"> </span>chmod<span class="w"> </span>+x<span class="w"> </span><span class="o">{}</span><span class="w"> </span><span class="se">\;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
<span class="nb">cd</span><span class="w"> </span>libcamera<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
sudo<span class="w"> </span>meson<span class="w"> </span>setup<span class="w"> </span>build<span class="w"> </span>--buildtype<span class="o">=</span>release<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-Dpipelines<span class="o">=</span>rpi/vc4,rpi/pisp<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-Dipas<span class="o">=</span>rpi/vc4,rpi/pisp<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-Dv4l2<span class="o">=</span><span class="nb">true</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-Dgstreamer<span class="o">=</span>enabled<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-Dtest<span class="o">=</span><span class="nb">false</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-Dlc-compliance<span class="o">=</span>disabled<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-Dcam<span class="o">=</span>disabled<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-Dqcam<span class="o">=</span>disabled<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-Ddocumentation<span class="o">=</span>disabled<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-Dpycamera<span class="o">=</span>enabled<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
sudo<span class="w"> </span>ninja<span class="w"> </span>-C<span class="w"> </span>build<span class="w"> </span>install<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
<span class="nb">cd</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/libcamera/utils<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>chmod<span class="w"> </span>+x<span class="w"> </span>*.py<span class="w"> </span>*.sh<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>chmod<span class="w"> </span>+x<span class="w"> </span>~/libcamera/src/ipa/ipa-sign.sh<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>~/libcamera<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>ninja<span class="w"> </span>-C<span class="w"> </span>build<span class="w"> </span>install
</code></pre></div>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>--reinstall<span class="w"> </span>libtiff5-dev<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>ln<span class="w"> </span>-sf<span class="w"> </span><span class="k">$(</span>find<span class="w"> </span>/usr/lib<span class="w"> </span>-name<span class="w"> </span><span class="s2">"libtiff.so"</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-n<span class="w"> </span><span class="m">1</span><span class="k">)</span><span class="w"> </span>/usr/lib/aarch64-linux-gnu/libtiff.so.5<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>/usr/lib/aarch64-linux-gnu:<span class="nv">$LD_LIBRARY_PATH</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>ldconfig
</code></pre></div>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>python3-pip<span class="w"> </span>git<span class="w"> </span>python3-jinja2<span class="w"> </span>libboost-dev<span class="w"> </span>libgnutls28-dev<span class="w"> </span>openssl<span class="w"> </span>pybind11-dev<span class="w"> </span>qtbase5-dev<span class="w"> </span>libqt5core5a<span class="w"> </span>meson<span class="w"> </span>cmake<span class="w"> </span>python3-yaml<span class="w"> </span>python3-ply<span class="w"> </span>libglib2.0-dev<span class="w"> </span>libgstreamer-plugins-base1.0-dev<span class="w"> </span>libgstreamer1.0-dev<span class="w"> </span>libavdevice59
</code></pre></div>
<h2 id="nvm">nvm<a class="headerlink" href="#nvm" title="Permanent link">#</a></h2>
<div class="highlight"><pre><span></span><code>wget<span class="w"> </span>-qO-<span class="w"> </span>https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.3/install.sh<span class="w"> </span><span class="p">|</span><span class="w"> </span>bash
<span class="nb">source</span><span class="w"> </span>~/.bashrc
nvm<span class="w"> </span>install<span class="w"> </span>--lts
</code></pre></div>
<blockquote>
<p>Cinemate uses nvm (Node Version Manager) for its web ui. If you plan to use cionepi-raw only, nvm is not needed.</p>
</blockquote>
<h2 id="cpp-mjpeg-streamer">cpp-mjpeg-streamer <img height="12" src="https://img.shields.io/badge/cinemate-fork-gren"/><a class="headerlink" href="#cpp-mjpeg-streamer" title="Permanent link">#</a></h2>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>libspdlog-dev<span class="w"> </span>libjsoncpp-dev
<span class="nb">cd</span><span class="w"> </span>/home/pi
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/Tiramisioux/cpp-mjpeg-streamer.git<span class="w"> </span>--branch<span class="w"> </span>cinemate
<span class="nb">cd</span><span class="w"> </span>cpp-mjpeg-streamer<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>mkdir<span class="w"> </span>build<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>build
cmake<span class="w"> </span>..<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>make
make<span class="w"> </span>install-here
</code></pre></div>
<blockquote>
<p>Cinemate uses a custom fork of cpp-mjpeg-streamer. If you plan to use only cinepi-raw, you can use the original app found at https://github.com/nadjieb/cpp-mjpeg-streamer</p>
</blockquote>
<h2 id="cinepi-raw">CinePi-raw<a class="headerlink" href="#cinepi-raw" title="Permanent link">#</a></h2>
<h3 id="dependencies">Dependencies<a class="headerlink" href="#dependencies" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code>sudo apt install -y cmake libepoxy-dev libavdevice-dev build-essential cmake libboost-program-options-dev libdrm-dev libexif-dev libcamera-dev libjpeg-dev libtiff5-dev libpng-dev redis-server libhiredis-dev libasound2-dev libjsoncpp-dev libpng-dev meson ninja-build libavcodec-dev libavdevice-dev libavformat-dev libswresample-dev &amp;&amp; sudo apt-get install libjsoncpp-dev &amp;&amp; cd ~ &amp;&amp; git clone https://github.com/sewenew/redis-plus-plus.git &amp;&amp; cd redis-plus-plus &amp;&amp; mkdir build &amp;&amp; cd build &amp;&amp; cmake .. &amp;&amp; make &amp;&amp; sudo make install &amp;&amp; cd ~
</code></pre></div>
<h3 id="cinepi-raw_1">cinepi-raw <img height="12" src="https://img.shields.io/badge/cinemate-fork-gren"/><a class="headerlink" href="#cinepi-raw_1" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/Tiramisioux/cinepi-raw.git<span class="w"> </span>--branch<span class="w"> </span>rpicam-apps_1.7_custom_encoder
<span class="nb">cd</span><span class="w"> </span>/home/pi/cinepi-raw
sudo<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>build<span class="w"> </span><span class="o">(</span><span class="k">if</span><span class="w"> </span>you<span class="w"> </span>have<span class="w"> </span>a<span class="w"> </span>previous<span class="w"> </span>build<span class="o">)</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">PKG_CONFIG_PATH</span><span class="o">=</span>/home/pi/cpp-mjpeg-streamer/build:<span class="nv">$PKG_CONFIG_PATH</span>
sudo<span class="w"> </span>meson<span class="w"> </span>setup<span class="w"> </span>build
sudo<span class="w"> </span>ninja<span class="w"> </span>-C<span class="w"> </span>build
sudo<span class="w"> </span>meson<span class="w"> </span>install<span class="w"> </span>-C<span class="w"> </span>build
</code></pre></div>
<blockquote>
<p>Cinemate depends on a custom branch of cinepi-raw created by Csaba Nagy. If you plan to use the original version you can find it adapted for rpicam-apps 0.7 here: https://github.com/Tiramisioux/cinepi-raw/tree/rpicam-apps_1.7</p>
<p>Join the CinePi Discord <a href="https://discord.gg/Hr4dfhuK">here</a>!</p>
</blockquote>
<h3 id="imx585-driver">imx585 driver <img height="12" src="https://img.shields.io/badge/cinemate-fork-gren"/><a class="headerlink" href="#imx585-driver" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>linux-headers<span class="w"> </span>dkms<span class="w"> </span>git
</code></pre></div>
<div class="highlight"><pre><span></span><code>git clone https://github.com/Tiramisioux/imx585-v4l2-driver.git
cd imx585-v4l2-driver/
./setup.sh
</code></pre></div>
<blockquote>
<p>The imx585 is written by Will Whang. For original drivers and startup guides, visit https://github.com/will127534/StarlightEye</p>
</blockquote>
<h3 id="imx283-driver">imx283 driver <img height="12" src="https://img.shields.io/badge/cinemate-fork-gren"/><a class="headerlink" href="#imx283-driver" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>linux-headers<span class="w"> </span>dkms<span class="w"> </span>git
</code></pre></div>
<div class="highlight"><pre><span></span><code>git clone https://github.com/Tiramisioux/imx283-v4l2-driver.git
cd imx283-v4l2-driver/
./setup.sh
</code></pre></div>
<blockquote>
<p>The imx283 is written by Will Whang. For original drivers and startup guides, visit https://github.com/will127534/imx283-v4l2-driver</p>
</blockquote>
<h2 id="enabling-i2c">Enabling I²C<a class="headerlink" href="#enabling-i2c" title="Permanent link">#</a></h2>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>apt<span class="w"> </span>upgrade
sudo<span class="w"> </span>raspi-config<span class="w"> </span>nonint<span class="w"> </span>do_i2c<span class="w"> </span><span class="m">0</span>
</code></pre></div>
<blockquote>
<p>Enabling I2C is needed for using the camera modules.</p>
</blockquote>
<h2 id="hostname">Hostname<a class="headerlink" href="#hostname" title="Permanent link">#</a></h2>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>hostnamectl<span class="w"> </span>set-hostname<span class="w"> </span>cinepi
</code></pre></div>
<blockquote>
<p>You will find the pi as <code>cinepi.local</code> on the local network, or at the hotspot Cinemate creates</p>
</blockquote>
<h2 id="add-camera-modules-to-configtxt">Add camera modules to config.txt<a class="headerlink" href="#add-camera-modules-to-configtxt" title="Permanent link">#</a></h2>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>nano<span class="w"> </span>/boot/firmware/config.txt
</code></pre></div>
<p>Paste this into your file, and uncomment the sensor you are using.</p>
<p>Also specify which physical camera port you have connected your sensor to.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Raspberry Pi HQ camera</span>
<span class="c1">#camera_auto_detect=1</span>
<span class="c1">#dtoverlay=imx477,cam0</span>

<span class="c1"># Raspberry Pi GS camera</span>
<span class="c1">#camera_auto_detect=1</span>
<span class="c1">#dtoverlay=imx296,cam0</span>

<span class="c1"># OneInchEye</span>
<span class="c1">#camera_auto_detect=0</span>
<span class="c1">#dtoverlay=imx283,cam0</span>

<span class="c1"># StarlightEye</span>
<span class="nv">camera_auto_detect</span><span class="o">=</span><span class="m">0</span>
<span class="nv">dtoverlay</span><span class="o">=</span>imx585,cam0

<span class="c1"># StarlightEye Mono</span>
<span class="nv">camera_auto_detect</span><span class="o">=</span><span class="m">0</span>
<span class="c1">#dtoverlay=imx585,cam1,mono</span>

<span class="c1"># CFE Hat (pi 5 only)</span>
<span class="nv">dtparam</span><span class="o">=</span>pciex1
<span class="nv">dtparam</span><span class="o">=</span><span class="nv">pciex1_gen</span><span class="o">=</span><span class="m">3</span>

<span class="nv">dtoverlay</span><span class="o">=</span>disable-bt
</code></pre></div>
<p>And at the very bottom of the file:</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span>all<span class="o">]</span>
<span class="nv">avoid_warnings</span><span class="o">=</span><span class="m">1</span>
<span class="nv">disable_splash</span><span class="o">=</span><span class="m">1</span>
</code></pre></div>
<h2 id="add-the-imx585-tuning-file-optional">Add the IMX585 tuning file (optional)<a class="headerlink" href="#add-the-imx585-tuning-file-optional" title="Permanent link">#</a></h2>
<p><div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-L<span class="w"> </span>-o<span class="w"> </span>/home/pi/libcamera/src/ipa/rpi/pisp/data/imx585.json<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>https://raw.githubusercontent.com/will127534/libcamera/master/src/ipa/rpi/pisp/data/imx585.json
sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">'8s/"black_level": *[0-9]\+/"black_level": 0/'</span><span class="w"> </span>/home/pi/libcamera/src/ipa/rpi/pisp/data/imx585.json
<span class="c1"># cp /home/pi/libcamera/src/ipa/rpi/pisp/data/imx585.json /usr/local/share/libcamera/ipa/rpi/pisp/</span>
</code></pre></div>
For the mono sensor use <code>imx585_mono.json</code> instead.</p>
<h2 id="ir-filter-switch-script-optional">IR filter switch script (optional)<a class="headerlink" href="#ir-filter-switch-script-optional" title="Permanent link">#</a></h2>
<div class="highlight"><pre><span></span><code>wget<span class="w"> </span>https://raw.githubusercontent.com/will127534/StarlightEye/master/software/IRFilter<span class="w"> </span>-O<span class="w"> </span>/usr/local/bin/IRFilter
sudo<span class="w"> </span>chmod<span class="w"> </span>+x<span class="w"> </span>/usr/local/bin/IRFilter
</code></pre></div>
<blockquote>
<p>Cinemate has its own way of handling the IR switch but the installation above can be convenient for use outside of Cinemate</p>
</blockquote>
<h2 id="change-the-console-font-optional">Change the console font (optional)<a class="headerlink" href="#change-the-console-font-optional" title="Permanent link">#</a></h2>
<div class="highlight"><pre><span></span><code>sudi<span class="w"> </span>apt<span class="w"> </span>update
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>console-setup<span class="w"> </span>kbd
sudo<span class="w"> </span>dpkg-reconfigure<span class="w"> </span>console-setup<span class="w">  </span><span class="c1"># choose Terminus / 16x32</span>
</code></pre></div>
<p>Verify <code>/etc/default/console-setup</code> contains:
<div class="highlight"><pre><span></span><code>FONTFACE="Terminus"
FONTSIZE="16x32"
</code></pre></div>
Then enable the service:
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>console-setup.service
sudo<span class="w"> </span>systemctl<span class="w"> </span>start<span class="w"> </span>console-setup.service
</code></pre></div></p>
<blockquote>
<p>This can be useful if running the Pi on a small HD field monitor</p>
</blockquote>
<h2 id="create-post-processing-configs">Create post-processing configs<a class="headerlink" href="#create-post-processing-configs" title="Permanent link">#</a></h2>
<p>Paste this into the terminal and hit enter:
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>bash<span class="w"> </span>-c<span class="w"> </span><span class="s1">'cat &gt; post-processing.json &lt;&lt; EOF</span>
<span class="s1">{</span>
<span class="s1">    "sharedContext": {},</span>
<span class="s1">    "mjpegPreview": {</span>
<span class="s1">        "port": 8000</span>
<span class="s1">    }</span>
<span class="s1">}</span>
<span class="s1">EOF'</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
sudo<span class="w"> </span>chmod<span class="w"> </span>+x<span class="w"> </span>post-processing.json<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
sudo<span class="w"> </span>bash<span class="w"> </span>-c<span class="w"> </span><span class="s1">'cat &gt; post-processing0.json &lt;&lt; EOF</span>
<span class="s1">{</span>
<span class="s1">    "sharedContext": {},</span>
<span class="s1">    "mjpegPreview": {</span>
<span class="s1">        "port": 8000</span>
<span class="s1">    }</span>
<span class="s1">}</span>
<span class="s1">EOF'</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
sudo<span class="w"> </span>chmod<span class="w"> </span>+x<span class="w"> </span>post-processing0.json<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
sudo<span class="w"> </span>bash<span class="w"> </span>-c<span class="w"> </span><span class="s1">'cat &gt; post-processing1.json &lt;&lt; EOF</span>
<span class="s1">{</span>
<span class="s1">    "sharedContext": {},</span>
<span class="s1">    "mjpegPreview": {</span>
<span class="s1">        "port": 8001</span>
<span class="s1">    }</span>
<span class="s1">}</span>
<span class="s1">EOF'</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
sudo<span class="w"> </span>chmod<span class="w"> </span>+x<span class="w"> </span>post-processing1.json
</code></pre></div></p>
<h2 id="install-pishrink">Install PiShrink<a class="headerlink" href="#install-pishrink" title="Permanent link">#</a></h2>
<div class="highlight"><pre><span></span><code>wget<span class="w"> </span>https://raw.githubusercontent.com/Drewsif/PiShrink/master/pishrink.sh
sudo<span class="w"> </span>install<span class="w"> </span>-m755<span class="w"> </span>pishrink.sh<span class="w"> </span>/usr/local/bin/pishrink
</code></pre></div>
<blockquote>
<p>PiShrink is a great tool for compressing SD image file backups of the SD card. See here for instructions</p>
</blockquote>
<h3 id="reboot-before-installing-cinemate">Reboot before installing Cinemate:<a class="headerlink" href="#reboot-before-installing-cinemate" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code>reboot
</code></pre></div>
<p>You should now have a working install of cinepi-raw. To try it out, see this section [TBA]</p>
<p>To continue installing Cinemate, follow the steps below:</p>
<h2 id="create-a-python-virtual-environment">Create a Python virtual environment<a class="headerlink" href="#create-a-python-virtual-environment" title="Permanent link">#</a></h2>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>python3-venv
python3<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>/home/pi/.cinemate-env
<span class="nb">echo</span><span class="w"> </span><span class="s2">"source /home/pi/.cinemate-env/bin/activate"</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>~/.bashrc
<span class="nb">source</span><span class="w"> </span>/home/pi/.cinemate-env/bin/activate
</code></pre></div>
<h2 id="grant-sudo-privileges-and-enable-i2c">Grant sudo privileges and enable I²C<a class="headerlink" href="#grant-sudo-privileges-and-enable-i2c" title="Permanent link">#</a></h2>
<p><div class="highlight"><pre><span></span><code><span class="nb">echo</span><span class="w"> </span><span class="s2">"pi ALL=(ALL) NOPASSWD: /home/pi/.cinemate-env/bin/*"</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/etc/sudoers.d/cinemate-env
sudo<span class="w"> </span>chown<span class="w"> </span>-R<span class="w"> </span>pi:pi<span class="w"> </span>/home/pi/.cinemate-env
sudo<span class="w"> </span>chown<span class="w"> </span>-R<span class="w"> </span>pi:pi<span class="w"> </span>/media<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>chmod<span class="w"> </span><span class="m">755</span><span class="w"> </span>/media
sudo<span class="w"> </span>usermod<span class="w"> </span>-aG<span class="w"> </span>i2c<span class="w"> </span>pi
sudo<span class="w"> </span>modprobe<span class="w"> </span>i2c-dev<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span>i2c-dev<span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>-a<span class="w"> </span>/etc/modules
<span class="nb">echo</span><span class="w"> </span><span class="s2">"pi ALL=(ALL) NOPASSWD: /home/pi/run_cinemate.sh"</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>-a<span class="w"> </span>/etc/sudoers.d/pi_cinemate
</code></pre></div>
Reboot so the group changes take effect:</p>
<div class="highlight"><pre><span></span><code>reboot
</code></pre></div>
<h2 id="cinemate">Cinemate<a class="headerlink" href="#cinemate" title="Permanent link">#</a></h2>
<h3 id="dependencies_1">Dependencies<a class="headerlink" href="#dependencies_1" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code><span class="nb">source</span><span class="w"> </span>/home/pi/.cinemate-env/bin/activate
python3<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--upgrade<span class="w"> </span>pip<span class="w"> </span>setuptools<span class="w"> </span>wheel
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>i2c-tools<span class="w"> </span>portaudio19-dev<span class="w"> </span>build-essential<span class="w"> </span>python3-dev<span class="w"> </span>python3-pip<span class="w"> </span>python3-smbus<span class="w"> </span>python3-serial<span class="w"> </span>git
pip3<span class="w"> </span>install<span class="w"> </span>adafruit-circuitpython-ssd1306<span class="w"> </span>watchdog<span class="w"> </span>psutil<span class="w"> </span>Pillow<span class="w"> </span>redis<span class="w"> </span>keyboard<span class="w"> </span>pyudev<span class="w"> </span>sounddevice<span class="w"> </span>smbus2<span class="w"> </span>gpiozero<span class="w"> </span>RPI.GPIO<span class="w"> </span>evdev<span class="w"> </span>termcolor<span class="w"> </span>pyserial<span class="w"> </span>inotify_simple<span class="w"> </span>numpy<span class="w"> </span>rpi_hardware_pwm
pip3<span class="w"> </span>uninstall<span class="w"> </span>-y<span class="w"> </span>Pillow<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>pip3<span class="w"> </span>install<span class="w"> </span>Pillow
pip3<span class="w"> </span>install<span class="w"> </span>sugarpie<span class="w"> </span>flask_socketio<span class="w"> </span>board<span class="w"> </span>adafruit-blinka<span class="w"> </span>adafruit-circuitpython-seesaw<span class="w"> </span>luma.oled<span class="w"> </span>grove.py<span class="w"> </span>pigpio-encoder<span class="w"> </span>gpiod
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>python3-systemd<span class="w"> </span>e2fsprogs<span class="w"> </span>ntfs-3g<span class="w"> </span>exfatprogs<span class="w"> </span>console-terminus
</code></pre></div>
<h3 id="replace-rpigpio-with-lgpio">Replace RPi.GPIO with lgpio<a class="headerlink" href="#replace-rpigpio-with-lgpio" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>swig<span class="w"> </span>python3-dev<span class="w"> </span>build-essential<span class="w"> </span>git
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/joan2937/lg
<span class="nb">cd</span><span class="w"> </span>lg<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>make
sudo<span class="w"> </span>make<span class="w"> </span>install
<span class="nb">cd</span><span class="w"> </span>..<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>lgpio
</code></pre></div>
<h3 id="clone-the-cinemate-repo">Clone the Cinemate repo<a class="headerlink" href="#clone-the-cinemate-repo" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/Tiramisioux/cinemate.git
</code></pre></div>
<h3 id="allow-cinemates-mainpy-to-run-with-sudo">Allow Cinemates <code>main.py</code> to run with sudo<a class="headerlink" href="#allow-cinemates-mainpy-to-run-with-sudo" title="Permanent link">#</a></h3>
<p>Edit the sudoers file:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>visudo
</code></pre></div>
<p>add this to the end of the file:
<div class="highlight"><pre><span></span><code>pi ALL=(ALL) NOPASSWD: /home/pi/cinemate/src/main.py
pi ALL=(ALL) NOPASSWD: /bin/mount, /bin/umount, /usr/bin/ntfs-3g
pi ALL=(ALL) NOPASSWD: /home/pi/cinemate/src/logs/system.log
pi ALL=(ALL) NOPASSWD: /sbin/mount.ext4
</code></pre></div></p>
<h3 id="enable-networkmanager">Enable NetworkManager<a class="headerlink" href="#enable-networkmanager" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>NetworkManager<span class="w"> </span>--now
</code></pre></div>
<h3 id="rotate-logs">Rotate logs<a class="headerlink" href="#rotate-logs" title="Permanent link">#</a></h3>
<p>Paste this into the terminal and hit enter:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># tee /etc/logrotate.d/general_logs &lt;&lt;'EOP'</span>
/var/log/*.log<span class="w"> </span><span class="o">{</span>
<span class="w">   </span>size<span class="w"> </span>100M
<span class="w">   </span>rotate<span class="w"> </span><span class="m">5</span>
<span class="w">   </span>compress
<span class="w">   </span>missingok
<span class="w">   </span>notifempty
<span class="o">}</span>
EOP
</code></pre></div>
<h3 id="seed-redis-with-default-keys">Seed Redis with default keys<a class="headerlink" href="#seed-redis-with-default-keys" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code>redis-cli<span class="w"> </span><span class="s">&lt;&lt;'EOF'</span>
<span class="s">SET anamorphic_factor 1.0</span>
<span class="s">PUBLISH cp_controls anamorphic_factor</span>
<span class="s">SET bit_depth 12</span>
<span class="s">PUBLISH cp_controls bit_depth</span>
<span class="s">...</span>
<span class="s">EOF</span>
</code></pre></div>
<p>(See the settings guide for the full list.)</p>
<h3 id="add-a-convenience-alias">Add a convenience alias<a class="headerlink" href="#add-a-convenience-alias" title="Permanent link">#</a></h3>
<p>Append to <code>~/.bashrc</code>:</p>
<p><div class="highlight"><pre><span></span><code><span class="nb">alias</span><span class="w"> </span><span class="nv">Cinemate</span><span class="o">=</span><span class="s1">'python3 /home/pi/Cinemate/src/main.py'</span>
</code></pre></div>
Then, inside <code>cinemate</code> folder:</p>
<div class="highlight"><pre><span></span><code>make<span class="w"> </span>install
</code></pre></div>
<h2 id="cinemate-services">Cinemate services<a class="headerlink" href="#cinemate-services" title="Permanent link">#</a></h2>
<p>Cinemate with two small helper services under <code>services/</code>:</p>
<ul>
<li><strong>storage-automount</strong> – mounts and unmounts removable drives such as SSDs,
  NVMe enclosures and the CFE HAT. Partitions named <code>RAW</code> are attached at
  <code>/media/RAW</code>; all others are mounted under <code>/media/&lt;LABEL&gt;</code>.</li>
<li><strong>wifi-hotspot</strong> – keeps a simple Wi‑Fi hotspot running via NetworkManager so
  you can reach the web UI even without other networking. The SSID and password
  come from the <code>system.wifi_hotspot</code> section of <code>settings.json</code>.</li>
</ul>
<p>Install and enable both services with:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>/home/pi/cinemate/services
sudo<span class="w"> </span>make<span class="w"> </span>install
sudo<span class="w"> </span>make<span class="w"> </span><span class="nb">enable</span>
</code></pre></div>
<p>You can manage each one individually with <code>make &lt;action&gt;-&lt;service&gt;</code>, for example
<code>make status-wifi-hotspot</code>.</p>
<h2 id="starting-cinemate">Starting Cinemate<a class="headerlink" href="#starting-cinemate" title="Permanent link">#</a></h2>
<p>If you are not using the service file for autostart, anywhere in the terminal, type:</p>
<div class="highlight"><pre><span></span><code>cinemate
</code></pre></div>
<blockquote>
<p>This would be the recommended way of trying out Cinemate as you will get extended logging in the terminal which can be helpful when troubleshooting. The Cinemate logger also relays logging messages from the running cinepi-raw instance.</p>
</blockquote>
</div>
</div>
</div><footer>
<div aria-label="Footer Navigation" class="rst-footer-buttons" role="navigation">
<a class="btn btn-neutral float-left" href="../brick/" title="Box build"><span class="icon icon-circle-arrow-left"></span> Previous</a>
<a class="btn btn-neutral float-right" href="../todo/" title="Todo">Next <span class="icon icon-circle-arrow-right"></span></a>
</div>
<hr/>
<div role="contentinfo">
<!-- Copyright etc -->
</div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
</div>
</div>
</section>
</div>
<div aria-label="Versions" class="rst-versions" role="note">
<span class="rst-current-version" data-toggle="rst-current-version">
<span>
<a class="fa fa-github" href="https://github.com/tiramisioux/cinemate" style="color: #fcfcfc"> GitHub</a>
</span>
<span><a href="../brick/" style="color: #fcfcfc">« Previous</a></span>
<span><a href="../todo/" style="color: #fcfcfc">Next »</a></span>
</span>
</div>
<script src="../js/jquery-3.6.0.min.js"></script>
<script>var base_url = "..";</script>
<script src="../js/theme_extra.js"></script>
<script src="../js/theme.js"></script>
<script src="../search/main.js"></script>
<script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>
</body>
</html>
