<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://tiramisioux.github.io/cinemate/installation-steps/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Manual installation (from scratch) - Cinemate Docs</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../templates/styles.scss" rel="stylesheet" />
        <link href="../stylesheets/extra.css" rel="stylesheet" />
        <link href="https://unpkg.com/highlightjs-copy@1/dist/highlightjs-copy.min.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Manual installation (from scratch)";
        var mkdocs_page_input_path = "installation-steps.md";
        var mkdocs_page_url = "/cinemate/installation-steps/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Cinemate Docs
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../readme/">Introduction</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Quick start</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../getting-started/">Getting started with a minimal build</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Customising your build</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../ssh/">Connecting via SSH</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../settings-json/">Settings file</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../hardware-controls/">Adding hardware controls</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../hotspot-logic/">Configuring the Wi-Fi hotspot</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Using the camera</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../cli-user-guide/">CinePi RAW terminal commands</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simple-gui/">HDMI GUI</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../web-gui/">Web GUI</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../sensors/">Sensors</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../audio-recording/">Audio recording</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../digital-zoom/">Digital zoom</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../speed-ramping/">Speed ramping & shutter angle synchronization</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dual-sensors/">Dual sensors</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cli-commands/">Cinemate terminal commands</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">System management</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../system-services/">System services</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../config-txt/">Modifying config.txt</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../compiling-cinepi-raw/">Recompiling cinepi-raw</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../overclocking/">Overclocking the Pi</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../backing-up-sd-card/">Backing up the SD card</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Reference & troubleshooting</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../redis-guide/">Redis API</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../redis-keys/">Key reference</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../preinstalled-hardware/">Hardware overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../known-issues/">Known issues</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../troubleshooting/">Troubleshooting</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Cinemate builds</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../bare-bones-build/">Bare bones build</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../brick/">Box build</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Development & contributing</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Manual installation (from scratch)</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#tools-dependencies">Tools &amp; dependencies</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#libcamera-170">libcamera 1.7.0</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#cpp-mjpeg-streamer">cpp-mjpeg-streamer</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#cinepi-raw">CinePi-RAW</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#seed-redis-with-white-balance-default-keys">Seed Redis with white balance default keys</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#imx585-driver-optional">IMX585 driver (optional)</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#add-imx585-tuning-files">Add IMX585 tuning files</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#ir-filter-switch-script">IR filter switch script</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#enabling-i2c">Enabling I²C</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#setting-hostname">Setting hostname</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#add-camera-modules-to-configtxt">Add camera modules to config.txt</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#change-the-console-font-optional">Change the console font (optional)</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#create-post-processing-configs">Create post-processing configs</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#install-pishrink">Install PiShrink</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#reboot">Reboot</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#trying-out-cinepi-from-the-terminal">Trying out CinePi from the terminal</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#cinemate">Cinemate</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#system-wide-packages">System wide packages</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#create-a-python-virtual-environment">Create a Python virtual environment</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#grant-sudo-privileges-and-enable-i2c">Grant sudo privileges and enable I²C</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#python-packages">Python packages</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#alternative-gpio-back-end">Alternative GPIO back-end</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#clone-the-cinemate-repo">Clone the Cinemate repo</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#allow-cinemate-to-run-with-sudo">Allow Cinemate to run with sudo</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#enable-networkmanager">Enable NetworkManager</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#rotate-logs">Rotate logs</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#seed-redis-with-default-keys">Seed Redis with default keys</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#add-alias">Add alias</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#cinemate-services">Cinemate services</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#storage-automount">storage-automount</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#wifi-hotspot">wifi-hotspot</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#connect-to-the-pi-if-not-already-connected">Connect to the Pi (if not already connected):</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#starting-cinemate">Starting Cinemate</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#cinemate-autostartservice">cinemate-autostart.service</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../todo/">Todo</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../contributors/">Contributors</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../contributing/">Contributing to the project</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../acknowledgments/">Acknowledgements</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Cinemate Docs</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Development & contributing</li>
      <li class="breadcrumb-item active">Manual installation (from scratch)</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/tiramisioux/cinemate/blob/main/docs/installation-steps.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
<div class="markdown-body">
  <h1 id="installation">Installation<a class="headerlink" href="#installation" title="Permanent link">#</a></h1>
<p>Here is how you can manually install libcamera, cinepi-raw, cinemate and accompanying software on the Raspberry Pi.</p>
<div class="admonition note">
<p>Stack works on Raspberry Pi 4 and 5 models. 2 GB RAM is sufficient, while more RAM will give you a larger framebuffer. Useful at high frame rates.</p>
</div>
<div class="admonition note">
<p>Cinemate is using Linux kernel version 6.12.25. Recommended OS is Bookworm Lite.</p>
</div>
<h3 id="tools-dependencies">Tools &amp; dependencies<a class="headerlink" href="#tools-dependencies" title="Permanent link">#</a></h3>
<pre><code>sudo apt update -y
sudo apt upgrade -y
</code></pre>
<pre><code class="language-bash">sudo apt-get install python3-jinja2 python3-ply python3-yaml
</code></pre>
<pre><code>sudo apt install -y git cmake libepoxy-dev libavdevice-dev build-essential cmake libboost-program-options-dev libdrm-dev libexif-dev libcamera-dev libjpeg-dev libtiff5-dev libpng-dev redis-server libhiredis-dev libasound2-dev libjsoncpp-dev libpng-dev meson ninja-build libavcodec-dev libavdevice-dev libavformat-dev libswresample-dev &amp;&amp; sudo apt-get install libjsoncpp-dev &amp;&amp; cd ~ &amp;&amp; git clone https://github.com/sewenew/redis-plus-plus.git &amp;&amp; cd redis-plus-plus &amp;&amp; mkdir build &amp;&amp; cd build &amp;&amp; cmake .. &amp;&amp; make &amp;&amp; sudo make install &amp;&amp; cd ~
</code></pre>
<h3 id="libcamera-170">libcamera 1.7.0 <img src="https://img.shields.io/badge/raspberry pi-fork-red" height="12" ><a class="headerlink" href="#libcamera-170" title="Permanent link">#</a></h3>
<pre><code class="language-shell">sudo apt install -y python3-pip  python3-jinja2 libboost-dev libgnutls28-dev openssl pybind11-dev qtbase5-dev libqt5core5a meson cmake python3-yaml python3-ply libglib2.0-dev libgstreamer-plugins-base1.0-dev libgstreamer1.0-dev libavdevice59
</code></pre>
<pre><code class="language-shell">sudo apt-get install --reinstall libtiff5-dev &amp;&amp; sudo ln -sf $(find /usr/lib -name &quot;libtiff.so&quot; | head -n 1) /usr/lib/aarch64-linux-gnu/libtiff.so.5 &amp;&amp; export LD_LIBRARY_PATH=/usr/lib/aarch64-linux-gnu:$LD_LIBRARY_PATH &amp;&amp; sudo ldconfig
</code></pre>
<pre><code class="language-shell">git clone https://github.com/raspberrypi/libcamera.git &amp;&amp; \
sudo find ~/libcamera -type f \( -name '*.py' -o -name '*.sh' \) -exec chmod +x {} \; &amp;&amp; \
cd libcamera &amp;&amp; \
sudo meson setup build --buildtype=release \
  -Dpipelines=rpi/vc4,rpi/pisp \
  -Dipas=rpi/vc4,rpi/pisp \
  -Dv4l2=true \
  -Dgstreamer=enabled \
  -Dtest=false \
  -Dlc-compliance=disabled \
  -Dcam=disabled \
  -Dqcam=disabled \
  -Ddocumentation=disabled \
  -Dpycamera=enabled &amp;&amp; \
sudo ninja -C build install
</code></pre>
<pre><code class="language-shell">cd ~/libcamera/utils &amp;&amp; sudo chmod +x *.py *.sh &amp;&amp; sudo chmod +x ~/libcamera/src/ipa/ipa-sign.sh &amp;&amp; cd ~/libcamera &amp;&amp; sudo ninja -C build install
</code></pre>
<h3 id="cpp-mjpeg-streamer">cpp-mjpeg-streamer<a class="headerlink" href="#cpp-mjpeg-streamer" title="Permanent link">#</a></h3>
<pre><code class="language-bash">sudo apt install -y libspdlog-dev libjsoncpp-dev &amp;&amp; cd /home/pi &amp;&amp; git clone https://github.com/nadjieb/cpp-mjpeg-streamer.git &amp;&amp; cd cpp-mjpeg-streamer &amp;&amp; mkdir build &amp;&amp; cd build &amp;&amp; cmake .. &amp;&amp; make &amp;&amp; sudo make install &amp;&amp; cd
</code></pre>
<h3 id="cinepi-raw">CinePi-RAW <img src="https://img.shields.io/badge/cinemate-fork-gren" height="12" ><a class="headerlink" href="#cinepi-raw" title="Permanent link">#</a></h3>
<pre><code class="language-bash">git clone https://github.com/Tiramisioux/cinepi-raw.git --branch rpicam-apps_1.7_custom_encoder
cd cinepi-raw
sudo rm -rf build
sudo meson setup build
sudo ninja -C build
sudo meson install -C build
cd
sudo ldconfig
</code></pre>
<h3 id="seed-redis-with-white-balance-default-keys">Seed Redis with white balance default keys<a class="headerlink" href="#seed-redis-with-white-balance-default-keys" title="Permanent link">#</a></h3>
<pre><code>redis-cli &lt;&lt;EOF
SET cg_rb 2.5,2.2
PUBLISH cp_controls cg_rb
EOF
</code></pre>
<h3 id="imx585-driver-optional">IMX585 driver (optional)<a class="headerlink" href="#imx585-driver-optional" title="Permanent link">#</a></h3>
<pre><code class="language-shell">sudo apt install linux-headers dkms -y
</code></pre>
<pre><code>git clone https://github.com/will127534/imx585-v4l2-driver.git --branch 6.12.y
cd imx585-v4l2-driver/
./setup.sh
cd

</code></pre>
<blockquote>
<p>The imx585 is written by Will Whang. For original drivers and startup guides, visit https://github.com/will127534/StarlightEye</p>
</blockquote>
<h4 id="add-imx585-tuning-files">Add IMX585 tuning files<a class="headerlink" href="#add-imx585-tuning-files" title="Permanent link">#</a></h4>
<pre><code class="language-bash">curl -L -o /home/pi/libcamera/src/ipa/rpi/pisp/data/imx585.json \
  https://raw.githubusercontent.com/will127534/libcamera/master/src/ipa/rpi/pisp/data/imx585.json
sed -i '8s/&quot;black_level&quot;: *[0-9]\+/&quot;black_level&quot;: 0/' /home/pi/libcamera/src/ipa/rpi/pisp/data/imx585.json
sudo cp /home/pi/libcamera/src/ipa/rpi/pisp/data/imx585.json /usr/local/share/libcamera/ipa/rpi/pisp/
</code></pre>
<pre><code>curl -L -o /home/pi/libcamera/src/ipa/rpi/pisp/data/imx585_mono.json https://raw.githubusercontent.com/will127534/libcamera/master/src/ipa/rpi/pisp/data/imx585_mono.json &amp;&amp; sudo cp /home/pi/libcamera/src/ipa/rpi/pisp/data/imx585_mono.json /usr/local/share/libcamera/ipa/rpi/pisp/
</code></pre>
<h4 id="ir-filter-switch-script">IR filter switch script<a class="headerlink" href="#ir-filter-switch-script" title="Permanent link">#</a></h4>
<pre><code class="language-bash">sudo wget https://raw.githubusercontent.com/will127534/StarlightEye/master/software/IRFilter -O /usr/local/bin/IRFilter
sudo chmod +x /usr/local/bin/IRFilter
</code></pre>
<blockquote>
<p>Cinemate has its own way of handling the IR switch but the installation above can be convenient for use outside of Cinemate</p>
</blockquote>
<h3 id="enabling-i2c">Enabling I²C<a class="headerlink" href="#enabling-i2c" title="Permanent link">#</a></h3>
<pre><code class="language-bash">sudo raspi-config nonint do_i2c 0
</code></pre>
<blockquote>
<p>Enabling I2C is needed for using the camera modules.</p>
</blockquote>
<h3 id="setting-hostname">Setting hostname<a class="headerlink" href="#setting-hostname" title="Permanent link">#</a></h3>
<pre><code class="language-bash">sudo hostnamectl set-hostname cinepi
</code></pre>
<blockquote>
<p>You will find the pi as <code>cinepi.local</code> on the local network, or at the hotspot Cinemate creates</p>
</blockquote>
<h3 id="add-camera-modules-to-configtxt">Add camera modules to config.txt<a class="headerlink" href="#add-camera-modules-to-configtxt" title="Permanent link">#</a></h3>
<pre><code class="language-shell">sudo nano /boot/firmware/config.txt
</code></pre>
<p>Paste this into your file, and uncomment the sensor you are using.</p>
<p>Also specify which physical camera port you have connected your sensor to (example shows imx477 activated)</p>
<pre><code class="language-bash"># Raspberry Pi HQ camera
camera_auto_detect=1
dtoverlay=imx477,cam0

# Raspberry Pi GS camera
#camera_auto_detect=1
#dtoverlay=imx296,cam0

# OneInchEye
#camera_auto_detect=0
#dtoverlay=imx283,cam0

# StarlightEye
#camera_auto_detect=0
#dtoverlay=imx585,cam0

# StarlightEye Mono
#camera_auto_detect=0
#dtoverlay=imx585,cam1,mono

# CFE Hat (pi 5 only)
dtparam=pciex1
dtparam=pciex1_gen=3

dtoverlay=disable-bt
</code></pre>
<p>And at the very bottom of the file:</p>
<pre><code class="language-bash">[all]
avoid_warnings=1
disable_splash=1
</code></pre>
<p>Exit with Ctrl+x. System will ask you to save the file. Press "y" and then enter.</p>
<h3 id="change-the-console-font-optional">Change the console font (optional)<a class="headerlink" href="#change-the-console-font-optional" title="Permanent link">#</a></h3>
<pre><code class="language-bash">sudo apt install console-setup kbd
sudo dpkg-reconfigure console-setup  

# choose: UTF-8
#         Guess optimal character set
#         Terminus
#         16x32 (framebuffer only)
</code></pre>
<p>Enable the service:</p>
<pre><code class="language-bash">sudo systemctl enable console-setup.service
sudo systemctl start console-setup.service
</code></pre>
<blockquote>
<p>This can be useful if running the Pi on a small HD field monitor</p>
</blockquote>
<h3 id="create-post-processing-configs">Create post-processing configs<a class="headerlink" href="#create-post-processing-configs" title="Permanent link">#</a></h3>
<p>Paste this into the terminal and hit enter:</p>
<pre><code class="language-shell">sudo bash -c 'cat &gt; post-processing.json &lt;&lt; EOF
{
    &quot;sharedContext&quot;: {},
    &quot;mjpegPreview&quot;: {
        &quot;port&quot;: 8000
    }
}
EOF' &amp;&amp; \
sudo chmod +x post-processing.json &amp;&amp; \
sudo bash -c 'cat &gt; post-processing0.json &lt;&lt; EOF
{
    &quot;sharedContext&quot;: {},
    &quot;mjpegPreview&quot;: {
        &quot;port&quot;: 8000
    }
}
EOF' &amp;&amp; \
sudo chmod +x post-processing0.json &amp;&amp; \
sudo bash -c 'cat &gt; post-processing1.json &lt;&lt; EOF
{
    &quot;sharedContext&quot;: {},
    &quot;mjpegPreview&quot;: {
        &quot;port&quot;: 8001
    }
}
EOF' &amp;&amp; \
sudo chmod +x post-processing1.json
</code></pre>
<h3 id="install-pishrink">Install PiShrink<a class="headerlink" href="#install-pishrink" title="Permanent link">#</a></h3>
<pre><code class="language-bash">sudo wget https://raw.githubusercontent.com/Drewsif/PiShrink/master/pishrink.sh -O /usr/local/bin/pishrink.sh
sudo chmod +x /usr/local/bin/pishrink.sh
</code></pre>
<blockquote>
<p>PiShrink is a handy tool for compressing SD image file backups of the SD card. See here for instructions</p>
</blockquote>
<h3 id="reboot">Reboot<a class="headerlink" href="#reboot" title="Permanent link">#</a></h3>
<pre><code class="language-bash">sudo reboot
</code></pre>
<h3 id="trying-out-cinepi-from-the-terminal">Trying out CinePi from the terminal<a class="headerlink" href="#trying-out-cinepi-from-the-terminal" title="Permanent link">#</a></h3>
<p>You should now have a working install of cinepi-raw. To see if your camera is recognized by the system:</p>
<pre><code class="language-shell">cinepi-raw --list-cameras
</code></pre>
<p>Try it out with a simple cli command:</p>
<pre><code class="language-shell">cinepi-raw --mode 2028:1080:12:U --width 2028 --height 1080 --lores-width 1280 --lores-height 720
</code></pre>
<p>For more details on running CinePi-raw from the command line, see <a href="/cli-user-guide.md">this section</a>. </p>
<h2 id="cinemate">Cinemate<a class="headerlink" href="#cinemate" title="Permanent link">#</a></h2>
<h3 id="system-wide-packages">System wide packages<a class="headerlink" href="#system-wide-packages" title="Permanent link">#</a></h3>
<pre><code class="language-shell">sudo apt update
sudo apt install -y \
    git build-essential python3-dev python3-pip python3-venv \
    i2c-tools python3-smbus python3-pyudev \
    libgpiod-dev libgpiod2 python3-libgpiod gpiod \
    portaudio19-dev python3-systemd \
    e2fsprogs ntfs-3g exfatprogs \
    console-terminus
</code></pre>
<h3 id="create-a-python-virtual-environment">Create a Python virtual environment<a class="headerlink" href="#create-a-python-virtual-environment" title="Permanent link">#</a></h3>
<pre><code class="language-bash">python3 -m venv ~/.cinemate-env
source /home/pi/.cinemate-env/bin/activate
echo &quot;source /home/pi/.cinemate-env/bin/activate&quot; &gt;&gt; ~/.bashrc
</code></pre>
<h3 id="grant-sudo-privileges-and-enable-i2c">Grant sudo privileges and enable I²C<a class="headerlink" href="#grant-sudo-privileges-and-enable-i2c" title="Permanent link">#</a></h3>
<pre><code class="language-bash">echo &quot;pi ALL=(ALL) NOPASSWD: /home/pi/.cinemate-env/bin/*&quot; | sudo tee /etc/sudoers.d/cinemate-env
sudo chown -R pi:pi /home/pi/.cinemate-env
sudo chown -R pi:pi /media &amp;&amp; chmod 755 /media
sudo usermod -aG i2c pi
sudo modprobe i2c-dev &amp;&amp; echo i2c-dev | sudo tee -a /etc/modules
echo &quot;pi ALL=(ALL) NOPASSWD: /home/pi/run_cinemate.sh&quot; | sudo tee -a /etc/sudoers.d/pi_cinemate
</code></pre>
<p>Reboot so the group changes take effect:</p>
<pre><code class="language-bash">sudo reboot
</code></pre>
<h3 id="python-packages">Python packages<a class="headerlink" href="#python-packages" title="Permanent link">#</a></h3>
<blockquote>
<p>If you previously installed the <code>board</code> Python package, remove it with <code>pip3 uninstall board</code>.</p>
</blockquote>
<pre><code class="language-bash">pip install \
    gpiozero \
    adafruit-blinka adafruit-circuitpython-ssd1306 adafruit-circuitpython-seesaw \
    luma.oled grove.py pigpio-encoder smbus2 rpi_hardware_pwm \
    watchdog psutil pillow redis keyboard pyudev numpy termcolor sounddevice \
    evdev inotify_simple sysv_ipc flask_socketio sugarpie
</code></pre>
<h3 id="alternative-gpio-back-end">Alternative GPIO back-end<a class="headerlink" href="#alternative-gpio-back-end" title="Permanent link">#</a></h3>
<pre><code class="language-bash">sudo apt install -y swig python3-dev build-essential git
git clone https://github.com/joan2937/lg
cd lg &amp;&amp; make
sudo make install
cd .. &amp;&amp; pip install lgpio
</code></pre>
<h3 id="clone-the-cinemate-repo">Clone the Cinemate repo<a class="headerlink" href="#clone-the-cinemate-repo" title="Permanent link">#</a></h3>
<pre><code class="language-bash">  git clone https://github.com/Tiramisioux/cinemate.git
</code></pre>
<h3 id="allow-cinemate-to-run-with-sudo">Allow Cinemate to run with sudo<a class="headerlink" href="#allow-cinemate-to-run-with-sudo" title="Permanent link">#</a></h3>
<p>Edit the sudoers file:</p>
<pre><code class="language-shell">sudo visudo
</code></pre>
<p>add this to the end of the file:</p>
<pre><code class="language-text">pi ALL=(ALL) NOPASSWD: /home/pi/cinemate/src/main.py
pi ALL=(ALL) NOPASSWD: /bin/mount, /bin/umount, /usr/bin/ntfs-3g
pi ALL=(ALL) NOPASSWD: /home/pi/cinemate/src/logs/system.log
pi ALL=(ALL) NOPASSWD: /sbin/mount.ext4
</code></pre>
<p>Exit with Ctrl+x. System will ask you to save the file. Press "y" and then enter.</p>
<h3 id="enable-networkmanager">Enable NetworkManager<a class="headerlink" href="#enable-networkmanager" title="Permanent link">#</a></h3>
<pre><code class="language-bash">sudo systemctl enable NetworkManager --now
</code></pre>
<h3 id="rotate-logs">Rotate logs<a class="headerlink" href="#rotate-logs" title="Permanent link">#</a></h3>
<p>Paste this into the terminal and hit enter:</p>
<pre><code class="language-bash">sudo tee /etc/logrotate.d/general_logs &lt;&lt;'EOP'
/var/log/*.log {
   size 100M
   rotate 5
   compress
   missingok
   notifempty
}
EOP
</code></pre>
<h3 id="seed-redis-with-default-keys">Seed Redis with default keys<a class="headerlink" href="#seed-redis-with-default-keys" title="Permanent link">#</a></h3>
<pre><code class="language-shell">redis-cli MSET \
anamorphic_factor 0 bit_depth 0 buffer 0 buffer_size 0 cam_init 0 cameras 0 cg_rb 3.5,1.5 \
file_size 0 fps 24 fps_actual 24 fps_last 24 fps_max 1 fps_user 24 framecount 0 \
gui_layout 0 height 0 ir_filter 0 is_buffering 0 is_mounted 0 is_recording 0 \
is_writing 0 is_writing_buf 0 tc_cam0 0 tc_cam1 0 iso 100 lores_height 0 lores_width 0 \
pi_model 0 rec 0 sensor 0 sensor_mode 0 shutter_a 0 space_left 0 storage_type 0 \
wb 5600 wb_user 5600 width 0 memory_alert 0 \
shutter_a_sync_mode 0 shutter_angle_nom 0 shutter_angle_actual 0 shutter_angle_transient 0 \
exposure_time 0 last_dng_cam1 0 last_dng_cam0 0 \
zoom 0 write_speed_to_drive 0 recording_time 0
</code></pre>
<p>(See the settings guide for the full list.)</p>
<h3 id="add-alias">Add alias<a class="headerlink" href="#add-alias" title="Permanent link">#</a></h3>
<pre><code class="language-shell">nano ~/.bashrc
</code></pre>
<p>Add to the end of the file:</p>
<pre><code class="language-shell">alias cinemate='python3 /home/pi/cinemate/src/main.py'
</code></pre>
<p>Exit with Ctrl+x. System will ask you to save the file. Press "y" and then enter.</p>
<p>Reload .bashrc</p>
<pre><code class="language-shell">source ~/.bashrc
</code></pre>
<h2 id="cinemate-services">Cinemate services<a class="headerlink" href="#cinemate-services" title="Permanent link">#</a></h2>
<h4 id="storage-automount">storage-automount<a class="headerlink" href="#storage-automount" title="Permanent link">#</a></h4>
<p>Mounts and unmounts removable drives such as SSDs, NVMe enclosures and the CFE HAT. </p>
<h4 id="wifi-hotspot">wifi-hotspot<a class="headerlink" href="#wifi-hotspot" title="Permanent link">#</a></h4>
<p>Keeps a simple Wi‑Fi hotspot running via NetworkManager so you can reach the web UI while in the field. The SSID and password come from the <code>system.wifi_hotspot</code> section of <code>settings.json</code>.</p>
<p>Install and enable both services with:</p>
<pre><code class="language-bash">cd /home/pi/cinemate/services
</code></pre>
<pre><code>sudo make install
sudo make start  # starts the service
sudo make enable # makes the service start on boot
</code></pre>
<p>You can also start and enable the service individually, by entering their respective folders and issuing the <code>sudo make</code> command</p>
<p>Note that if you were connected to the Pi via wifi, this connection is now broken due to the Pi setting up its own hotspot.</p>
<p>To connect again, check your available wifi networks. There should now be a network available named CinePi. Connect to it using password <code>11111111</code></p>
<p>Now you shuld be able to ssh to the Pi this command:</p>
<pre><code class="language-shell">ssh pi@cinepi.local
</code></pre>
<p>You should also be able to find the Pi by opening a terminal and typing:</p>
<pre><code class="language-shell">arp -a
</code></pre>
<p>You will see something like</p>
<pre><code class="language-shell">❯ arp -a

? (10.42.0.1) at e4:5f:1:a9:72:a7 on en0 ifscope [ethernet]
</code></pre>
<p>During development/building your rig you might prefer the Pi to use your normal Wi‑Fi instead of its own hotspot so you remain online while tinkering. Disable the hotspot by setting <code>system.wifi_hotspot.enabled</code> to <code>false</code> in <code>settings.json</code> <em>and</em> by stopping the service with: </p>
<pre><code>sudo systemctl stop wifi-hotspot
</code></pre>
<p>To stop the hotspot from starting on boot, type </p>
<pre><code>sudo systemctl disable wifi-hotspot
</code></pre>
<p>See <a href="../hotspot-logic/">Hotspot logic</a> for more details on how the hotspot works.</p>
<h3 id="connect-to-the-pi-if-not-already-connected">Connect to the Pi (if not already connected):<a class="headerlink" href="#connect-to-the-pi-if-not-already-connected" title="Permanent link">#</a></h3>
<pre><code class="language-shell">ssh pi@10.42.0.1
</code></pre>
<p>password: 1</p>
<h3 id="starting-cinemate">Starting Cinemate<a class="headerlink" href="#starting-cinemate" title="Permanent link">#</a></h3>
<p>Now, back on the Pi, anywhere in the terminal, type:</p>
<pre><code class="language-shell">cinemate
</code></pre>
<p>Make sure things are running smoothly and then you can move on to enabling the cinemate-autostart service:</p>
<h4 id="cinemate-autostartservice">cinemate-autostart.service<a class="headerlink" href="#cinemate-autostartservice" title="Permanent link">#</a></h4>
<pre><code class="language-shell">cd /home/pi/cinemate/
</code></pre>
<pre><code>sudo make install   # copy service file
sudo make enable    # start on boot
make start          # launch now
</code></pre>
<p>After enabling the service, Cinemate should autostart on boot.</p>
<p>You now have a 12 bit RAW image capturing system on your Raspberry Pi!</p>
</div>

            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../brick/" class="btn btn-neutral float-left" title="Box build"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../todo/" class="btn btn-neutral float-right" title="Todo">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/tiramisioux/cinemate" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../brick/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../todo/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="https://unpkg.com/highlightjs-copy@1/dist/highlightjs-copy.min.js"></script>
      <script src="../js/ko-fi-widget.js"></script>
      <script src="../js/copybutton-init.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
