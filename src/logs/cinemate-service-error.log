43.662: INFO: main               Detected Raspberry Pi model: pi5
44.108: INFO: wifi_hotspot       Wi-Fi hotspot 'CinePi' created successfully with password '11111111' on interface 'wlan0'.
44.136: INFO: redis_controller   Initializing cache with Redis values...
44.139: INFO: PWMcontroller      Initializing PWM on pin 19 (channel 3) with frequency 24Hz and chip 2
44.142: INFO: PWMcontroller      PWM successfully initialized on pin 19 (channel 3) with frequency 24Hz
44.143: INFO: PWMcontroller      Updating PWM with cycles=1
44.166: INFO: PWMcontroller      PWM duty cycle set to 49.999237048905165% on pins 19, None
44.167: INFO: ssd_monitor        SSD monitoring thread started.
44.170: INFO: ssd_monitor        RAW drive mounted at /media/RAW
44.171: INFO: ssd_monitor        Updated space left on SSD: 104.05 GB
44.212: INFO: gpio_output        REC light instantiated on pin 6
44.212: INFO: gpio_output        REC light instantiated on pin 21
44.216: INFO: redis_controller   Changed value: pi_model = pi5
48.310: INFO: sensor_detect      cinepi-raw output: Available cameras
-----------------
0 : imx585 [3840x2160 MONO] (/base/axi/pcie@120000/rp1/i2c@80000/imx585@1A)
    Modes: 'R12_CSI2P' : 1928x1090 [90.17 fps - (0, 0)/3840x2160 crop]
                         3856x2180 [60.00 fps - (0, 0)/3840x2160 crop]
           'R16' : 1928x1090 [30.00 fps - (0, 0)/3840x2160 crop]
                   3856x2180 [30.00 fps - (0, 0)/3840x2160 crop]


48.310: INFO: sensor_detect      Detected camera model: imx585_mono
48.311: INFO: redis_controller   Changed value: anamorphic_factor = 1
48.311: INFO: cinepi_app         Corrected Preview Window -> x=94, y=50, width=1732, height=979, aspect_ratio=1.77
48.312: INFO: redis_controller   Changed value: lores_width = 1273
48.312: INFO: cinepi_app         redis width: 1928
48.312: INFO: redis_controller   Changed value: lores_height = 720
48.312: INFO: cinepi_app         redis height: 1090
48.312: INFO: cinepi_app         CinePi instantiated
48.312: INFO: cinepi_app         Log level set to INFO
48.313: INFO: redis_controller   Changed value: framecount = 0
48.314: INFO: redis_controller   Changed value: rec = 0
48.315: INFO: cinepi_controller  Settings loaded successfully.
48.316: INFO: redis_controller   Changed value: sensor = imx585_mono
48.316: INFO: cinepi_controller  Initialized fps_steps: [1, 2, 4, 8, 12, 16, 18, 24, 25, 33, 40, 50]
48.316: INFO: cinepi_controller  Initialized shutter_a_steps: [1, 45, 90, 135, 172.8, 180, 225, 270, 315, 346.6, 360]
48.317: INFO: cinepi_controller  Loading tuning file from: /home/pi/cinemate/resources/tuning_files/imx585_mono.json
48.317: INFO: redis_controller   Changed value: fps_max = 50
48.317: INFO: redis_controller   Changed value: fps_max = 50
48.321: INFO: cinepi_controller  Tuning data loaded successfully.
48.321: WARNING: cinepi_controller  'rpi.awb' algorithm data not found, using default ct_curve.
48.321: INFO: cinepi_controller  Parsed temperatures: [2000.0, 2200.0, 2400.0, 2600.0, 2800.0, 3000.0, 3200.0, 3400.0, 3600.0, 4100.0, 4600.0, 5100.0, 5600.0, 6100.0, 6600.0, 7100.0, 7600.0, 8100.0, 8600.0]
48.321: INFO: cinepi_controller  Parsed r_values: [0.6331025775790707, 0.5696117366212947, 0.5204264653110015, 0.48148675531667223, 0.450085403501908, 0.42436130159169017, 0.40300023695527337, 0.3850520052612984, 0.36981508088230314, 0.333468007836758, 0.31196097364221376, 0.2961860409294588, 0.2842607232745885, 0.2750265787051251, 0.2677057225584924, 0.2617955199757274, 0.25693714288250125, 0.25287531441063316, 0.24946601483331993]
48.321: INFO: cinepi_controller  Parsed b_values: [0.27424225990946915, 0.3116091368689487, 0.34892179554105873, 0.38565229719076793, 0.42145684622485047, 0.45611835670028816, 0.48950766215198593, 0.5215567075837261, 0.5522397906415475, 0.5909770465167908, 0.6515706327327178, 0.7068178946570284, 0.7564837749584288, 0.8006183524920533, 0.8398879225373039, 0.8746456080032436, 0.905569559506562, 0.9331696750390895, 0.9576820904825795]
48.321: INFO: cinepi_controller  Interpolating for wb step: 3200K, lower index: 6, upper index: 6
48.321: INFO: cinepi_controller  Exact match found at index 6, r_interp: 0.40300023695527337, b_interp: 0.48950766215198593
48.321: INFO: cinepi_controller  Calculated reciprocal cg_rb for 3200K: (2.5, 2.0)
48.321: INFO: cinepi_controller  Interpolating for wb step: 4400K, lower index: 9, upper index: 10
48.321: INFO: cinepi_controller  Interpolated values for 4400K - r_interp: 0.32056378732003143, b_interp: 0.627333198246347
48.321: INFO: cinepi_controller  Calculated reciprocal cg_rb for 4400K: (3.1, 1.6)
48.321: INFO: cinepi_controller  Interpolating for wb step: 5600K, lower index: 12, upper index: 12
48.321: INFO: cinepi_controller  Exact match found at index 12, r_interp: 0.2842607232745885, b_interp: 0.7564837749584288
48.322: INFO: cinepi_controller  Calculated reciprocal cg_rb for 5600K: (3.5, 1.3)
48.322: INFO: cinepi_controller  Initialized wb_cg_rb_array: {3200: (2.5, 2.0), 4400: (3.1, 1.6), 5600: (3.5, 1.3)}
48.322: INFO: cinepi_controller  Settings loaded successfully.
48.322: INFO: cinepi_controller  Received set_fps call with value: 24.0
48.322: INFO: cinepi_controller  Retrieved max_fps from Redis: 50
48.322: INFO: cinepi_controller  Calculated safe_value: 24.0
48.323: INFO: cinepi_controller  Setting fps to 24.0
48.323: INFO: redis_controller   Changed value: fps = 24.0
48.323: INFO: cinepi_controller  [1, 45, 90, 135, 172.8, 180, 225, 270, 315, 346.6, 360]
48.323: INFO: cinepi_controller  Initialized fps: 24
48.324: INFO: redis_controller   Changed value: fps_last = 24.0
48.324: INFO: redis_controller   Changed value: fps_last = 24.0
48.325: INFO: redis_controller   Changed value: sensor_mode = 0
48.326: INFO: redis_controller   Changed value: height = 1090
48.326: INFO: redis_controller   Changed value: width = 1928
48.327: INFO: cinepi_controller  Resolution set to mode 0, height: 1090, width: 1928, gui_layout: 0
48.327: INFO: redis_controller   Changed value: bit_depth = 12
48.327: INFO: redis_controller   Changed value: fps_max = 50
48.327: INFO: redis_controller   Changed value: gui_layout = 0
48.328: INFO: redis_controller   Changed value: file_size = 3.1
48.328: INFO: redis_controller   Changed value: cam_init = 1
48.827: INFO: cinepi_app         Restarting CinePi instance.
48.828: INFO: redis_controller   Changed value: fps_last = 24.0
49.083: INFO: sensor_detect      cinepi-raw output: Available cameras
-----------------
0 : imx585 [3840x2160 MONO] (/base/axi/pcie@120000/rp1/i2c@80000/imx585@1A)
    Modes: 'R12_CSI2P' : 1928x1090 [90.17 fps - (0, 0)/3840x2160 crop]
                         3856x2180 [60.00 fps - (0, 0)/3840x2160 crop]
           'R16' : 1928x1090 [30.00 fps - (0, 0)/3840x2160 crop]
                   3856x2180 [30.00 fps - (0, 0)/3840x2160 crop]


49.083: INFO: sensor_detect      Detected camera model: imx585_mono
49.084: INFO: cinepi_app         Corrected Preview Window -> x=94, y=50, width=1732, height=979, aspect_ratio=1.77
49.084: INFO: cinepi_app         Issuing ['cinepi-raw', '--mode', '1928:1090:12:U', '--width', '1928', '--height', '1090', '--lores-width', '1273', '--lores-height', '720', '-p', '94,50,1732,979', '--post-process-file', '/home/pi/post-processing.json', '--shutter', '20000', '--awbgains', '3.1,1.6', '--awb', 'auto']
49.085: INFO: redis_controller   Changed value: anamorphic_factor = 1
49.086: INFO: redis_controller   Changed value: lores_width = 1273
49.086: INFO: redis_controller   Changed value: lores_height = 720
49.087: INFO: cinepi_controller  Received set_fps call with value: 24.0
49.087: INFO: redis_controller   Changed value: sensor = imx585_mono
49.088: INFO: cinepi_controller  Retrieved max_fps from Redis: 50
49.088: INFO: cinepi_controller  Calculated safe_value: 24.0
49.089: INFO: cinepi_controller  Setting fps to 24.0
49.089: INFO: redis_controller   Changed value: fps = 24.0
49.089: INFO: cinepi_controller  [1, 45, 90, 135, 172.8, 180, 225, 270, 315, 346.6, 360]
49.090: INFO: cinepi_controller  Initialized fps_steps: [1, 2, 4, 8, 12, 16, 18, 24, 25, 33, 40, 50]
49.090: INFO: cinepi_controller  [1, 45, 90, 135, 172.8, 180, 225, 270, 315, 346.6, 360]
49.091: INFO: redis_controller   Changed value: fps_last = 24.0
49.091: INFO: redis_controller   Changed value: fps_max = 50
49.092: INFO: redis_controller   Changed value: sensor = imx585_mono
49.511: INFO: redis_listener     Framecount is changing
49.512: INFO: redis_controller   Changed value: rec = 1
50.092: INFO: gpio_input         Button on pin 5:
50.093: INFO: gpio_input           Press: rec
50.093: INFO: redis_controller   Changed value: fps = 24.0
50.122: INFO: gpio_input         Button on pin 13:
50.122: INFO: gpio_input           Press: inc_iso
50.123: INFO: gpio_input         Button on pin 10:
50.123: INFO: gpio_input           Press: dec_iso
50.124: INFO: gpio_input         Button on pin 16:
50.124: INFO: gpio_input           Press: set_fps_double
50.125: INFO: gpio_input         Button on pin 26:
50.125: INFO: gpio_input           Single Click: set_resolution
50.125: INFO: gpio_input           Double Click: restart_camera
50.125: INFO: gpio_input           Triple Click: reboot
50.125: INFO: gpio_input           Hold: unmount
50.126: INFO: gpio_input         Two-way switch on pin 27:
50.126: INFO: gpio_input           State ON action: set_all_lock
50.126: INFO: gpio_input           State OFF action: set_all_lock
50.626: INFO: gpio_input         Detected initial state: on for switch on pin 27
50.627: INFO: cinepi_controller  ISO lock False
50.627: INFO: cinepi_controller  Shutter angle lock False
50.627: INFO: cinepi_controller  FPS lock False
50.627: INFO: gpio_input         Executed action set_all_lock(0)
50.627: INFO: gpio_input         Initialized SimpleSwitch on pin 27 (pull_up=True, debounce=0.1s)
50.627: INFO: gpio_input         Two-way switch on pin 22:
50.627: INFO: gpio_input           State ON action: set_shutter_a_sync_mode
50.627: INFO: gpio_input           State OFF action: set_shutter_a_sync_mode
50.706: INFO: redis_listener     Drop frame detected
51.128: INFO: gpio_input         Detected initial state: on for switch on pin 22
51.128: INFO: cinepi_controller  Shutter Sync Mode deactivated
51.128: INFO: cinepi_controller  Shutter sync disabled
51.128: INFO: gpio_input         Executed action set_shutter_a_sync_mode(0)
51.129: INFO: gpio_input         Initialized SimpleSwitch on pin 22 (pull_up=True, debounce=0.1s)
51.129: INFO: gpio_input         Rotary Encoder with Button on CLK pin: 9, DT pin: 11
51.129: INFO: gpio_input           Rotate Clockwise: inc_iso
51.129: INFO: gpio_input           Rotate CounterClockwise: dec_iso
51.130: INFO: gpio_input         Rotary Encoder with Button on CLK pin: 23, DT pin: 25
51.130: INFO: gpio_input           Rotate Clockwise: inc_shutter_a_nom
51.130: INFO: gpio_input           Rotate CounterClockwise: dec_shutter_a_nom
51.131: INFO: gpio_input         Rotary Encoder with Button on CLK pin: 8, DT pin: 7
51.131: INFO: gpio_input           Rotate Clockwise: inc_fps
51.131: INFO: gpio_input           Rotate CounterClockwise: dec_fps
51.132: INFO: gpio_input         Rotary Encoder with Button on CLK pin: 12, DT pin: 20
51.133: INFO: gpio_input           Rotate Clockwise: inc_wb
51.133: INFO: gpio_input           Rotate CounterClockwise: dec_wb
51.145: WARNING: gpio_input         No I2C device found at address: 0x49. Quad Rotary Encoder not initialized.
51.148: INFO: redis_controller   Changed value: framecount = 0
51.149: INFO: redis_controller   Changed value: rec = 0
51.150: INFO: simple_gui         HDMI display found. (1920, 1080)
setterm: $TERM is not defined.
51.258: INFO: redis_listener     Drop frame flag reset
Exception in thread Thread-19:
Traceback (most recent call last):
  File "/usr/lib/python3.11/threading.py", line 1038, in _bootstrap_inner
51.263: INFO: redis_listener     Framecount is stable
51.264: INFO: redis_controller   Changed value: rec = 0
    self.run()
  File "/home/pi/cinemate/src/module/cli_commands.py", line 145, in run
    data = input("\n> ")  # Read the input as a single string
           ^^^^^^^^^^^^^
EOFError: EOF when reading a line
51.426: INFO: main               Stream module loaded
51.426: INFO: mediator           Mediator instantiated
51.431: INFO: usb_monitor        USB Microphone connected
51.433: INFO: analog_controls    Grove Base HAT found!
51.434: INFO: main               --- Initialization Complete ---
51.434: INFO: analog_controls    Setting ISO to 1200
51.436: INFO: cinepi_controller  Setting iso to 1200
51.436: INFO: redis_controller   Changed value: iso = 1200
51.437: INFO: analog_controls    Setting Shutter Angle to 180
51.438: INFO: cinepi_controller  Setting shutter_a_nom to 180
51.438: INFO: cinepi_controller  Setting shutter_a to 180 degrees
51.439: INFO: redis_controller   Changed value: shutter_a_nom = 180
51.439: INFO: redis_controller   Changed value: shutter_a = 180
51.439: INFO: PWMcontroller      Setting PWM with fps=None, shutter_angle=180
51.439: INFO: PWMcontroller      PWM duty cycle calculated and set to 32767
51.439: INFO: PWMcontroller      Updating PWM with cycles=1
51.439: INFO: analog_controls    Setting FPS to 24
51.439: INFO: cinepi_controller  Received set_fps call with value: 24.0
51.440: INFO: cinepi_controller  Retrieved max_fps from Redis: 50
51.440: INFO: cinepi_controller  Calculated safe_value: 24.0
51.440: INFO: cinepi_controller  Setting fps to 24.0
51.440: INFO: cinepi_controller  [1, 45, 90, 135, 172.8, 180, 225, 270, 315, 346.6, 360]
51.441: INFO: analog_controls    Setting White Balance to 4400K
51.442: INFO: cinepi_controller  Set white balance for 4400K: (3.1, 1.6)
51.458: INFO: PWMcontroller      PWM duty cycle set to 49.999237048905165% on pins 19, None
51.458: INFO: redis_controller   Changed value: fps = 24.0
51.458: INFO: PWMcontroller      Setting PWM with fps=24.0, shutter_angle=None
51.459: INFO: PWMcontroller      PWM frequency set to 24.0Hz on pins 19, None
51.459: INFO: PWMcontroller      Shutter angle is None, keeping existing duty cycle.
51.459: INFO: PWMcontroller      Updating PWM with cycles=1
51.500: INFO: PWMcontroller      PWM duty cycle set to 49.999237048905165% on pins 19, None
51.500: INFO: redis_controller   Changed value: fps_last = 24.0
51.501: INFO: redis_controller   Changed value: wb_user = 4400
51.501: INFO: redis_controller   Changed value: cg_rb = 3.1,1.6
51.501: INFO: redis_controller   Changed value: wb_user = 4400
08.168: INFO: main               Graceful shutdown initiated.
01.284: INFO: main               Detected Raspberry Pi model: pi5
01.796: INFO: wifi_hotspot       Wi-Fi hotspot 'CinePi' created successfully with password '11111111' on interface 'wlan0'.
01.823: INFO: redis_controller   Initializing cache with Redis values...
01.825: INFO: PWMcontroller      Initializing PWM on pin 19 (channel 3) with frequency 24Hz and chip 2
01.828: INFO: PWMcontroller      PWM successfully initialized on pin 19 (channel 3) with frequency 24Hz
01.829: INFO: PWMcontroller      Updating PWM with cycles=1
01.833: INFO: PWMcontroller      PWM duty cycle set to 49.999237048905165% on pins 19, None
01.848: INFO: ssd_monitor        SSD monitoring thread started.
01.857: INFO: ssd_monitor        RAW drive mounted at /media/RAW
01.857: INFO: ssd_monitor        Updated space left on SSD: 96.58 GB
01.876: INFO: gpio_output        REC light instantiated on pin 6
01.876: INFO: gpio_output        REC light instantiated on pin 21
01.880: INFO: redis_controller   Changed value: pi_model = pi5
06.053: INFO: sensor_detect      cinepi-raw output: Available cameras
-----------------
0 : imx585 [3840x2160 MONO] (/base/axi/pcie@120000/rp1/i2c@80000/imx585@1A)
    Modes: 'R12_CSI2P' : 1928x1090 [90.17 fps - (0, 0)/3840x2160 crop]
                         3856x2180 [60.00 fps - (0, 0)/3840x2160 crop]
           'R16' : 1928x1090 [30.00 fps - (0, 0)/3840x2160 crop]
                   3856x2180 [30.00 fps - (0, 0)/3840x2160 crop]


06.053: INFO: sensor_detect      Detected camera model: imx585_mono
06.054: INFO: cinepi_app         Corrected Preview Window -> x=94, y=50, width=1732, height=979, aspect_ratio=1.77
06.054: INFO: redis_controller   Changed value: anamorphic_factor = 1
06.054: INFO: cinepi_app         redis width: 1928
06.055: INFO: redis_controller   Changed value: lores_width = 1273
06.055: INFO: cinepi_app         redis height: 1090
06.055: INFO: cinepi_app         CinePi instantiated
06.055: INFO: redis_controller   Changed value: lores_height = 720
06.055: INFO: cinepi_app         Log level set to INFO
06.056: INFO: redis_controller   Changed value: framecount = 0
06.056: INFO: redis_controller   Changed value: rec = 0
06.058: INFO: cinepi_controller  Settings loaded successfully.
06.058: INFO: redis_controller   Changed value: sensor = imx585_mono
06.058: INFO: cinepi_controller  Initialized fps_steps: [1, 2, 4, 8, 12, 16, 18, 24, 25, 33, 40, 50]
06.058: INFO: cinepi_controller  Initialized shutter_a_steps: [1, 45, 90, 135, 172.8, 180, 225, 270, 315, 346.6, 360]
06.058: INFO: cinepi_controller  Loading tuning file from: /home/pi/cinemate/resources/tuning_files/imx585_mono.json
06.059: INFO: redis_controller   Changed value: fps_max = 50
06.059: INFO: redis_controller   Changed value: fps_max = 50
06.062: INFO: cinepi_controller  Tuning data loaded successfully.
06.063: WARNING: cinepi_controller  'rpi.awb' algorithm data not found, using default ct_curve.
06.063: INFO: cinepi_controller  Parsed temperatures: [2000.0, 2200.0, 2400.0, 2600.0, 2800.0, 3000.0, 3200.0, 3400.0, 3600.0, 4100.0, 4600.0, 5100.0, 5600.0, 6100.0, 6600.0, 7100.0, 7600.0, 8100.0, 8600.0]
06.063: INFO: cinepi_controller  Parsed r_values: [0.6331025775790707, 0.5696117366212947, 0.5204264653110015, 0.48148675531667223, 0.450085403501908, 0.42436130159169017, 0.40300023695527337, 0.3850520052612984, 0.36981508088230314, 0.333468007836758, 0.31196097364221376, 0.2961860409294588, 0.2842607232745885, 0.2750265787051251, 0.2677057225584924, 0.2617955199757274, 0.25693714288250125, 0.25287531441063316, 0.24946601483331993]
06.063: INFO: cinepi_controller  Parsed b_values: [0.27424225990946915, 0.3116091368689487, 0.34892179554105873, 0.38565229719076793, 0.42145684622485047, 0.45611835670028816, 0.48950766215198593, 0.5215567075837261, 0.5522397906415475, 0.5909770465167908, 0.6515706327327178, 0.7068178946570284, 0.7564837749584288, 0.8006183524920533, 0.8398879225373039, 0.8746456080032436, 0.905569559506562, 0.9331696750390895, 0.9576820904825795]
06.063: INFO: cinepi_controller  Interpolating for wb step: 3200K, lower index: 6, upper index: 6
06.063: INFO: cinepi_controller  Exact match found at index 6, r_interp: 0.40300023695527337, b_interp: 0.48950766215198593
06.063: INFO: cinepi_controller  Calculated reciprocal cg_rb for 3200K: (2.5, 2.0)
06.063: INFO: cinepi_controller  Interpolating for wb step: 4400K, lower index: 9, upper index: 10
06.063: INFO: cinepi_controller  Interpolated values for 4400K - r_interp: 0.32056378732003143, b_interp: 0.627333198246347
06.063: INFO: cinepi_controller  Calculated reciprocal cg_rb for 4400K: (3.1, 1.6)
06.063: INFO: cinepi_controller  Interpolating for wb step: 5600K, lower index: 12, upper index: 12
06.063: INFO: cinepi_controller  Exact match found at index 12, r_interp: 0.2842607232745885, b_interp: 0.7564837749584288
06.063: INFO: cinepi_controller  Calculated reciprocal cg_rb for 5600K: (3.5, 1.3)
06.063: INFO: cinepi_controller  Initialized wb_cg_rb_array: {3200: (2.5, 2.0), 4400: (3.1, 1.6), 5600: (3.5, 1.3)}
06.064: INFO: cinepi_controller  Settings loaded successfully.
06.064: INFO: cinepi_controller  Received set_fps call with value: 24.0
06.064: INFO: cinepi_controller  Retrieved max_fps from Redis: 50
06.064: INFO: cinepi_controller  Calculated safe_value: 24.0
06.064: INFO: cinepi_controller  Setting fps to 24.0
06.065: INFO: redis_controller   Changed value: fps = 24.0
06.065: INFO: cinepi_controller  [1, 45, 90, 135, 172.8, 180, 225, 270, 315, 346.6, 360]
06.065: INFO: cinepi_controller  Initialized fps: 24
06.065: INFO: redis_controller   Changed value: fps_last = 24.0
06.066: INFO: redis_controller   Changed value: fps_last = 24.0
06.066: INFO: redis_controller   Changed value: sensor_mode = 0
06.067: INFO: cinepi_controller  Resolution set to mode 0, height: 1090, width: 1928, gui_layout: 0
06.067: INFO: redis_controller   Changed value: height = 1090
06.067: INFO: redis_controller   Changed value: width = 1928
06.067: INFO: redis_controller   Changed value: bit_depth = 12
06.067: INFO: redis_controller   Changed value: fps_max = 50
06.068: INFO: redis_controller   Changed value: gui_layout = 0
06.068: INFO: redis_controller   Changed value: file_size = 3.1
06.068: INFO: redis_controller   Changed value: cam_init = 1
06.567: INFO: cinepi_app         Restarting CinePi instance.
06.568: INFO: redis_controller   Changed value: fps_last = 24.0
06.831: INFO: sensor_detect      cinepi-raw output: Available cameras
-----------------
0 : imx585 [3840x2160 MONO] (/base/axi/pcie@120000/rp1/i2c@80000/imx585@1A)
    Modes: 'R12_CSI2P' : 1928x1090 [90.17 fps - (0, 0)/3840x2160 crop]
                         3856x2180 [60.00 fps - (0, 0)/3840x2160 crop]
           'R16' : 1928x1090 [30.00 fps - (0, 0)/3840x2160 crop]
                   3856x2180 [30.00 fps - (0, 0)/3840x2160 crop]


06.840: INFO: sensor_detect      Detected camera model: imx585_mono
06.841: INFO: redis_controller   Changed value: anamorphic_factor = 1
06.841: INFO: cinepi_app         Corrected Preview Window -> x=94, y=50, width=1732, height=979, aspect_ratio=1.77
06.842: INFO: cinepi_app         Issuing ['cinepi-raw', '--mode', '1928:1090:12:U', '--width', '1928', '--height', '1090', '--lores-width', '1273', '--lores-height', '720', '-p', '94,50,1732,979', '--post-process-file', '/home/pi/post-processing.json', '--shutter', '20000', '--awbgains', '3.1,1.6', '--awb', 'auto']
06.842: INFO: redis_controller   Changed value: lores_width = 1273
06.842: INFO: redis_controller   Changed value: lores_height = 720
06.843: INFO: cinepi_controller  Received set_fps call with value: 24.0
06.844: INFO: cinepi_controller  Retrieved max_fps from Redis: 50
06.844: INFO: cinepi_controller  Calculated safe_value: 24.0
06.845: INFO: cinepi_controller  Setting fps to 24.0
06.845: INFO: redis_controller   Changed value: sensor = imx585_mono
06.845: INFO: redis_controller   Changed value: fps = 24.0
06.845: INFO: cinepi_controller  [1, 45, 90, 135, 172.8, 180, 225, 270, 315, 346.6, 360]
06.847: INFO: cinepi_controller  Initialized fps_steps: [1, 2, 4, 8, 12, 16, 18, 24, 25, 33, 40, 50]
06.847: INFO: cinepi_controller  [1, 45, 90, 135, 172.8, 180, 225, 270, 315, 346.6, 360]
06.847: INFO: redis_controller   Changed value: fps_last = 24.0
06.847: INFO: redis_controller   Changed value: fps_max = 50
06.848: INFO: redis_controller   Changed value: sensor = imx585_mono
07.270: INFO: redis_listener     Framecount is changing
07.272: INFO: redis_controller   Changed value: rec = 1
07.849: INFO: gpio_input         Button on pin 5:
07.850: INFO: redis_controller   Changed value: fps = 24.0
07.850: INFO: gpio_input           Press: rec
07.880: INFO: gpio_input         Button on pin 13:
07.881: INFO: gpio_input           Press: inc_iso
07.882: INFO: gpio_input         Button on pin 10:
07.882: INFO: gpio_input           Press: dec_iso
07.883: INFO: gpio_input         Button on pin 16:
07.883: INFO: gpio_input           Press: set_fps_double
07.884: INFO: gpio_input         Button on pin 26:
07.884: INFO: gpio_input           Single Click: set_resolution
07.884: INFO: gpio_input           Double Click: restart_camera
07.884: INFO: gpio_input           Triple Click: reboot
07.884: INFO: gpio_input           Hold: unmount
07.885: INFO: gpio_input         Two-way switch on pin 27:
07.885: INFO: gpio_input           State ON action: set_all_lock
07.885: INFO: gpio_input           State OFF action: set_all_lock
08.386: INFO: gpio_input         Detected initial state: on for switch on pin 27
08.386: INFO: cinepi_controller  ISO lock False
08.386: INFO: cinepi_controller  Shutter angle lock False
08.386: INFO: cinepi_controller  FPS lock False
08.386: INFO: gpio_input         Executed action set_all_lock(0)
08.386: INFO: gpio_input         Initialized SimpleSwitch on pin 27 (pull_up=True, debounce=0.1s)
08.386: INFO: gpio_input         Two-way switch on pin 22:
08.386: INFO: gpio_input           State ON action: set_shutter_a_sync_mode
08.387: INFO: gpio_input           State OFF action: set_shutter_a_sync_mode
08.474: INFO: redis_listener     Drop frame detected
08.887: INFO: gpio_input         Detected initial state: on for switch on pin 22
08.888: INFO: cinepi_controller  Shutter Sync Mode deactivated
08.888: INFO: cinepi_controller  Shutter sync disabled
08.888: INFO: gpio_input         Executed action set_shutter_a_sync_mode(0)
08.889: INFO: gpio_input         Initialized SimpleSwitch on pin 22 (pull_up=True, debounce=0.1s)
08.889: INFO: gpio_input         Rotary Encoder with Button on CLK pin: 9, DT pin: 11
08.889: INFO: gpio_input           Rotate Clockwise: inc_iso
08.889: INFO: gpio_input           Rotate CounterClockwise: dec_iso
08.891: INFO: gpio_input         Rotary Encoder with Button on CLK pin: 23, DT pin: 25
08.891: INFO: gpio_input           Rotate Clockwise: inc_shutter_a_nom
08.891: INFO: gpio_input           Rotate CounterClockwise: dec_shutter_a_nom
08.892: INFO: gpio_input         Rotary Encoder with Button on CLK pin: 8, DT pin: 7
08.892: INFO: gpio_input           Rotate Clockwise: inc_fps
08.892: INFO: gpio_input           Rotate CounterClockwise: dec_fps
08.894: INFO: gpio_input         Rotary Encoder with Button on CLK pin: 12, DT pin: 20
08.894: INFO: gpio_input           Rotate Clockwise: inc_wb
08.894: INFO: gpio_input           Rotate CounterClockwise: dec_wb
08.906: WARNING: gpio_input         No I2C device found at address: 0x49. Quad Rotary Encoder not initialized.
08.909: INFO: redis_controller   Changed value: framecount = 0
08.910: INFO: redis_controller   Changed value: rec = 0
08.911: INFO: simple_gui         HDMI display found. (1920, 1080)
setterm: $TERM is not defined.
09.023: INFO: redis_listener     Drop frame flag reset
09.025: INFO: redis_listener     Framecount is stable
Exception in thread Thread-19:
Traceback (most recent call last):
  File "/usr/lib/python3.11/threading.py", line 1038, in _bootstrap_inner
09.033: INFO: redis_controller   Changed value: rec = 0
    self.run()
  File "/home/pi/cinemate/src/module/cli_commands.py", line 145, in run
    data = input("\n> ")  # Read the input as a single string
           ^^^^^^^^^^^^^
EOFError: EOF when reading a line
09.204: INFO: main               Stream module loaded
09.204: INFO: mediator           Mediator instantiated
09.209: INFO: analog_controls    Grove Base HAT found!
09.210: INFO: main               --- Initialization Complete ---
09.211: INFO: analog_controls    Setting ISO to 1200
09.212: INFO: cinepi_controller  Setting iso to 1200
09.213: INFO: redis_controller   Changed value: iso = 1200
09.214: INFO: analog_controls    Setting Shutter Angle to 180
09.214: INFO: cinepi_controller  Setting shutter_a_nom to 180
09.215: INFO: redis_controller   Changed value: shutter_a_nom = 180
09.215: INFO: cinepi_controller  Setting shutter_a to 180 degrees
09.215: INFO: redis_controller   Changed value: shutter_a = 180
09.216: INFO: PWMcontroller      Setting PWM with fps=None, shutter_angle=180
09.216: INFO: PWMcontroller      PWM duty cycle calculated and set to 32767
09.216: INFO: PWMcontroller      Updating PWM with cycles=1
09.216: INFO: analog_controls    Setting FPS to 24
09.216: INFO: cinepi_controller  Received set_fps call with value: 24.0
09.216: INFO: cinepi_controller  Retrieved max_fps from Redis: 50
09.216: INFO: cinepi_controller  Calculated safe_value: 24.0
09.217: INFO: cinepi_controller  Setting fps to 24.0
09.217: INFO: cinepi_controller  [1, 45, 90, 135, 172.8, 180, 225, 270, 315, 346.6, 360]
09.218: INFO: analog_controls    Setting White Balance to 4400K
09.233: INFO: cinepi_controller  Set white balance for 4400K: (3.1, 1.6)
09.250: INFO: PWMcontroller      PWM duty cycle set to 49.999237048905165% on pins 19, None
09.254: INFO: redis_controller   Changed value: fps = 24.0
09.254: INFO: PWMcontroller      Setting PWM with fps=24.0, shutter_angle=None
09.254: INFO: PWMcontroller      PWM frequency set to 24.0Hz on pins 19, None
09.254: INFO: PWMcontroller      Shutter angle is None, keeping existing duty cycle.
09.254: INFO: PWMcontroller      Updating PWM with cycles=1
09.292: INFO: PWMcontroller      PWM duty cycle set to 49.999237048905165% on pins 19, None
09.295: INFO: redis_controller   Changed value: fps_last = 24.0
09.296: INFO: redis_controller   Changed value: wb_user = 4400
09.297: INFO: redis_controller   Changed value: cg_rb = 3.1,1.6
09.298: INFO: redis_controller   Changed value: wb_user = 4400
21.111: INFO: redis_listener     Drop frame detected
21.113: INFO: redis_listener     Drop frame detected
21.615: INFO: redis_listener     Drop frame flag reset
21.618: INFO: redis_listener     Drop frame flag reset
21.626: INFO: redis_listener     Drop frame detected
21.627: INFO: redis_listener     Drop frame detected
22.132: INFO: redis_listener     Drop frame flag reset
22.133: INFO: redis_listener     Drop frame flag reset
02.642: INFO: analog_controls    Setting FPS to 18
02.642: INFO: cinepi_controller  Received set_fps call with value: 18.0
02.642: INFO: cinepi_controller  Retrieved max_fps from Redis: 50
02.643: INFO: cinepi_controller  Calculated safe_value: 18.0
02.644: INFO: cinepi_controller  Setting fps to 18.0
02.645: INFO: redis_controller   Changed value: fps = 18.0
02.645: INFO: cinepi_controller  [1, 45, 90, 120.0, 135, 172.8, 180, 225, 270, 315, 346.6, 360]
02.645: INFO: PWMcontroller      Setting PWM with fps=18.0, shutter_angle=None
02.646: INFO: PWMcontroller      PWM frequency set to 18.0Hz on pins 19, None
02.646: INFO: PWMcontroller      Shutter angle is None, keeping existing duty cycle.
02.646: INFO: PWMcontroller      Updating PWM with cycles=1
02.666: INFO: PWMcontroller      PWM duty cycle set to 49.999237048905165% on pins 19, None
02.667: INFO: redis_controller   Changed value: fps_last = 18.0
02.672: INFO: redis_listener     Drop frame detected
02.672: INFO: redis_listener     Drop frame detected
02.749: INFO: analog_controls    Setting FPS to 24
02.749: INFO: cinepi_controller  Received set_fps call with value: 24.0
02.749: INFO: cinepi_controller  Retrieved max_fps from Redis: 50
02.749: INFO: cinepi_controller  Calculated safe_value: 24.0
02.752: INFO: cinepi_controller  Setting fps to 24.0
02.758: INFO: redis_controller   Changed value: fps = 24.0
02.759: INFO: cinepi_controller  [1, 45, 90, 135, 172.8, 180, 225, 270, 315, 346.6, 360]
02.760: INFO: PWMcontroller      Setting PWM with fps=24.0, shutter_angle=None
02.764: INFO: PWMcontroller      PWM frequency set to 24.0Hz on pins 19, None
02.766: INFO: PWMcontroller      Shutter angle is None, keeping existing duty cycle.
02.769: INFO: PWMcontroller      Updating PWM with cycles=1
02.792: INFO: PWMcontroller      PWM duty cycle set to 49.999237048905165% on pins 19, None
02.797: INFO: redis_controller   Changed value: fps_last = 24.0
02.875: INFO: analog_controls    Setting FPS to 18
02.876: INFO: cinepi_controller  Received set_fps call with value: 18.0
02.876: INFO: cinepi_controller  Retrieved max_fps from Redis: 50
02.876: INFO: cinepi_controller  Calculated safe_value: 18.0
02.876: INFO: cinepi_controller  Setting fps to 18.0
02.876: INFO: cinepi_controller  [1, 45, 90, 120.0, 135, 172.8, 180, 225, 270, 315, 346.6, 360]
02.877: INFO: redis_controller   Changed value: fps = 18.0
02.877: INFO: PWMcontroller      Setting PWM with fps=18.0, shutter_angle=None
02.878: INFO: PWMcontroller      PWM frequency set to 18.0Hz on pins 19, None
02.878: INFO: PWMcontroller      Shutter angle is None, keeping existing duty cycle.
02.878: INFO: PWMcontroller      Updating PWM with cycles=1
02.917: INFO: PWMcontroller      PWM duty cycle set to 49.999237048905165% on pins 19, None
02.922: INFO: redis_controller   Changed value: fps_last = 18.0
03.173: INFO: redis_listener     Drop frame flag reset
03.174: INFO: redis_listener     Drop frame flag reset
03.182: INFO: redis_listener     Drop frame detected
03.183: INFO: redis_listener     Drop frame detected
03.684: INFO: redis_listener     Drop frame flag reset
03.685: INFO: redis_listener     Drop frame flag reset
03.928: INFO: analog_controls    Setting FPS to 24
03.929: INFO: cinepi_controller  Received set_fps call with value: 24.0
03.931: INFO: cinepi_controller  Retrieved max_fps from Redis: 50
03.931: INFO: cinepi_controller  Calculated safe_value: 24.0
03.933: INFO: cinepi_controller  Setting fps to 24.0
03.937: INFO: redis_controller   Changed value: fps = 24.0
03.938: INFO: cinepi_controller  [1, 45, 90, 135, 172.8, 180, 225, 270, 315, 346.6, 360]
03.939: INFO: PWMcontroller      Setting PWM with fps=24.0, shutter_angle=None
03.950: INFO: PWMcontroller      PWM frequency set to 24.0Hz on pins 19, None
03.951: INFO: redis_listener     Drop frame detected
03.952: INFO: redis_listener     Drop frame detected
03.952: INFO: PWMcontroller      Shutter angle is None, keeping existing duty cycle.
03.956: INFO: PWMcontroller      Updating PWM with cycles=1
03.958: INFO: PWMcontroller      PWM duty cycle set to 49.999237048905165% on pins 19, None
03.963: INFO: redis_controller   Changed value: fps_last = 24.0
04.454: INFO: redis_listener     Drop frame flag reset
04.456: INFO: redis_listener     Drop frame flag reset
04.782: INFO: analog_controls    Setting FPS to 25
04.782: INFO: cinepi_controller  Received set_fps call with value: 25.0
04.782: INFO: cinepi_controller  Retrieved max_fps from Redis: 50
04.782: INFO: cinepi_controller  Calculated safe_value: 25.0
04.784: INFO: cinepi_controller  Setting fps to 25.0
04.785: INFO: redis_controller   Changed value: fps = 25.0
04.785: INFO: cinepi_controller  [1, 45, 90, 135, 172.8, 180, 225, 270, 315, 346.6, 360]
04.785: INFO: PWMcontroller      Setting PWM with fps=25.0, shutter_angle=None
04.785: INFO: PWMcontroller      PWM frequency set to 25.0Hz on pins 19, None
04.785: INFO: PWMcontroller      Shutter angle is None, keeping existing duty cycle.
04.785: INFO: PWMcontroller      Updating PWM with cycles=1
04.791: INFO: PWMcontroller      PWM duty cycle set to 49.999237048905165% on pins 19, None
04.802: INFO: redis_controller   Changed value: fps_last = 25.0
04.959: INFO: redis_listener     Drop frame detected
04.960: INFO: redis_listener     Drop frame detected
05.462: INFO: redis_listener     Drop frame flag reset
05.464: INFO: redis_listener     Drop frame flag reset
57.124: INFO: main               Detected Raspberry Pi model: pi5
57.646: INFO: wifi_hotspot       Wi-Fi hotspot 'CinePi' created successfully with password '11111111' on interface 'wlan0'.
57.669: INFO: redis_controller   Initializing cache with Redis values...
57.672: INFO: PWMcontroller      Initializing PWM on pin 19 (channel 3) with frequency 24Hz and chip 2
57.686: INFO: PWMcontroller      PWM successfully initialized on pin 19 (channel 3) with frequency 24Hz
57.686: INFO: PWMcontroller      Updating PWM with cycles=1
57.708: INFO: PWMcontroller      PWM duty cycle set to 49.999237048905165% on pins 19, None
57.708: INFO: ssd_monitor        SSD monitoring thread started.
57.711: INFO: ssd_monitor        RAW drive mounted at /media/RAW
57.711: INFO: ssd_monitor        Updated space left on SSD: 96.58 GB
57.736: INFO: gpio_output        REC light instantiated on pin 6
57.736: INFO: gpio_output        REC light instantiated on pin 21
57.739: INFO: redis_controller   Changed value: pi_model = pi5
25.099: INFO: sensor_detect      cinepi-raw output: Available cameras
-----------------
0 : imx585 [3840x2160 MONO] (/base/axi/pcie@120000/rp1/i2c@80000/imx585@1A)
    Modes: 'R12_CSI2P' : 1928x1090 [90.17 fps - (0, 0)/3840x2160 crop]
                         3856x2180 [60.00 fps - (0, 0)/3840x2160 crop]
           'R16' : 1928x1090 [30.00 fps - (0, 0)/3840x2160 crop]
                   3856x2180 [30.00 fps - (0, 0)/3840x2160 crop]


25.099: INFO: sensor_detect      Detected camera model: imx585_mono
25.100: INFO: cinepi_app         Corrected Preview Window -> x=94, y=50, width=1732, height=979, aspect_ratio=1.77
25.101: INFO: redis_controller   Changed value: anamorphic_factor = 1
25.101: INFO: cinepi_app         redis width: 1928
25.101: INFO: redis_controller   Changed value: lores_width = 1273
25.101: INFO: cinepi_app         redis height: 1090
25.102: INFO: cinepi_app         CinePi instantiated
25.102: INFO: redis_controller   Changed value: lores_height = 720
25.102: INFO: cinepi_app         Log level set to INFO
25.103: INFO: redis_controller   Changed value: framecount = 0
25.103: INFO: redis_controller   Changed value: rec = 0
25.106: INFO: redis_controller   Changed value: sensor = imx585_mono
25.106: INFO: cinepi_controller  Settings loaded successfully.
25.106: INFO: redis_controller   Changed value: fps_max = 50
25.107: INFO: cinepi_controller  Initialized fps_steps: [1, 2, 4, 8, 12, 16, 18, 24, 25, 33, 40, 50]
25.107: INFO: cinepi_controller  Initialized shutter_a_steps: [1, 45, 90, 135, 172.8, 180, 225, 270, 315, 346.6, 360]
25.107: INFO: redis_controller   Changed value: fps_max = 50
25.108: INFO: cinepi_controller  Loading tuning file from: /home/pi/cinemate/resources/tuning_files/imx585_mono.json
25.112: INFO: cinepi_controller  Tuning data loaded successfully.
25.112: WARNING: cinepi_controller  'rpi.awb' algorithm data not found, using default ct_curve.
25.112: INFO: cinepi_controller  Parsed temperatures: [2000.0, 2200.0, 2400.0, 2600.0, 2800.0, 3000.0, 3200.0, 3400.0, 3600.0, 4100.0, 4600.0, 5100.0, 5600.0, 6100.0, 6600.0, 7100.0, 7600.0, 8100.0, 8600.0]
25.112: INFO: cinepi_controller  Parsed r_values: [0.6331025775790707, 0.5696117366212947, 0.5204264653110015, 0.48148675531667223, 0.450085403501908, 0.42436130159169017, 0.40300023695527337, 0.3850520052612984, 0.36981508088230314, 0.333468007836758, 0.31196097364221376, 0.2961860409294588, 0.2842607232745885, 0.2750265787051251, 0.2677057225584924, 0.2617955199757274, 0.25693714288250125, 0.25287531441063316, 0.24946601483331993]
25.112: INFO: cinepi_controller  Parsed b_values: [0.27424225990946915, 0.3116091368689487, 0.34892179554105873, 0.38565229719076793, 0.42145684622485047, 0.45611835670028816, 0.48950766215198593, 0.5215567075837261, 0.5522397906415475, 0.5909770465167908, 0.6515706327327178, 0.7068178946570284, 0.7564837749584288, 0.8006183524920533, 0.8398879225373039, 0.8746456080032436, 0.905569559506562, 0.9331696750390895, 0.9576820904825795]
25.113: INFO: cinepi_controller  Interpolating for wb step: 3200K, lower index: 6, upper index: 6
25.113: INFO: cinepi_controller  Exact match found at index 6, r_interp: 0.40300023695527337, b_interp: 0.48950766215198593
25.113: INFO: cinepi_controller  Calculated reciprocal cg_rb for 3200K: (2.5, 2.0)
25.113: INFO: cinepi_controller  Interpolating for wb step: 4400K, lower index: 9, upper index: 10
25.113: INFO: cinepi_controller  Interpolated values for 4400K - r_interp: 0.32056378732003143, b_interp: 0.627333198246347
25.113: INFO: cinepi_controller  Calculated reciprocal cg_rb for 4400K: (3.1, 1.6)
25.113: INFO: cinepi_controller  Interpolating for wb step: 5600K, lower index: 12, upper index: 12
25.113: INFO: cinepi_controller  Exact match found at index 12, r_interp: 0.2842607232745885, b_interp: 0.7564837749584288
25.113: INFO: cinepi_controller  Calculated reciprocal cg_rb for 5600K: (3.5, 1.3)
25.113: INFO: cinepi_controller  Initialized wb_cg_rb_array: {3200: (2.5, 2.0), 4400: (3.1, 1.6), 5600: (3.5, 1.3)}
25.114: INFO: cinepi_controller  Settings loaded successfully.
25.114: INFO: cinepi_controller  Received set_fps call with value: 24.0
25.114: INFO: cinepi_controller  Retrieved max_fps from Redis: 50
25.114: INFO: cinepi_controller  Calculated safe_value: 24.0
25.114: INFO: cinepi_controller  Setting fps to 24.0
25.115: INFO: redis_controller   Changed value: fps = 24.0
25.115: INFO: cinepi_controller  [1, 45, 90, 135, 172.8, 180, 225, 270, 315, 346.6, 360]
25.115: INFO: cinepi_controller  Initialized fps: 24
25.116: INFO: redis_controller   Changed value: fps_last = 24.0
25.116: INFO: redis_controller   Changed value: fps_last = 24.0
25.118: INFO: redis_controller   Changed value: sensor_mode = 0
25.118: INFO: cinepi_controller  Resolution set to mode 0, height: 1090, width: 1928, gui_layout: 0
25.118: INFO: redis_controller   Changed value: height = 1090
25.119: INFO: redis_controller   Changed value: width = 1928
25.119: INFO: redis_controller   Changed value: bit_depth = 12
25.119: INFO: redis_controller   Changed value: fps_max = 50
25.119: INFO: redis_controller   Changed value: gui_layout = 0
25.120: INFO: redis_controller   Changed value: file_size = 3.1
25.120: INFO: redis_controller   Changed value: cam_init = 1
25.619: INFO: cinepi_app         Restarting CinePi instance.
26.595: INFO: redis_controller   Changed value: fps_last = 24.0
26.857: INFO: sensor_detect      cinepi-raw output: Available cameras
-----------------
0 : imx585 [3840x2160 MONO] (/base/axi/pcie@120000/rp1/i2c@80000/imx585@1A)
    Modes: 'R12_CSI2P' : 1928x1090 [90.17 fps - (0, 0)/3840x2160 crop]
                         3856x2180 [60.00 fps - (0, 0)/3840x2160 crop]
           'R16' : 1928x1090 [30.00 fps - (0, 0)/3840x2160 crop]
                   3856x2180 [30.00 fps - (0, 0)/3840x2160 crop]


26.857: INFO: sensor_detect      Detected camera model: imx585_mono
26.858: INFO: cinepi_app         Corrected Preview Window -> x=94, y=50, width=1732, height=979, aspect_ratio=1.77
26.858: INFO: cinepi_app         Issuing ['cinepi-raw', '--mode', '1928:1090:12:U', '--width', '1928', '--height', '1090', '--lores-width', '1273', '--lores-height', '720', '-p', '94,50,1732,979', '--post-process-file', '/home/pi/post-processing.json', '--shutter', '20000', '--awbgains', '3.1,1.6', '--awb', 'auto']
26.859: INFO: redis_controller   Changed value: anamorphic_factor = 1
26.860: INFO: redis_controller   Changed value: lores_width = 1273
26.861: INFO: cinepi_controller  Received set_fps call with value: 24.0
26.861: INFO: redis_controller   Changed value: lores_height = 720
26.862: INFO: cinepi_controller  Retrieved max_fps from Redis: 50
26.862: INFO: cinepi_controller  Calculated safe_value: 24.0
26.862: INFO: redis_controller   Changed value: sensor = imx585_mono
26.862: INFO: cinepi_controller  Setting fps to 24.0
26.863: INFO: redis_controller   Changed value: fps = 24.0
26.863: INFO: cinepi_controller  [1, 45, 90, 135, 172.8, 180, 225, 270, 315, 346.6, 360]
26.864: INFO: cinepi_controller  Initialized fps_steps: [1, 2, 4, 8, 12, 16, 18, 24, 25, 33, 40, 50]
26.864: INFO: cinepi_controller  [1, 45, 90, 135, 172.8, 180, 225, 270, 315, 346.6, 360]
26.865: INFO: redis_controller   Changed value: fps_last = 24.0
26.865: INFO: redis_controller   Changed value: fps_max = 50
26.865: INFO: redis_controller   Changed value: sensor = imx585_mono
27.865: INFO: gpio_input         Button on pin 5:
27.866: INFO: gpio_input           Press: rec
27.866: INFO: redis_controller   Changed value: fps = 24.0
32.945: INFO: gpio_input         Button on pin 13:
52.180: INFO: gpio_input           Press: inc_iso
52.182: INFO: gpio_input         Button on pin 10:
52.182: INFO: gpio_input           Press: dec_iso
52.183: INFO: gpio_input         Button on pin 16:
52.183: INFO: gpio_input           Press: set_fps_double
52.185: INFO: gpio_input         Button on pin 26:
52.185: INFO: gpio_input           Single Click: set_resolution
52.185: INFO: gpio_input           Double Click: restart_camera
52.185: INFO: gpio_input           Triple Click: reboot
52.185: INFO: gpio_input           Hold: unmount
52.186: INFO: gpio_input         Two-way switch on pin 27:
52.186: INFO: gpio_input           State ON action: set_all_lock
52.186: INFO: gpio_input           State OFF action: set_all_lock
52.687: INFO: gpio_input         Detected initial state: on for switch on pin 27
52.687: INFO: cinepi_controller  ISO lock False
52.687: INFO: cinepi_controller  Shutter angle lock False
52.687: INFO: cinepi_controller  FPS lock False
52.687: INFO: gpio_input         Executed action set_all_lock(0)
52.688: INFO: gpio_input         Initialized SimpleSwitch on pin 27 (pull_up=True, debounce=0.1s)
52.688: INFO: gpio_input         Two-way switch on pin 22:
52.688: INFO: gpio_input           State ON action: set_shutter_a_sync_mode
52.688: INFO: gpio_input           State OFF action: set_shutter_a_sync_mode
53.189: INFO: gpio_input         Detected initial state: on for switch on pin 22
53.189: INFO: cinepi_controller  Shutter Sync Mode deactivated
53.189: INFO: cinepi_controller  Shutter sync disabled
53.189: INFO: gpio_input         Executed action set_shutter_a_sync_mode(0)
53.190: INFO: gpio_input         Initialized SimpleSwitch on pin 22 (pull_up=True, debounce=0.1s)
53.190: INFO: gpio_input         Rotary Encoder with Button on CLK pin: 9, DT pin: 11
53.190: INFO: gpio_input           Rotate Clockwise: inc_iso
53.190: INFO: gpio_input           Rotate CounterClockwise: dec_iso
53.192: INFO: gpio_input         Rotary Encoder with Button on CLK pin: 23, DT pin: 25
53.192: INFO: gpio_input           Rotate Clockwise: inc_shutter_a_nom
53.192: INFO: gpio_input           Rotate CounterClockwise: dec_shutter_a_nom
53.193: INFO: gpio_input         Rotary Encoder with Button on CLK pin: 8, DT pin: 7
53.193: INFO: gpio_input           Rotate Clockwise: inc_fps
53.193: INFO: gpio_input           Rotate CounterClockwise: dec_fps
53.195: INFO: gpio_input         Rotary Encoder with Button on CLK pin: 12, DT pin: 20
53.195: INFO: gpio_input           Rotate Clockwise: inc_wb
53.195: INFO: gpio_input           Rotate CounterClockwise: dec_wb
53.620: INFO: redis_listener     Framecount is changing
53.621: INFO: redis_controller   Changed value: rec = 1
10.497: WARNING: gpio_input         No I2C device found at address: 0x49. Quad Rotary Encoder not initialized.
10.500: INFO: redis_controller   Changed value: framecount = 0
10.500: INFO: redis_controller   Changed value: rec = 0
10.502: INFO: simple_gui         HDMI display found. (1920, 1080)
setterm: $TERM is not defined.
Exception in thread Thread-18:
Traceback (most recent call last):
  File "/usr/lib/python3.11/threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "/home/pi/cinemate/src/module/cli_commands.py", line 145, in run
    data = input("\n> ")  # Read the input as a single string
           ^^^^^^^^^^^^^
EOFError: EOF when reading a line
10.749: INFO: main               Stream module loaded
10.749: INFO: mediator           Mediator instantiated
10.754: INFO: analog_controls    Grove Base HAT found!
10.755: INFO: main               --- Initialization Complete ---
10.756: INFO: analog_controls    Setting ISO to 1200
10.758: INFO: cinepi_controller  Setting iso to 1200
10.759: INFO: redis_controller   Changed value: iso = 1200
10.760: INFO: analog_controls    Setting Shutter Angle to 180
10.760: INFO: cinepi_controller  Setting shutter_a_nom to 180
10.760: INFO: redis_controller   Changed value: shutter_a_nom = 180
10.761: INFO: cinepi_controller  Setting shutter_a to 180 degrees
10.761: INFO: redis_controller   Changed value: shutter_a = 180
10.761: INFO: PWMcontroller      Setting PWM with fps=None, shutter_angle=180
10.761: INFO: PWMcontroller      PWM duty cycle calculated and set to 32767
10.761: INFO: PWMcontroller      Updating PWM with cycles=1
10.762: INFO: analog_controls    Setting FPS to 25
10.762: INFO: cinepi_controller  Received set_fps call with value: 25.0
10.762: INFO: cinepi_controller  Retrieved max_fps from Redis: 50
10.762: INFO: cinepi_controller  Calculated safe_value: 25.0
10.762: INFO: cinepi_controller  Setting fps to 25.0
10.763: INFO: cinepi_controller  [1, 45, 90, 135, 172.8, 180, 225, 270, 315, 346.6, 360]
10.764: INFO: analog_controls    Setting White Balance to 4400K
10.764: INFO: cinepi_controller  Set white balance for 4400K: (3.1, 1.6)
10.791: INFO: PWMcontroller      PWM duty cycle set to 49.999237048905165% on pins 19, None
10.792: INFO: redis_controller   Changed value: fps = 25.0
10.792: INFO: PWMcontroller      Setting PWM with fps=25.0, shutter_angle=None
10.792: INFO: PWMcontroller      PWM frequency set to 25.0Hz on pins 19, None
10.792: INFO: PWMcontroller      Shutter angle is None, keeping existing duty cycle.
10.792: INFO: PWMcontroller      Updating PWM with cycles=1
10.833: INFO: PWMcontroller      PWM duty cycle set to 49.999237048905165% on pins 19, None
10.837: INFO: redis_controller   Changed value: fps_last = 25.0
10.839: INFO: redis_controller   Changed value: wb_user = 4400
10.840: INFO: redis_controller   Changed value: cg_rb = 3.1,1.6
10.842: INFO: redis_controller   Changed value: wb_user = 4400
20.348: INFO: main               Graceful shutdown initiated.
41.023: INFO: main               Detected Raspberry Pi model: pi5
41.502: INFO: wifi_hotspot       Wi-Fi hotspot 'CinePi' created successfully with password '11111111' on interface 'wlan0'.
41.529: INFO: redis_controller   Initializing cache with Redis values...
41.533: INFO: PWMcontroller      Initializing PWM on pin 19 (channel 3) with frequency 24Hz and chip 2
41.536: INFO: PWMcontroller      PWM successfully initialized on pin 19 (channel 3) with frequency 24Hz
41.536: INFO: PWMcontroller      Updating PWM with cycles=1
41.541: INFO: PWMcontroller      PWM duty cycle set to 49.999237048905165% on pins 19, None
41.555: INFO: ssd_monitor        SSD monitoring thread started.
41.567: INFO: ssd_monitor        RAW drive mounted at /media/RAW
41.567: INFO: ssd_monitor        Updated space left on SSD: 96.58 GB
41.590: INFO: gpio_output        REC light instantiated on pin 6
41.590: INFO: gpio_output        REC light instantiated on pin 21
41.593: INFO: redis_controller   Changed value: pi_model = pi5
45.781: INFO: sensor_detect      cinepi-raw output: Available cameras
-----------------
0 : imx477 [4056x3040 12-bit RGGB] (/base/axi/pcie@120000/rp1/i2c@80000/imx477@1a)
    Modes: 'SRGGB10_CSI2P' : 1332x990 [120.05 fps - (696, 528)/2664x1980 crop]
           'SRGGB12_CSI2P' : 2028x1080 [50.03 fps - (0, 440)/4056x2160 crop]
                             2028x1520 [40.01 fps - (0, 0)/4056x3040 crop]
                             4056x3040 [10.00 fps - (0, 0)/4056x3040 crop]


45.781: INFO: sensor_detect      Detected camera model: imx477
45.782: INFO: cinepi_app         Corrected Preview Window -> x=94, y=50, width=1732, height=979, aspect_ratio=1.77
45.783: INFO: redis_controller   Changed value: anamorphic_factor = 1
45.783: INFO: cinepi_app         redis width: 1928
45.783: INFO: cinepi_app         redis height: 1090
45.783: INFO: cinepi_app         CinePi instantiated
45.783: INFO: redis_controller   Changed value: lores_width = 1273
45.783: INFO: cinepi_app         Log level set to INFO
45.784: INFO: redis_controller   Changed value: lores_height = 720
45.785: INFO: redis_controller   Changed value: framecount = 0
45.785: INFO: redis_controller   Changed value: rec = 0
45.787: INFO: redis_controller   Changed value: sensor = imx477
45.788: INFO: cinepi_controller  Settings loaded successfully.
45.788: INFO: redis_controller   Changed value: fps_max = 50
45.788: INFO: cinepi_controller  Initialized fps_steps: [1, 2, 4, 8, 12, 16, 18, 24, 25, 33, 40, 50]
45.788: INFO: cinepi_controller  Initialized shutter_a_steps: [1, 45, 90, 135, 172.8, 180, 225, 270, 315, 346.6, 360]
45.789: INFO: redis_controller   Changed value: fps_max = 50
45.789: INFO: cinepi_controller  Loading tuning file from: /home/pi/cinemate/resources/tuning_files/imx477.json
45.795: INFO: cinepi_controller  Tuning data loaded successfully.
45.795: INFO: cinepi_controller  'rpi.awb' data found: {'priors': [{'lux': 0, 'prior': [2000, 1.0, 3000, 0.0, 13000, 0.0]}, {'lux': 800, 'prior': [2000, 0.0, 6000, 2.0, 13000, 2.0]}, {'lux': 1500, 'prior': [2000, 0.0, 4000, 1.0, 6000, 6.0, 6500, 7.0, 7000, 1.0, 13000, 1.0]}], 'modes': {'auto': {'lo': 2500, 'hi': 7700}, 'incandescent': {'lo': 2500, 'hi': 3000}, 'tungsten': {'lo': 3000, 'hi': 3500}, 'fluorescent': {'lo': 4000, 'hi': 4700}, 'indoor': {'lo': 3000, 'hi': 5000}, 'daylight': {'lo': 5500, 'hi': 6500}, 'cloudy': {'lo': 7000, 'hi': 8000}}, 'bayes': 1, 'ct_curve': [2850.0, 0.4307, 0.3957, 2960.0, 0.4159, 0.4313, 3580.0, 0.3771, 0.5176, 4559.0, 0.3031, 0.6573, 5881.0, 0.2809, 0.6942, 7600.0, 0.2263, 0.7762], 'sensitivity_r': 1.0, 'sensitivity_b': 1.0, 'transverse_pos': 0.02634, 'transverse_neg': 0.02255}
45.795: INFO: cinepi_controller  Retrieved ct_curve: [2850.0, 0.4307, 0.3957, 2960.0, 0.4159, 0.4313, 3580.0, 0.3771, 0.5176, 4559.0, 0.3031, 0.6573, 5881.0, 0.2809, 0.6942, 7600.0, 0.2263, 0.7762]
45.795: INFO: cinepi_controller  Parsed temperatures: [2850.0, 2960.0, 3580.0, 4559.0, 5881.0, 7600.0]
45.795: INFO: cinepi_controller  Parsed r_values: [0.4307, 0.4159, 0.3771, 0.3031, 0.2809, 0.2263]
45.796: INFO: cinepi_controller  Parsed b_values: [0.3957, 0.4313, 0.5176, 0.6573, 0.6942, 0.7762]
45.796: INFO: cinepi_controller  Interpolating for wb step: 3200K, lower index: 1, upper index: 2
45.796: INFO: cinepi_controller  Interpolated values for 3200K - r_interp: 0.4008806451612903, b_interp: 0.4647064516129032
45.796: INFO: cinepi_controller  Calculated reciprocal cg_rb for 3200K: (2.5, 2.2)
45.796: INFO: cinepi_controller  Interpolating for wb step: 4400K, lower index: 2, upper index: 3
45.796: INFO: cinepi_controller  Interpolated values for 4400K - r_interp: 0.31511838610827375, b_interp: 0.6346112359550562
45.796: INFO: cinepi_controller  Calculated reciprocal cg_rb for 4400K: (3.2, 1.6)
45.796: INFO: cinepi_controller  Interpolating for wb step: 5600K, lower index: 3, upper index: 4
45.796: INFO: cinepi_controller  Interpolated values for 5600K - r_interp: 0.28561875945537063, b_interp: 0.686356656580938
45.797: INFO: cinepi_controller  Calculated reciprocal cg_rb for 5600K: (3.5, 1.5)
45.797: INFO: cinepi_controller  Initialized wb_cg_rb_array: {3200: (2.5, 2.2), 4400: (3.2, 1.6), 5600: (3.5, 1.5)}
45.797: INFO: cinepi_controller  Settings loaded successfully.
45.797: INFO: cinepi_controller  Received set_fps call with value: 25.0
45.797: INFO: cinepi_controller  Retrieved max_fps from Redis: 50
45.798: INFO: cinepi_controller  Calculated safe_value: 25.0
45.798: INFO: cinepi_controller  Setting fps to 25.0
45.798: INFO: redis_controller   Changed value: fps = 25.0
45.798: INFO: cinepi_controller  [1, 45, 90, 135, 172.8, 180, 225, 270, 315, 346.6, 360]
45.799: INFO: cinepi_controller  Initialized fps: 25
45.799: INFO: redis_controller   Changed value: fps_last = 25.0
45.800: INFO: redis_controller   Changed value: fps_last = 25.0
45.802: INFO: redis_controller   Changed value: sensor_mode = 0
45.802: INFO: cinepi_controller  Resolution set to mode 0, height: 1080, width: 2028, gui_layout: 0
45.803: INFO: redis_controller   Changed value: height = 1080
45.803: INFO: redis_controller   Changed value: width = 2028
45.803: INFO: redis_controller   Changed value: bit_depth = 12
45.803: INFO: redis_controller   Changed value: fps_max = 50
45.803: INFO: redis_controller   Changed value: gui_layout = 0
45.803: INFO: redis_controller   Changed value: file_size = 3.2
45.804: INFO: redis_controller   Changed value: cam_init = 1
46.303: INFO: cinepi_app         Restarting CinePi instance.
46.304: INFO: redis_controller   Changed value: fps_last = 25.0
46.577: INFO: sensor_detect      cinepi-raw output: Available cameras
-----------------
0 : imx477 [4056x3040 12-bit RGGB] (/base/axi/pcie@120000/rp1/i2c@80000/imx477@1a)
    Modes: 'SRGGB10_CSI2P' : 1332x990 [120.05 fps - (696, 528)/2664x1980 crop]
           'SRGGB12_CSI2P' : 2028x1080 [50.03 fps - (0, 440)/4056x2160 crop]
                             2028x1520 [40.01 fps - (0, 0)/4056x3040 crop]
                             4056x3040 [10.00 fps - (0, 0)/4056x3040 crop]


49.040: INFO: sensor_detect      Detected camera model: imx477
49.041: INFO: cinepi_app         Corrected Preview Window -> x=94, y=79, width=1732, height=922, aspect_ratio=1.88
49.041: INFO: redis_controller   Changed value: anamorphic_factor = 1
49.041: INFO: cinepi_app         Issuing ['cinepi-raw', '--mode', '2028:1080:12:U', '--width', '2028', '--height', '1080', '--lores-width', '1352', '--lores-height', '720', '-p', '94,79,1732,922', '--post-process-file', '/home/pi/post-processing.json', '--shutter', '20000', '--awbgains', '3.1,1.6', '--awb', 'auto']
49.042: INFO: redis_controller   Changed value: lores_width = 1352
49.042: INFO: redis_controller   Changed value: lores_height = 720
49.043: INFO: cinepi_controller  Received set_fps call with value: 25.0
49.044: INFO: redis_controller   Changed value: sensor = imx477
49.044: INFO: cinepi_controller  Retrieved max_fps from Redis: 50
49.044: INFO: cinepi_controller  Calculated safe_value: 25.0
49.044: INFO: cinepi_controller  Setting fps to 25.0
49.045: INFO: redis_controller   Changed value: fps = 25.0
49.045: INFO: cinepi_controller  [1, 45, 90, 135, 172.8, 180, 225, 270, 315, 346.6, 360]
49.046: INFO: cinepi_controller  Initialized fps_steps: [1, 2, 4, 8, 12, 16, 18, 24, 25, 33, 40, 50]
49.046: INFO: cinepi_controller  [1, 45, 90, 135, 172.8, 180, 225, 270, 315, 346.6, 360]
49.046: INFO: redis_controller   Changed value: fps_last = 25.0
49.047: INFO: redis_controller   Changed value: fps_max = 50
49.047: INFO: redis_controller   Changed value: sensor = imx477
50.047: INFO: gpio_input         Button on pin 5:
50.047: INFO: gpio_input           Press: rec
50.048: INFO: redis_controller   Changed value: fps = 25.0
52.104: INFO: gpio_input         Button on pin 13:
52.116: INFO: gpio_input           Press: inc_iso
52.118: INFO: gpio_input         Button on pin 10:
52.118: INFO: gpio_input           Press: dec_iso
52.119: INFO: gpio_input         Button on pin 16:
52.120: INFO: gpio_input           Press: set_fps_double
52.121: INFO: gpio_input         Button on pin 26:
52.121: INFO: gpio_input           Single Click: set_resolution
52.121: INFO: gpio_input           Double Click: restart_camera
52.121: INFO: gpio_input           Triple Click: reboot
52.121: INFO: gpio_input           Hold: unmount
52.122: INFO: gpio_input         Two-way switch on pin 27:
52.122: INFO: gpio_input           State ON action: set_all_lock
52.122: INFO: gpio_input           State OFF action: set_all_lock
52.285: INFO: redis_listener     Framecount is changing
52.287: INFO: redis_controller   Changed value: rec = 1
52.623: INFO: gpio_input         Detected initial state: on for switch on pin 27
52.623: INFO: cinepi_controller  ISO lock False
52.623: INFO: cinepi_controller  Shutter angle lock False
52.623: INFO: cinepi_controller  FPS lock False
52.624: INFO: gpio_input         Executed action set_all_lock(0)
52.624: INFO: gpio_input         Initialized SimpleSwitch on pin 27 (pull_up=True, debounce=0.1s)
52.624: INFO: gpio_input         Two-way switch on pin 22:
52.624: INFO: gpio_input           State ON action: set_shutter_a_sync_mode
52.624: INFO: gpio_input           State OFF action: set_shutter_a_sync_mode
52.826: INFO: redis_listener     Drop frame detected
53.125: INFO: gpio_input         Detected initial state: on for switch on pin 22
53.126: INFO: cinepi_controller  Shutter Sync Mode deactivated
53.126: INFO: cinepi_controller  Shutter sync disabled
53.126: INFO: gpio_input         Executed action set_shutter_a_sync_mode(0)
53.126: INFO: gpio_input         Initialized SimpleSwitch on pin 22 (pull_up=True, debounce=0.1s)
53.126: INFO: gpio_input         Rotary Encoder with Button on CLK pin: 9, DT pin: 11
53.126: INFO: gpio_input           Rotate Clockwise: inc_iso
53.126: INFO: gpio_input           Rotate CounterClockwise: dec_iso
53.128: INFO: gpio_input         Rotary Encoder with Button on CLK pin: 23, DT pin: 25
53.128: INFO: gpio_input           Rotate Clockwise: inc_shutter_a_nom
53.128: INFO: gpio_input           Rotate CounterClockwise: dec_shutter_a_nom
53.130: INFO: gpio_input         Rotary Encoder with Button on CLK pin: 8, DT pin: 7
53.130: INFO: gpio_input           Rotate Clockwise: inc_fps
53.130: INFO: gpio_input           Rotate CounterClockwise: dec_fps
53.131: INFO: gpio_input         Rotary Encoder with Button on CLK pin: 12, DT pin: 20
53.131: INFO: gpio_input           Rotate Clockwise: inc_wb
53.132: INFO: gpio_input           Rotate CounterClockwise: dec_wb
53.327: INFO: redis_listener     Drop frame flag reset
53.802: INFO: redis_listener     Framecount is stable
53.803: INFO: redis_controller   Changed value: rec = 0
53.825: INFO: redis_listener     Drop frame detected
53.837: WARNING: gpio_input         No I2C device found at address: 0x49. Quad Rotary Encoder not initialized.
53.839: INFO: redis_controller   Changed value: framecount = 0
53.840: INFO: redis_controller   Changed value: rec = 0
53.841: INFO: simple_gui         HDMI display found. (1920, 1080)
setterm: $TERM is not defined.
Exception in thread Thread-20:
Traceback (most recent call last):
  File "/usr/lib/python3.11/threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "/home/pi/cinemate/src/module/cli_commands.py", line 145, in run
    data = input("\n> ")  # Read the input as a single string
           ^^^^^^^^^^^^^
EOFError: EOF when reading a line
54.109: INFO: main               Stream module loaded
54.110: INFO: mediator           Mediator instantiated
54.115: INFO: analog_controls    Grove Base HAT found!
54.115: INFO: main               --- Initialization Complete ---
54.116: INFO: analog_controls    Setting ISO to 1200
54.117: INFO: cinepi_controller  Setting iso to 1200
54.119: INFO: analog_controls    Setting Shutter Angle to 180
54.119: INFO: redis_controller   Changed value: iso = 1200
54.120: INFO: cinepi_controller  Setting shutter_a_nom to 180
54.120: INFO: redis_controller   Changed value: shutter_a_nom = 180
54.120: INFO: cinepi_controller  Setting shutter_a to 180 degrees
54.121: INFO: redis_controller   Changed value: shutter_a = 180
54.121: INFO: PWMcontroller      Setting PWM with fps=None, shutter_angle=180
54.121: INFO: PWMcontroller      PWM duty cycle calculated and set to 32767
54.121: INFO: PWMcontroller      Updating PWM with cycles=1
54.121: INFO: analog_controls    Setting FPS to 25
54.122: INFO: cinepi_controller  Received set_fps call with value: 25.0
54.122: INFO: cinepi_controller  Retrieved max_fps from Redis: 50
54.122: INFO: cinepi_controller  Calculated safe_value: 25.0
54.122: INFO: cinepi_controller  Setting fps to 25.0
54.122: INFO: cinepi_controller  [1, 45, 90, 135, 172.8, 180, 225, 270, 315, 346.6, 360]
54.123: INFO: analog_controls    Setting White Balance to 4400K
54.124: INFO: cinepi_controller  Set white balance for 4400K: (3.2, 1.6)
54.125: INFO: PWMcontroller      PWM duty cycle set to 49.999237048905165% on pins 19, None
54.125: INFO: redis_controller   Changed value: fps = 25.0
54.125: INFO: PWMcontroller      Setting PWM with fps=25.0, shutter_angle=None
54.125: INFO: PWMcontroller      PWM frequency set to 25.0Hz on pins 19, None
54.138: INFO: PWMcontroller      Shutter angle is None, keeping existing duty cycle.
54.138: INFO: PWMcontroller      Updating PWM with cycles=1
54.166: INFO: PWMcontroller      PWM duty cycle set to 49.999237048905165% on pins 19, None
54.167: INFO: redis_controller   Changed value: fps_last = 25.0
54.167: INFO: redis_controller   Changed value: wb_user = 4400
54.167: INFO: redis_controller   Changed value: cg_rb = 3.2,1.6
54.167: INFO: redis_controller   Changed value: wb_user = 4400
54.325: INFO: redis_listener     Drop frame flag reset
56.789: INFO: analog_controls    Setting FPS to 24
56.790: INFO: cinepi_controller  Received set_fps call with value: 24.0
56.793: INFO: cinepi_controller  Retrieved max_fps from Redis: 50
56.794: INFO: cinepi_controller  Calculated safe_value: 24.0
56.798: INFO: cinepi_controller  Setting fps to 24.0
56.801: INFO: cinepi_controller  [1, 45, 90, 135, 172.8, 180, 225, 270, 315, 346.6, 360]
56.807: INFO: redis_controller   Changed value: fps = 24.0
56.815: INFO: PWMcontroller      Setting PWM with fps=24.0, shutter_angle=None
56.819: INFO: PWMcontroller      PWM frequency set to 24.0Hz on pins 19, None
56.819: INFO: PWMcontroller      Shutter angle is None, keeping existing duty cycle.
56.820: INFO: PWMcontroller      Updating PWM with cycles=1
56.822: INFO: redis_listener     Drop frame detected
56.823: INFO: redis_listener     Drop frame detected
56.834: INFO: PWMcontroller      PWM duty cycle set to 49.999237048905165% on pins 19, None
56.842: INFO: redis_controller   Changed value: fps_last = 24.0
57.326: INFO: redis_listener     Drop frame flag reset
57.338: INFO: redis_listener     Drop frame flag reset
36.279: INFO: main               Graceful shutdown initiated.
37.225: INFO: main               Detected Raspberry Pi model: pi5
37.651: INFO: wifi_hotspot       Wi-Fi hotspot 'CinePi' created successfully with password '11111111' on interface 'wlan0'.
37.682: INFO: redis_controller   Initializing cache with Redis values...
37.684: INFO: PWMcontroller      Initializing PWM on pin 19 (channel 3) with frequency 24Hz and chip 2
37.688: INFO: PWMcontroller      PWM successfully initialized on pin 19 (channel 3) with frequency 24Hz
37.702: INFO: PWMcontroller      Updating PWM with cycles=1
37.708: INFO: PWMcontroller      PWM duty cycle set to 49.999237048905165% on pins 19, None
37.708: INFO: ssd_monitor        SSD monitoring thread started.
37.712: INFO: ssd_monitor        RAW drive mounted at /media/RAW
37.712: INFO: ssd_monitor        Updated space left on SSD: 87.32 GB
37.736: INFO: gpio_output        REC light instantiated on pin 6
37.736: INFO: gpio_output        REC light instantiated on pin 21
37.739: INFO: redis_controller   Changed value: pi_model = pi5
37.740: INFO: redis_controller   Changed value: anamorphic_factor = 1
41.734: INFO: sensor_detect      cinepi-raw output: Available cameras
-----------------
0 : imx585 [3840x2160 MONO] (/base/axi/pcie@120000/rp1/i2c@80000/imx585@1A)
    Modes: 'R12_CSI2P' : 1928x1090 [90.17 fps - (0, 0)/3840x2160 crop]
                         3856x2180 [60.00 fps - (0, 0)/3840x2160 crop]
           'R16' : 1928x1090 [30.00 fps - (0, 0)/3840x2160 crop]
                   3856x2180 [30.00 fps - (0, 0)/3840x2160 crop]


41.735: INFO: sensor_detect      Detected camera model: imx585_mono
41.736: INFO: cinepi_app         Corrected Preview Window -> x=94, y=50, width=1732, height=979, aspect_ratio=1.77
41.736: INFO: redis_controller   Changed value: lores_width = 1273
41.736: INFO: cinepi_app         redis width: 1928
41.737: INFO: redis_controller   Changed value: lores_height = 720
41.737: INFO: cinepi_app         redis height: 1090
41.737: INFO: cinepi_app         CinePi instantiated
41.737: INFO: cinepi_app         Log level set to INFO
41.738: INFO: redis_controller   Changed value: framecount = 0
41.739: INFO: redis_controller   Changed value: rec = 0
41.741: INFO: cinepi_controller  Settings loaded successfully.
41.742: INFO: redis_controller   Changed value: sensor = imx585_mono
41.742: INFO: cinepi_controller  Initialized fps_steps: [1, 2, 4, 8, 12, 16, 18, 24, 25, 33, 40, 50]
41.742: INFO: cinepi_controller  Initialized shutter_a_steps: [1, 45, 90, 135, 172.8, 180, 225, 270, 315, 346.6, 360]
41.743: INFO: cinepi_controller  Loading tuning file from: /home/pi/cinemate/resources/tuning_files/imx585_mono.json
41.743: INFO: redis_controller   Changed value: fps_max = 50
41.743: INFO: redis_controller   Changed value: fps_max = 50
41.747: INFO: cinepi_controller  Tuning data loaded successfully.
41.747: WARNING: cinepi_controller  'rpi.awb' algorithm data not found, using default ct_curve.
41.747: INFO: cinepi_controller  Parsed temperatures: [2000.0, 2200.0, 2400.0, 2600.0, 2800.0, 3000.0, 3200.0, 3400.0, 3600.0, 4100.0, 4600.0, 5100.0, 5600.0, 6100.0, 6600.0, 7100.0, 7600.0, 8100.0, 8600.0]
41.748: INFO: cinepi_controller  Parsed r_values: [0.6331025775790707, 0.5696117366212947, 0.5204264653110015, 0.48148675531667223, 0.450085403501908, 0.42436130159169017, 0.40300023695527337, 0.3850520052612984, 0.36981508088230314, 0.333468007836758, 0.31196097364221376, 0.2961860409294588, 0.2842607232745885, 0.2750265787051251, 0.2677057225584924, 0.2617955199757274, 0.25693714288250125, 0.25287531441063316, 0.24946601483331993]
41.748: INFO: cinepi_controller  Parsed b_values: [0.27424225990946915, 0.3116091368689487, 0.34892179554105873, 0.38565229719076793, 0.42145684622485047, 0.45611835670028816, 0.48950766215198593, 0.5215567075837261, 0.5522397906415475, 0.5909770465167908, 0.6515706327327178, 0.7068178946570284, 0.7564837749584288, 0.8006183524920533, 0.8398879225373039, 0.8746456080032436, 0.905569559506562, 0.9331696750390895, 0.9576820904825795]
41.748: INFO: cinepi_controller  Interpolating for wb step: 3200K, lower index: 6, upper index: 6
41.748: INFO: cinepi_controller  Exact match found at index 6, r_interp: 0.40300023695527337, b_interp: 0.48950766215198593
41.748: INFO: cinepi_controller  Calculated reciprocal cg_rb for 3200K: (2.5, 2.0)
41.748: INFO: cinepi_controller  Interpolating for wb step: 4400K, lower index: 9, upper index: 10
41.748: INFO: cinepi_controller  Interpolated values for 4400K - r_interp: 0.32056378732003143, b_interp: 0.627333198246347
41.748: INFO: cinepi_controller  Calculated reciprocal cg_rb for 4400K: (3.1, 1.6)
41.749: INFO: cinepi_controller  Interpolating for wb step: 5600K, lower index: 12, upper index: 12
41.749: INFO: cinepi_controller  Exact match found at index 12, r_interp: 0.2842607232745885, b_interp: 0.7564837749584288
41.749: INFO: cinepi_controller  Calculated reciprocal cg_rb for 5600K: (3.5, 1.3)
41.749: INFO: cinepi_controller  Initialized wb_cg_rb_array: {3200: (2.5, 2.0), 4400: (3.1, 1.6), 5600: (3.5, 1.3)}
41.749: INFO: cinepi_controller  Settings loaded successfully.
41.750: INFO: cinepi_controller  Received set_fps call with value: 24.0
41.750: INFO: cinepi_controller  Retrieved max_fps from Redis: 50
41.750: INFO: cinepi_controller  Calculated safe_value: 24.0
41.750: INFO: cinepi_controller  Setting fps to 24.0
41.750: INFO: cinepi_controller  Generated flicker-free shutter angles for fps=24.0, hz=50: [250.0, 187.5, 150.0, 125.0, 107.1, 93.8, 83.3]
41.751: INFO: cinepi_controller  Generated flicker-free shutter angles for fps=24.0, hz=60: [300.0, 225.0, 180.0, 150.0, 128.6, 112.5, 100.0]
41.751: INFO: redis_controller   Changed value: fps = 24.0
41.751: INFO: cinepi_controller  Updated shutter angles (user-defined + flicker-free): [1, 45, 83.3, 90, 93.8, 100.0, 107.1, 112.5, 125.0, 128.6, 135, 150.0, 172.8, 180, 187.5, 225, 250.0, 270, 300.0, 315, 346.6, 360]
41.751: INFO: cinepi_controller  Generated flicker-free shutter angles for fps=24.0, hz=50: [250.0, 187.5, 150.0, 125.0, 107.1, 93.8, 83.3]
41.751: INFO: cinepi_controller  Generated flicker-free shutter angles for fps=24.0, hz=60: [300.0, 225.0, 180.0, 150.0, 128.6, 112.5, 100.0]
41.751: INFO: cinepi_controller  Updated shutter angles (user-defined + flicker-free): [1, 45, 83.3, 90, 93.8, 100.0, 107.1, 112.5, 125.0, 128.6, 135, 150.0, 172.8, 180, 187.5, 225, 250.0, 270, 300.0, 315, 346.6, 360]
41.752: INFO: cinepi_controller  Initialized fps: 24
41.752: INFO: redis_controller   Changed value: fps_last = 24.0
41.753: INFO: redis_controller   Changed value: fps_last = 24.0
41.754: INFO: redis_controller   Changed value: sensor_mode = 0
41.755: INFO: cinepi_controller  Resolution set to mode 0, height: 1090, width: 1928, gui_layout: 0
41.755: INFO: redis_controller   Changed value: height = 1090
41.755: INFO: redis_controller   Changed value: width = 1928
41.755: INFO: redis_controller   Changed value: bit_depth = 12
41.756: INFO: redis_controller   Changed value: fps_max = 50
41.756: INFO: redis_controller   Changed value: gui_layout = 0
41.756: INFO: redis_controller   Changed value: file_size = 3.1
41.756: INFO: redis_controller   Changed value: cam_init = 1
42.255: INFO: cinepi_app         Restarting CinePi instance.
42.256: INFO: redis_controller   Changed value: fps_last = 24.0
42.520: INFO: sensor_detect      cinepi-raw output: Available cameras
-----------------
0 : imx585 [3840x2160 MONO] (/base/axi/pcie@120000/rp1/i2c@80000/imx585@1A)
    Modes: 'R12_CSI2P' : 1928x1090 [90.17 fps - (0, 0)/3840x2160 crop]
                         3856x2180 [60.00 fps - (0, 0)/3840x2160 crop]
           'R16' : 1928x1090 [30.00 fps - (0, 0)/3840x2160 crop]
                   3856x2180 [30.00 fps - (0, 0)/3840x2160 crop]


42.520: INFO: sensor_detect      Detected camera model: imx585_mono
42.521: INFO: cinepi_app         Corrected Preview Window -> x=94, y=50, width=1732, height=979, aspect_ratio=1.77
42.521: INFO: cinepi_app         Issuing ['cinepi-raw', '--mode', '1928:1090:12:U', '--width', '1928', '--height', '1090', '--lores-width', '1273', '--lores-height', '720', '-p', '94,50,1732,979', '--post-process-file', '/home/pi/post-processing.json', '--shutter', '20000', '--awbgains', '3.1,1.6', '--awb', 'auto']
42.521: INFO: redis_controller   Changed value: lores_width = 1273
42.522: INFO: redis_controller   Changed value: lores_height = 720
42.523: INFO: cinepi_controller  Received set_fps call with value: 24.0
42.524: INFO: redis_controller   Changed value: sensor = imx585_mono
42.524: INFO: cinepi_controller  Retrieved max_fps from Redis: 50
42.524: INFO: cinepi_controller  Calculated safe_value: 24.0
42.524: INFO: cinepi_controller  Setting fps to 24.0
42.525: INFO: redis_controller   Changed value: fps = 24.0
42.525: INFO: cinepi_controller  Generated flicker-free shutter angles for fps=24.0, hz=50: [250.0, 187.5, 150.0, 125.0, 107.1, 93.8, 83.3]
42.525: INFO: cinepi_controller  Generated flicker-free shutter angles for fps=24.0, hz=60: [300.0, 225.0, 180.0, 150.0, 128.6, 112.5, 100.0]
42.525: INFO: cinepi_controller  Updated shutter angles (user-defined + flicker-free): [1, 45, 83.3, 90, 93.8, 100.0, 107.1, 112.5, 125.0, 128.6, 135, 150.0, 172.8, 180, 187.5, 225, 250.0, 270, 300.0, 315, 346.6, 360]
42.526: INFO: cinepi_controller  Generated flicker-free shutter angles for fps=24.0, hz=50: [250.0, 187.5, 150.0, 125.0, 107.1, 93.8, 83.3]
42.526: INFO: cinepi_controller  Generated flicker-free shutter angles for fps=24.0, hz=60: [300.0, 225.0, 180.0, 150.0, 128.6, 112.5, 100.0]
42.526: INFO: cinepi_controller  Updated shutter angles (user-defined + flicker-free): [1, 45, 83.3, 90, 93.8, 100.0, 107.1, 112.5, 125.0, 128.6, 135, 150.0, 172.8, 180, 187.5, 225, 250.0, 270, 300.0, 315, 346.6, 360]
42.527: INFO: cinepi_controller  Initialized fps_steps: [1, 2, 4, 8, 12, 16, 18, 24, 25, 33, 40, 50]
42.527: INFO: cinepi_controller  Generated flicker-free shutter angles for fps=24, hz=50: [250.0, 187.5, 150.0, 125.0, 107.1, 93.8, 83.3]
42.527: INFO: cinepi_controller  Generated flicker-free shutter angles for fps=24, hz=60: [300.0, 225.0, 180.0, 150.0, 128.6, 112.5, 100.0]
42.528: INFO: cinepi_controller  Updated shutter angles (user-defined + flicker-free): [1, 45, 83.3, 90, 93.8, 100.0, 107.1, 112.5, 125.0, 128.6, 135, 150.0, 172.8, 180, 187.5, 225, 250.0, 270, 300.0, 315, 346.6, 360]
42.528: INFO: redis_controller   Changed value: fps_last = 24.0
42.528: INFO: redis_controller   Changed value: fps_max = 50
42.529: INFO: redis_controller   Changed value: sensor = imx585_mono
42.950: INFO: redis_listener     Framecount is changing
42.951: INFO: redis_controller   Changed value: rec = 1
43.529: INFO: gpio_input         Button on pin 5:
43.529: INFO: gpio_input           Press: rec
43.530: INFO: redis_controller   Changed value: fps = 24.0
43.559: INFO: gpio_input         Button on pin 13:
43.559: INFO: gpio_input           Press: inc_iso
43.560: INFO: gpio_input         Button on pin 10:
43.560: INFO: gpio_input           Press: dec_iso
43.561: INFO: gpio_input         Button on pin 16:
43.561: INFO: gpio_input           Press: set_fps_double
43.562: INFO: gpio_input         Button on pin 26:
43.562: INFO: gpio_input           Single Click: set_resolution
43.562: INFO: gpio_input           Double Click: restart_camera
43.562: INFO: gpio_input           Triple Click: reboot
43.562: INFO: gpio_input           Hold: unmount
43.563: INFO: gpio_input         Two-way switch on pin 27:
43.563: INFO: gpio_input           State ON action: set_all_lock
43.563: INFO: gpio_input           State OFF action: set_all_lock
44.063: INFO: gpio_input         Detected initial state: on for switch on pin 27
44.064: INFO: cinepi_controller  ISO lock False
44.064: INFO: cinepi_controller  Shutter angle lock False
44.064: INFO: cinepi_controller  FPS lock False
44.064: INFO: gpio_input         Executed action set_all_lock(0)
44.064: INFO: gpio_input         Initialized SimpleSwitch on pin 27 (pull_up=True, debounce=0.1s)
44.064: INFO: gpio_input         Two-way switch on pin 24:
44.064: INFO: gpio_input           State ON action: set_trigger_mode
44.064: INFO: gpio_input           State OFF action: set_trigger_mode
44.169: INFO: redis_listener     Drop frame detected
44.565: INFO: gpio_input         Detected initial state: off for switch on pin 24
44.565: ERROR: gpio_input         Error executing set_trigger_mode: Unsupported camera model.
44.566: INFO: gpio_input         Initialized SimpleSwitch on pin 24 (pull_up=True, debounce=0.1s)
44.566: INFO: gpio_input         Two-way switch on pin 22:
44.566: INFO: gpio_input           State ON action: set_shutter_a_sync_mode
44.566: INFO: gpio_input           State OFF action: set_shutter_a_sync_mode
44.669: INFO: redis_listener     Drop frame flag reset
44.752: INFO: redis_listener     Framecount is stable
44.753: INFO: redis_controller   Changed value: rec = 0
45.067: INFO: gpio_input         Detected initial state: on for switch on pin 22
45.067: INFO: cinepi_controller  Shutter Sync Mode deactivated
45.067: INFO: cinepi_controller  Shutter sync disabled
45.067: INFO: gpio_input         Executed action set_shutter_a_sync_mode(0)
45.067: INFO: gpio_input         Initialized SimpleSwitch on pin 22 (pull_up=True, debounce=0.1s)
45.067: INFO: gpio_input         Rotary Encoder with Button on CLK pin: 9, DT pin: 11
45.067: INFO: gpio_input           Rotate Clockwise: inc_iso
45.067: INFO: gpio_input           Rotate CounterClockwise: dec_iso
45.069: INFO: gpio_input         Rotary Encoder with Button on CLK pin: 23, DT pin: 25
45.069: INFO: gpio_input           Rotate Clockwise: inc_shutter_a_nom
45.069: INFO: gpio_input           Rotate CounterClockwise: dec_shutter_a_nom
45.070: INFO: gpio_input         Rotary Encoder with Button on CLK pin: 8, DT pin: 7
45.070: INFO: gpio_input           Rotate Clockwise: inc_fps
45.070: INFO: gpio_input           Rotate CounterClockwise: dec_fps
45.071: INFO: gpio_input         Rotary Encoder with Button on CLK pin: 12, DT pin: 20
45.071: INFO: gpio_input           Rotate Clockwise: inc_wb
45.071: INFO: gpio_input           Rotate CounterClockwise: dec_wb
45.085: WARNING: gpio_input         No I2C device found at address: 0x49. Quad Rotary Encoder not initialized.
45.088: INFO: redis_controller   Changed value: framecount = 0
45.089: INFO: redis_controller   Changed value: rec = 0
45.090: INFO: simple_gui         HDMI display found. (1920, 1080)
setterm: $TERM is not defined.
Exception in thread Thread-20:
Traceback (most recent call last):
  File "/usr/lib/python3.11/threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "/home/pi/cinemate/src/module/cli_commands.py", line 146, in run
    data = input("\n> ")  # Read the input as a single string
           ^^^^^^^^^^^^^
EOFError: EOF when reading a line
45.364: INFO: main               Stream module loaded
45.364: INFO: mediator           Mediator instantiated
45.370: INFO: analog_controls    Grove Base HAT found!
45.370: INFO: main               --- Initialization Complete ---
45.371: INFO: analog_controls    Setting ISO to 2500
45.372: INFO: cinepi_controller  Setting iso to 2500
45.373: INFO: analog_controls    Setting Shutter Angle to 125.0
45.374: INFO: redis_controller   Changed value: iso = 2500
45.375: INFO: cinepi_controller  Setting shutter_a_nom to 125.0 (closest match from dynamic list)
45.376: INFO: cinepi_controller  Setting shutter_a to 125.0 degrees
45.377: INFO: redis_controller   Changed value: shutter_a_nom = 125.0
45.377: INFO: redis_controller   Changed value: shutter_a = 125.0
45.378: INFO: analog_controls    Setting FPS to 24
45.388: INFO: PWMcontroller      Setting PWM with fps=None, shutter_angle=125.0
45.388: INFO: cinepi_controller  Received set_fps call with value: 24.0
45.388: INFO: PWMcontroller      PWM duty cycle calculated and set to 22755
45.388: INFO: cinepi_controller  Retrieved max_fps from Redis: 50
45.389: INFO: PWMcontroller      Updating PWM with cycles=1
45.389: INFO: cinepi_controller  Calculated safe_value: 24.0
45.389: INFO: cinepi_controller  Setting fps to 24.0
45.390: INFO: cinepi_controller  Generated flicker-free shutter angles for fps=24.0, hz=50: [250.0, 187.5, 150.0, 125.0, 107.1, 93.8, 83.3]
45.390: INFO: cinepi_controller  Generated flicker-free shutter angles for fps=24.0, hz=60: [300.0, 225.0, 180.0, 150.0, 128.6, 112.5, 100.0]
45.390: INFO: cinepi_controller  Updated shutter angles (user-defined + flicker-free): [1, 45, 83.3, 90, 93.8, 100.0, 107.1, 112.5, 125.0, 128.6, 135, 150.0, 172.8, 180, 187.5, 225, 250.0, 270, 300.0, 315, 346.6, 360]
45.390: INFO: cinepi_controller  Generated flicker-free shutter angles for fps=24.0, hz=50: [250.0, 187.5, 150.0, 125.0, 107.1, 93.8, 83.3]
45.390: INFO: cinepi_controller  Generated flicker-free shutter angles for fps=24.0, hz=60: [300.0, 225.0, 180.0, 150.0, 128.6, 112.5, 100.0]
45.390: INFO: cinepi_controller  Updated shutter angles (user-defined + flicker-free): [1, 45, 83.3, 90, 93.8, 100.0, 107.1, 112.5, 125.0, 128.6, 135, 150.0, 172.8, 180, 187.5, 225, 250.0, 270, 300.0, 315, 346.6, 360]
45.391: INFO: analog_controls    Setting White Balance to 4400K
45.392: INFO: cinepi_controller  Set white balance for 4400K: (3.1, 1.6)
45.416: INFO: PWMcontroller      PWM duty cycle set to 34.721904325932705% on pins 19, None
45.417: INFO: redis_controller   Changed value: fps = 24.0
45.418: INFO: PWMcontroller      Setting PWM with fps=24.0, shutter_angle=None
45.418: INFO: PWMcontroller      PWM frequency set to 24.0Hz on pins 19, None
45.418: INFO: PWMcontroller      Shutter angle is None, keeping existing duty cycle.
45.418: INFO: PWMcontroller      Updating PWM with cycles=1
45.459: INFO: PWMcontroller      PWM duty cycle set to 34.721904325932705% on pins 19, None
45.463: INFO: redis_controller   Changed value: fps_last = 24.0
45.465: INFO: redis_controller   Changed value: wb_user = 4400
45.467: INFO: redis_controller   Changed value: cg_rb = 3.1,1.6
45.469: INFO: redis_controller   Changed value: wb_user = 4400
44.823: INFO: main               Graceful shutdown initiated.
