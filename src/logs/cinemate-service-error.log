22.380: INFO: main               Contents of /home/pi/cinemate/src/logs/cinemate-service-error.log have been erased.
22.863: INFO: wifi_hotspot       Wi-Fi hotspot 'CinePi' created successfully with password '11111111' on interface 'wlan0'.
22.886: INFO: redis_controller   Initializing cache with Redis values...
22.890: INFO: PWMcontroller      Initializing PWM on pin 19 (channel 3) with frequency 24Hz and chip 2
22.896: INFO: PWMcontroller      PWM successfully initialized on pin 19 (channel 3) with frequency 24Hz
22.897: INFO: PWMcontroller      Updating PWM with cycles=1
22.916: INFO: PWMcontroller      PWM duty cycle set to 49.999237048905165% on pins 19, None
26.240: INFO: sensor_detect      Detected camera model: imx477
26.409: INFO: sensor_detect      cinepi-raw output: Available cameras
-----------------
0 : imx477 [4056x3040 12-bit RGGB] (/base/axi/pcie@120000/rp1/i2c@80000/imx477@1a)
    Modes: 'SRGGB10_CSI2P' : 1332x990 [120.05 fps - (696, 528)/2664x1980 crop]
           'SRGGB12_CSI2P' : 2028x1080 [50.03 fps - (0, 440)/4056x2160 crop]
                             2028x1520 [40.01 fps - (0, 0)/4056x3040 crop]
                             4056x3040 [10.00 fps - (0, 0)/4056x3040 crop]


26.410: INFO: sensor_detect      Detected camera model: imx477
26.410: INFO: cinepi_app         CinePi instantiated
26.410: INFO: cinepi_app         Log level set to INFO
26.410: INFO: cinepi_app         Active filters set to: 
26.410: INFO: ssd_monitor        SSD monitoring thread started.
26.414: INFO: ssd_monitor        RAW drive mounted at /media/RAW
26.414: INFO: ssd_monitor        Updated space left on SSD: 462.78 GB
26.414: INFO: gpio_output        REC light instantiated on pin 6
26.415: INFO: gpio_output        REC light instantiated on pin 21
26.418: INFO: redis_controller   Changed value: framecount = 0
26.419: INFO: redis_controller   Changed value: rec = 0
26.420: INFO: redis_controller   Changed value: sensor = imx477
26.421: INFO: redis_controller   Changed value: fps_max = 120
26.421: INFO: cinepi_controller  Settings loaded successfully.
26.421: INFO: cinepi_controller  Initialized fps_steps: [1, 2, 4, 8, 12, 16, 18, 24, 25, 33, 40, 50]
26.421: INFO: redis_controller   Changed value: fps_max = 120
26.422: INFO: cinepi_controller  Initialized shutter_a_steps: [1, 45, 90, 135, 172.8, 180, 225, 270, 315, 346.6, 360]
26.422: INFO: cinepi_controller  Loading tuning file from: /home/pi/libcamera/src/ipa/rpi/pisp/data/imx477.json
26.426: INFO: dmesg_monitor      Disk attached.
26.440: INFO: cinepi_controller  Tuning data loaded successfully.
26.440: INFO: cinepi_controller  'rpi.awb' data found: {'priors': [{'lux': 0, 'prior': [2000, 1.0, 3000, 0.0, 13000, 0.0]}, {'lux': 800, 'prior': [2000, 0.0, 6000, 2.0, 13000, 2.0]}, {'lux': 1500, 'prior': [2000, 0.0, 4000, 1.0, 6000, 6.0, 6500, 7.0, 7000, 1.0, 13000, 1.0]}], 'modes': {'auto': {'lo': 2500, 'hi': 7700}, 'incandescent': {'lo': 2500, 'hi': 3000}, 'tungsten': {'lo': 3000, 'hi': 3500}, 'fluorescent': {'lo': 4000, 'hi': 4700}, 'indoor': {'lo': 3000, 'hi': 5000}, 'daylight': {'lo': 5500, 'hi': 6500}, 'cloudy': {'lo': 7000, 'hi': 8000}}, 'bayes': 1, 'ct_curve': [2850.0, 0.4307, 0.3957, 2960.0, 0.4159, 0.4313, 3580.0, 0.3771, 0.5176, 4559.0, 0.3031, 0.6573, 5881.0, 0.2809, 0.6942, 7600.0, 0.2263, 0.7762], 'sensitivity_r': 1.0, 'sensitivity_b': 1.0, 'transverse_pos': 0.02634, 'transverse_neg': 0.02255}
26.440: INFO: cinepi_controller  Retrieved ct_curve: [2850.0, 0.4307, 0.3957, 2960.0, 0.4159, 0.4313, 3580.0, 0.3771, 0.5176, 4559.0, 0.3031, 0.6573, 5881.0, 0.2809, 0.6942, 7600.0, 0.2263, 0.7762]
26.440: INFO: cinepi_controller  Parsed temperatures: [2850.0, 2960.0, 3580.0, 4559.0, 5881.0, 7600.0]
26.441: INFO: cinepi_controller  Parsed r_values: [0.4307, 0.4159, 0.3771, 0.3031, 0.2809, 0.2263]
26.441: INFO: cinepi_controller  Parsed b_values: [0.3957, 0.4313, 0.5176, 0.6573, 0.6942, 0.7762]
26.441: INFO: cinepi_controller  Interpolating for wb step: 3200K, lower index: 1, upper index: 2
26.441: INFO: cinepi_controller  Interpolated values for 3200K - r_interp: 0.4008806451612903, b_interp: 0.4647064516129032
26.441: INFO: cinepi_controller  Calculated reciprocal cg_rb for 3200K: (2.5, 2.2)
26.441: INFO: cinepi_controller  Interpolating for wb step: 4400K, lower index: 2, upper index: 3
26.441: INFO: cinepi_controller  Interpolated values for 4400K - r_interp: 0.31511838610827375, b_interp: 0.6346112359550562
26.441: INFO: cinepi_controller  Calculated reciprocal cg_rb for 4400K: (3.2, 1.6)
26.441: INFO: cinepi_controller  Interpolating for wb step: 5600K, lower index: 3, upper index: 4
26.441: INFO: cinepi_controller  Interpolated values for 5600K - r_interp: 0.28561875945537063, b_interp: 0.686356656580938
26.441: INFO: cinepi_controller  Calculated reciprocal cg_rb for 5600K: (3.5, 1.5)
26.441: INFO: cinepi_controller  Initialized wb_cg_rb_array: {3200: (2.5, 2.2), 4400: (3.2, 1.6), 5600: (3.5, 1.5)}
26.442: INFO: cinepi_controller  Settings loaded successfully.
26.443: INFO: redis_controller   Changed value: frame_duration = 41666
26.443: INFO: redis_controller   Changed value: fps = 24
26.444: INFO: redis_controller   Changed value: fps_user = 24
26.445: INFO: redis_controller   Changed value: fps = 24
26.445: INFO: redis_controller   Changed value: fps_last = 24
26.446: INFO: redis_controller   Changed value: sensor_mode = 2
26.446: INFO: cinepi_controller  Resolution set to mode 2, height: 990, width: 1332, gui_layout: 0
26.446: INFO: redis_controller   Changed value: height = 990
26.446: INFO: redis_controller   Changed value: width = 1332
26.447: INFO: redis_controller   Changed value: bit_depth = 10
26.447: INFO: redis_controller   Changed value: fps_max = 120
26.447: INFO: redis_controller   Changed value: gui_layout = 0
26.447: INFO: redis_controller   Changed value: file_size = 2.8
26.447: INFO: redis_controller   Changed value: cam_init = 1
26.946: INFO: cinepi_app         Restarting CinePi instance.
26.947: INFO: redis_controller   Changed value: fps_last = 24
27.100: INFO: sensor_detect      cinepi-raw output: Available cameras
-----------------
0 : imx477 [4056x3040 12-bit RGGB] (/base/axi/pcie@120000/rp1/i2c@80000/imx477@1a)
    Modes: 'SRGGB10_CSI2P' : 1332x990 [120.05 fps - (696, 528)/2664x1980 crop]
           'SRGGB12_CSI2P' : 2028x1080 [50.03 fps - (0, 440)/4056x2160 crop]
                             2028x1520 [40.01 fps - (0, 0)/4056x3040 crop]
                             4056x3040 [10.00 fps - (0, 0)/4056x3040 crop]


27.100: INFO: sensor_detect      Detected camera model: imx477
27.100: INFO: cinepi_app         Issuing ['cinepi-raw', '--mode', '1332:990:10:U', '--width', '1332', '--height', '990', '--lores-width', '1280', '--lores-height', '720', '-p', '0,30,1920,1020', '--post-process-file', '/home/pi/post-processing.json', '--shutter', '20000', '--awbgains', '1,1']
27.102: INFO: redis_controller   Changed value: sensor = imx477
27.102: INFO: cinepi_controller  Received set_fps call with value: 24.0
27.102: INFO: cinepi_controller  Retrieved max_fps from Redis: 120
27.102: INFO: cinepi_controller  Calculated safe_value: 24.0
27.104: INFO: cinepi_controller  Setting fps to 24.0
27.104: INFO: redis_controller   Changed value: frame_duration = 41666
27.104: INFO: cinepi_controller  [1, 45, 90, 135, 172.8, 180, 225, 270, 315, 346.6, 360]
27.105: INFO: cinepi_controller  Initialized fps_steps: [1, 2, 4, 8, 12, 16, 18, 24, 25, 33, 40, 50]
27.105: INFO: redis_controller   Changed value: fps = 24.0
27.105: INFO: cinepi_controller  [1, 45, 90, 135, 172.8, 180, 225, 270, 315, 346.6, 360]
27.105: INFO: redis_controller   Changed value: fps_user = 24.0
27.106: INFO: gpio_input         Button on pin 4:
27.106: INFO: redis_controller   Changed value: fps = 24.0
27.106: INFO: gpio_input           Press: rec
27.107: INFO: redis_controller   Changed value: fps_max = 120
27.107: INFO: redis_controller   Changed value: sensor = imx477
27.117: INFO: gpio_input         Button on pin 5:
27.118: INFO: gpio_input           Press: rec
27.119: INFO: gpio_input         Button on pin 27:
27.119: INFO: gpio_input           Press: inc_iso
27.120: INFO: gpio_input         Button on pin 10:
27.120: INFO: gpio_input           Press: dec_iso
27.121: INFO: gpio_input         Button on pin 22:
27.121: INFO: gpio_input           Press: set_all_lock
27.122: INFO: gpio_input         Button on pin 12:
27.122: INFO: gpio_input           Single Click: set_shutter_a_sync_mode
27.123: INFO: gpio_input         Button on pin 1:
27.123: INFO: gpio_input           Single Click: set_fps_double
27.123: INFO: gpio_input           Double Click: set_trigger_mode
27.124: INFO: gpio_input         Button on pin 13:
27.124: INFO: gpio_input           Single Click: set_resolution
27.124: INFO: gpio_input           Double Click: restart_camera
27.124: INFO: gpio_input           Triple Click: reboot
27.125: INFO: gpio_input           Hold: unmount
27.125: INFO: gpio_input         Rotary Encoder with Button on CLK pin: 9, DT pin: 11
27.126: INFO: gpio_input           Rotate Clockwise: inc_iso
27.126: INFO: gpio_input           Rotate CounterClockwise: dec_iso
27.127: INFO: gpio_input         Rotary Encoder with Button on CLK pin: 24, DT pin: 25
27.127: INFO: gpio_input           Rotate Clockwise: inc_shutter_a_nom
27.127: INFO: gpio_input           Rotate CounterClockwise: dec_shutter_a_nom
27.128: INFO: gpio_input         Rotary Encoder with Button on CLK pin: 0, DT pin: 8
27.128: INFO: gpio_input           Rotate Clockwise: inc_fps
27.128: INFO: gpio_input           Rotate CounterClockwise: dec_fps
27.129: INFO: gpio_input         Rotary Encoder with Button on CLK pin: 16, DT pin: 20
27.129: INFO: gpio_input           Rotate Clockwise: inc_wb
27.129: INFO: gpio_input           Rotate CounterClockwise: dec_wb
27.141: WARNING: gpio_input         No I2C device found at address: 0x49. Quad Rotary Encoder not initialized.
27.142: INFO: redis_controller   Changed value: framecount = 0
27.143: INFO: redis_controller   Changed value: rec = 0
27.144: INFO: simple_gui         HDMI display found. (1920, 1080)
setterm: $TERM is not defined.
Exception in thread Thread-19:
Traceback (most recent call last):
  File "/usr/lib/python3.11/threading.py", line 1038, in _bootstrap_inner
    self.run()
  File "/home/pi/cinemate/src/module/cli_commands.py", line 171, in run
    data = input("\n> ")  # Read the input as a single string
           ^^^^^^^^^^^^^
EOFError: EOF when reading a line
27.465: INFO: main               Stream module loaded
27.466: INFO: mediator           Mediator instantiated
27.480: INFO: redis_listener     Framecount is changing
27.481: INFO: redis_controller   Changed value: rec = 1
27.481: INFO: mediator           Recording started!
27.481: INFO: gpio_output        GPIO 6 set to HIGH
27.481: INFO: gpio_output        GPIO 21 set to HIGH
28.043: WARNING: redis_listener     Not enough sensor timestamps to calculate average framerate.
28.044: WARNING: redis_listener     Not enough sensor timestamps to calculate average framerate.
28.044: INFO: redis_listener     Drop frame detected
28.044: INFO: redis_listener     Drop frame detected
28.490: INFO: main               Loaded WB steps: [3200, 4400, 5600]
28.492: INFO: analog_controls    Grove Base HAT found!
28.545: INFO: redis_listener     Drop frame flag reset
28.545: INFO: redis_listener     Drop frame flag reset
28.622: INFO: redis_listener     Framecount is stable
28.623: INFO: redis_controller   Changed value: rec = 0
28.623: INFO: mediator           Recording stopped!
28.623: INFO: gpio_output        GPIO 6 set to LOW
28.623: INFO: gpio_output        GPIO 21 set to LOW
28.785: INFO: cinepi_controller  Trigger mode set to 0
28.786: INFO: cinepi_app         Restarting CinePi instance.
28.789: INFO: redis_controller   Changed value: trigger_mode = 0
28.789: INFO: cinepi_app         Shutting down CinePi instance.
28.792: INFO: redis_controller   Changed value: fps_last = 24.0
28.793: INFO: redis_controller   Changed value: fps_last = 24.0
28.827: INFO: cinepi_app         CinePi instance shut down.
29.031: INFO: sensor_detect      cinepi-raw output: Available cameras
-----------------
0 : imx477 [4056x3040 12-bit RGGB] (/base/axi/pcie@120000/rp1/i2c@80000/imx477@1a)
    Modes: 'SRGGB10_CSI2P' : 1332x990 [120.05 fps - (696, 528)/2664x1980 crop]
           'SRGGB12_CSI2P' : 2028x1080 [50.03 fps - (0, 440)/4056x2160 crop]
                             2028x1520 [40.01 fps - (0, 0)/4056x3040 crop]
                             4056x3040 [10.00 fps - (0, 0)/4056x3040 crop]


29.033: INFO: sensor_detect      Detected camera model: imx477
29.033: INFO: cinepi_app         Issuing ['cinepi-raw', '--mode', '1332:990:10:U', '--width', '1332', '--height', '990', '--lores-width', '1280', '--lores-height', '720', '-p', '0,30,1920,1020', '--post-process-file', '/home/pi/post-processing.json', '--shutter', '20000', '--awbgains', '1,1']
29.042: INFO: main               Trigger mode set to 0 using cinepi_controller.
29.042: INFO: main               Initialized WB steps: [3200, 4400, 5600]
29.042: INFO: redis_controller   Changed value: sensor = imx477
29.046: INFO: cinepi_controller  Set white balance for 3200K: (2.5, 2.2)
29.047: INFO: main               --- initialization complete
29.047: INFO: redis_controller   Changed value: cg_rb = 2.5,2.2
29.050: INFO: redis_controller   Changed value: wb_user = 3200
29.389: INFO: redis_listener     Framecount is changing
29.390: INFO: redis_listener     Framecount is changing
29.390: INFO: redis_controller   Changed value: rec = 1
29.390: INFO: mediator           Recording started!
29.391: INFO: gpio_output        GPIO 6 set to HIGH
29.391: INFO: gpio_output        GPIO 21 set to HIGH
29.391: INFO: redis_controller   Changed value: rec = 1
29.391: INFO: mediator           Recording started!
29.391: INFO: gpio_output        GPIO 6 set to HIGH
29.391: INFO: gpio_output        GPIO 21 set to HIGH
29.981: INFO: redis_listener     Drop frame detected
29.991: INFO: redis_listener     Drop frame detected
30.485: INFO: redis_listener     Drop frame flag reset
30.493: INFO: redis_listener     Drop frame flag reset
30.566: INFO: redis_listener     Framecount is stable
30.571: INFO: redis_controller   Changed value: rec = 0
30.572: INFO: redis_listener     Framecount is stable
30.578: INFO: mediator           Recording stopped!
30.578: INFO: gpio_output        GPIO 6 set to LOW
30.579: INFO: gpio_output        GPIO 21 set to LOW
30.579: INFO: redis_controller   Changed value: rec = 0
30.579: INFO: mediator           Recording stopped!
30.579: INFO: gpio_output        GPIO 6 set to LOW
30.579: INFO: gpio_output        GPIO 21 set to LOW
31.459: INFO: redis_controller   Changed value: frame_duration = 41666
31.474: INFO: redis_controller   Changed value: fps = 24
31.478: INFO: PWMcontroller      Setting PWM with fps=24, shutter_angle=None
31.487: INFO: PWMcontroller      PWM frequency set to 24.0Hz on pins 19, None
31.488: INFO: PWMcontroller      Shutter angle is None, keeping existing duty cycle.
31.489: INFO: PWMcontroller      Updating PWM with cycles=1
31.500: INFO: PWMcontroller      PWM duty cycle set to 49.999237048905165% on pins 19, None
31.504: INFO: redis_controller   Changed value: fps_user = 24
31.506: INFO: redis_controller   Changed value: fps = 24
31.507: INFO: PWMcontroller      Setting PWM with fps=24, shutter_angle=None
31.507: INFO: PWMcontroller      PWM frequency set to 24.0Hz on pins 19, None
31.508: INFO: PWMcontroller      Shutter angle is None, keeping existing duty cycle.
31.508: INFO: PWMcontroller      Updating PWM with cycles=1
31.541: INFO: PWMcontroller      PWM duty cycle set to 49.999237048905165% on pins 19, None
