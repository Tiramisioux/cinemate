00.486: INFO: main               Contents of /home/pi/cinemate/src/logs/system.log have been erased.
00.487: INFO: main               Contents of /home/pi/cinemate/src/logs/cinemate-service.log have been erased.
00.488: INFO: main               Contents of /home/pi/cinemate/src/logs/cinemate-service-error.log have been erased.
00.532: INFO: wifi_hotspot       WiFi hotspot is already active. Skipping creation.
00.538: INFO: redis_controller   Initializing cache with Redis values...
00.550: INFO: PWMcontroller      Initializing PWM on pin 19 (channel 3) with frequency 24Hz and chip 2
00.551: ERROR: PWMcontroller      Failed to initialize PWM on pin 19: Need to add 'dtoverlay=pwm-2chan' to /boot/config.txt and reboot
00.551: INFO: redis_controller   Changed value: pi_model = pi4
00.552: INFO: PWMcontroller      Updating PWM with cycles=1
00.583: INFO: PWMcontroller      PWM duty cycle set to 49.999237048905165% on pins 19, None
00.968: INFO: sensor_detect      Detected camera model: imx296
01.320: INFO: sensor_detect      cinepi-raw output: Available cameras
-----------------
0 : imx296 [1456x1088 10-bit RGGB] (/base/soc/i2c0mux/i2c@1/imx296@1a)
    Modes: 'SRGGB10_CSI2P' : 1456x1088 [60.38 fps - (0, 0)/1456x1088 crop]


01.321: INFO: sensor_detect      Detected camera model: imx296
01.322: INFO: cinepi_app         CinePi instantiated
01.322: INFO: cinepi_app         Log level set to INFO
01.322: INFO: cinepi_app         Active filters set to: 
01.323: INFO: ssd_monitor        SSD monitoring thread started.
01.329: INFO: gpio_output        REC light instantiated on pin 6
01.329: INFO: gpio_output        REC light instantiated on pin 21
01.335: INFO: redis_controller   Changed value: framecount = 0
01.336: INFO: redis_controller   Changed value: rec = 0
01.342: INFO: redis_controller   Changed value: sensor = imx296
01.344: INFO: redis_controller   Changed value: fps_max = 60
01.345: INFO: cinepi_controller  Settings loaded successfully.
01.346: INFO: cinepi_controller  Initialized fps_steps: [1, 2, 4, 8, 12, 16, 18, 24, 25, 33, 40, 50]
01.347: INFO: redis_controller   Changed value: fps_max = 60
01.347: INFO: cinepi_controller  Initialized shutter_a_steps: [1, 45, 90, 135, 172.8, 180, 225, 270, 315, 346.6, 360]
01.348: INFO: cinepi_controller  Loading tuning file from: /home/pi/cinemate/resources/tuning_files/imx296.json
01.351: INFO: cinepi_controller  Tuning data loaded successfully.
01.351: INFO: cinepi_controller  'rpi.awb' data found: {'priors': [{'lux': 0, 'prior': [2000, 1.0, 3000, 0.0, 13000, 0.0]}, {'lux': 800, 'prior': [2000, 0.0, 6000, 2.0, 13000, 2.0]}, {'lux': 1500, 'prior': [2000, 0.0, 4000, 1.0, 6000, 6.0, 6500, 7.0, 7000, 1.0, 13000, 1.0]}], 'modes': {'auto': {'lo': 2500, 'hi': 7700}, 'incandescent': {'lo': 2500, 'hi': 3000}, 'tungsten': {'lo': 3000, 'hi': 3500}, 'fluorescent': {'lo': 4000, 'hi': 4700}, 'indoor': {'lo': 3000, 'hi': 5000}, 'daylight': {'lo': 5500, 'hi': 6500}, 'cloudy': {'lo': 7000, 'hi': 8000}}, 'bayes': 1, 'ct_curve': [2875.0, 0.4699, 0.3209, 3610.0, 0.4089, 0.4265, 4640.0, 0.3281, 0.5417, 5912.0, 0.2992, 0.5771, 7630.0, 0.2285, 0.6524], 'sensitivity_r': 1.0, 'sensitivity_b': 1.0, 'transverse_pos': 0.01783, 'transverse_neg': 0.02154}
01.352: INFO: cinepi_controller  Retrieved ct_curve: [2875.0, 0.4699, 0.3209, 3610.0, 0.4089, 0.4265, 4640.0, 0.3281, 0.5417, 5912.0, 0.2992, 0.5771, 7630.0, 0.2285, 0.6524]
01.352: INFO: cinepi_controller  Parsed temperatures: [2875.0, 3610.0, 4640.0, 5912.0, 7630.0]
01.352: INFO: cinepi_controller  Parsed r_values: [0.4699, 0.4089, 0.3281, 0.2992, 0.2285]
01.352: INFO: cinepi_controller  Parsed b_values: [0.3209, 0.4265, 0.5417, 0.5771, 0.6524]
01.353: INFO: cinepi_controller  Interpolating for wb step: 3200K, lower index: 0, upper index: 1
01.353: INFO: cinepi_controller  Interpolated values for 3200K - r_interp: 0.4429272108843537, b_interp: 0.3675938775510204
01.353: INFO: cinepi_controller  Calculated reciprocal cg_rb for 3200K: (2.3, 2.7)
01.353: INFO: cinepi_controller  Interpolating for wb step: 4400K, lower index: 1, upper index: 2
01.354: INFO: cinepi_controller  Interpolated values for 4400K - r_interp: 0.34692718446601944, b_interp: 0.514857281553398
01.354: INFO: cinepi_controller  Calculated reciprocal cg_rb for 4400K: (2.9, 1.9)
01.354: INFO: cinepi_controller  Interpolating for wb step: 5600K, lower index: 2, upper index: 3
01.354: INFO: cinepi_controller  Interpolated values for 5600K - r_interp: 0.306288679245283, b_interp: 0.5684169811320754
01.355: INFO: cinepi_controller  Calculated reciprocal cg_rb for 5600K: (3.3, 1.8)
01.355: INFO: cinepi_controller  Initialized wb_cg_rb_array: {3200: (2.3, 2.7), 4400: (2.9, 1.9), 5600: (3.3, 1.8)}
01.356: INFO: cinepi_controller  Settings loaded successfully.
01.359: INFO: redis_controller   Changed value: frame_duration = 41666
01.364: INFO: cinepi_controller  Resolution set to mode 0, height: 1088, width: 1456, gui_layout: 0
01.365: INFO: redis_controller   Changed value: fps = 24
01.366: INFO: redis_controller   Changed value: fps_user = 24
01.367: INFO: redis_controller   Changed value: fps = 24
01.367: INFO: redis_controller   Changed value: fps_last = 24
01.368: INFO: redis_controller   Changed value: sensor_mode = 0
01.369: INFO: redis_controller   Changed value: height = 1088
01.370: INFO: redis_controller   Changed value: width = 1456
01.370: INFO: redis_controller   Changed value: bit_depth = 12
01.371: INFO: redis_controller   Changed value: fps_max = 60
01.372: INFO: redis_controller   Changed value: gui_layout = 0
01.372: INFO: redis_controller   Changed value: file_size = 2
01.373: INFO: redis_controller   Changed value: cam_init = 1
01.865: INFO: cinepi_app         Restarting CinePi instance.
01.867: INFO: redis_controller   Changed value: fps_last = 24
02.221: INFO: sensor_detect      cinepi-raw output: Available cameras
-----------------
0 : imx296 [1456x1088 10-bit RGGB] (/base/soc/i2c0mux/i2c@1/imx296@1a)
    Modes: 'SRGGB10_CSI2P' : 1456x1088 [60.38 fps - (0, 0)/1456x1088 crop]


02.222: INFO: sensor_detect      Detected camera model: imx296
02.222: INFO: cinepi_app         Issuing ['cinepi-raw', '--mode', '1456:1088:12:U', '--width', '1456', '--height', '1088', '--lores-width', '1280', '--lores-height', '720', '-p', '0,30,1920,1020', '--post-process-file', '/home/pi/post-processing.json', '--shutter', '20000', '--awbgains', '2.5,2.0']
02.225: INFO: redis_controller   Changed value: sensor = imx296
02.226: INFO: cinepi_controller  Received set_fps call with value: 24.0
02.227: INFO: cinepi_controller  Retrieved max_fps from Redis: 60
02.227: INFO: cinepi_controller  Calculated safe_value: 24.0
02.233: INFO: cinepi_controller  Setting fps to 24.0
02.234: INFO: redis_controller   Changed value: frame_duration = 41666
02.234: INFO: cinepi_controller  [1, 45, 90, 135, 172.8, 180, 225, 270, 315, 346.6, 360]
02.237: INFO: cinepi_controller  Initialized fps_steps: [1, 2, 4, 8, 12, 16, 18, 24, 25, 33, 40, 50]
02.238: INFO: cinepi_controller  [1, 45, 90, 135, 172.8, 180, 225, 270, 315, 346.6, 360]
02.239: INFO: redis_controller   Changed value: fps = 24.0
02.240: INFO: gpio_input         Button on pin 4:
02.241: INFO: gpio_input           Press: rec
02.243: INFO: redis_controller   Changed value: fps_user = 24.0
02.245: INFO: redis_controller   Changed value: fps = 24.0
02.247: INFO: redis_controller   Changed value: fps_max = 60
02.253: INFO: redis_controller   Changed value: sensor = imx296
02.256: INFO: gpio_input         Button on pin 5:
02.257: INFO: gpio_input           Press: rec
02.260: INFO: gpio_input         Button on pin 27:
02.261: INFO: gpio_input           Press: inc_iso
02.264: INFO: gpio_input         Button on pin 10:
02.265: INFO: gpio_input           Press: dec_iso
02.269: INFO: gpio_input         Button on pin 22:
02.270: INFO: gpio_input           Press: set_all_lock
02.274: INFO: gpio_input         Button on pin 12:
02.274: INFO: gpio_input           Single Click: set_shutter_a_sync_mode
02.279: INFO: gpio_input         Button on pin 1:
02.280: INFO: gpio_input           Single Click: set_fps_double
02.280: INFO: gpio_input           Double Click: set_trigger_mode
02.284: INFO: gpio_input         Button on pin 13:
02.285: INFO: gpio_input           Single Click: set_resolution
02.285: INFO: gpio_input           Double Click: restart_camera
02.286: INFO: gpio_input           Triple Click: reboot
02.286: INFO: gpio_input           Hold: unmount
02.290: INFO: gpio_input         Rotary Encoder with Button on CLK pin: 9, DT pin: 11
02.290: INFO: gpio_input           Rotate Clockwise: inc_iso
02.291: INFO: gpio_input           Rotate CounterClockwise: dec_iso
02.294: INFO: gpio_input         Rotary Encoder with Button on CLK pin: 24, DT pin: 25
02.295: INFO: gpio_input           Rotate Clockwise: inc_shutter_a_nom
02.295: INFO: gpio_input           Rotate CounterClockwise: dec_shutter_a_nom
02.299: INFO: gpio_input         Rotary Encoder with Button on CLK pin: 0, DT pin: 8
02.300: INFO: gpio_input           Rotate Clockwise: inc_fps
02.300: INFO: gpio_input           Rotate CounterClockwise: dec_fps
02.304: INFO: gpio_input         Rotary Encoder with Button on CLK pin: 16, DT pin: 20
02.305: INFO: gpio_input           Rotate Clockwise: inc_wb
02.305: INFO: gpio_input           Rotate CounterClockwise: dec_wb
02.316: WARNING: gpio_input         No I2C device found at address: 0x49. Quad Rotary Encoder not initialized.
02.323: INFO: redis_controller   Changed value: framecount = 0
02.326: INFO: redis_controller   Changed value: rec = 0
02.329: INFO: simple_gui         HDMI display found. (1920, 1080)
02.656: INFO: main               Stream module loaded
02.657: INFO: mediator           Mediator instantiated
02.945: INFO: redis_listener     Framecount is changing
02.948: INFO: redis_controller   Changed value: rec = 1
02.949: INFO: mediator           Recording started!
02.950: INFO: gpio_output        GPIO 6 set to HIGH
02.951: INFO: gpio_output        GPIO 21 set to HIGH
03.596: WARNING: redis_listener     Not enough sensor timestamps to calculate average framerate.
03.597: WARNING: redis_listener     Not enough sensor timestamps to calculate average framerate.
03.597: INFO: redis_listener     Drop frame detected
03.597: INFO: redis_listener     Drop frame detected
03.766: INFO: main               Loaded WB steps: [3200, 4400, 5600]
03.768: INFO: analog_controls    Grove Base HAT not found.
03.897: INFO: cinepi_controller  Trigger mode set to 0
03.902: INFO: cinepi_app         Restarting CinePi instance.
03.924: INFO: cinepi_app         Shutting down CinePi instance.
03.926: INFO: redis_controller   Changed value: trigger_mode = 0
03.955: INFO: redis_controller   Changed value: fps_last = 24.0
03.961: INFO: redis_controller   Changed value: fps_last = 24.0
03.989: INFO: cinepi_app         CinePi instance shut down.
04.099: INFO: redis_listener     Drop frame flag reset
04.103: INFO: redis_listener     Drop frame flag reset
04.501: INFO: sensor_detect      cinepi-raw output: Available cameras
-----------------
0 : imx296 [1456x1088 10-bit RGGB] (/base/soc/i2c0mux/i2c@1/imx296@1a)
    Modes: 'SRGGB10_CSI2P' : 1456x1088 [60.38 fps - (0, 0)/1456x1088 crop]


04.505: INFO: sensor_detect      Detected camera model: imx296
04.506: INFO: cinepi_app         Issuing ['cinepi-raw', '--mode', '1456:1088:12:U', '--width', '1456', '--height', '1088', '--lores-width', '1280', '--lores-height', '720', '-p', '0,30,1920,1020', '--post-process-file', '/home/pi/post-processing.json', '--shutter', '20000', '--awbgains', '2.5,2.0']
04.523: INFO: main               Trigger mode set to 0 using cinepi_controller.
04.533: INFO: main               Initialized WB steps: [3200, 4400, 5600]
04.536: INFO: redis_controller   Changed value: sensor = imx296
04.562: INFO: cinepi_controller  Set white balance for 3200K: (2.3, 2.7)
04.565: INFO: redis_controller   Changed value: cg_rb = 2.3,2.7
04.566: INFO: main               --- initialization complete
04.569: INFO: redis_controller   Changed value: wb_user = 3200
05.223: INFO: redis_listener     Framecount is changing
05.237: INFO: redis_controller   Changed value: rec = 1
05.244: INFO: mediator           Recording started!
05.249: INFO: gpio_output        GPIO 6 set to HIGH
05.251: INFO: gpio_output        GPIO 21 set to HIGH
05.343: INFO: redis_listener     Drop frame detected
05.345: INFO: redis_listener     Drop frame detected
05.845: INFO: redis_listener     Drop frame flag reset
05.849: INFO: redis_listener     Drop frame flag reset
06.256: INFO: redis_listener     Framecount is stable
06.261: INFO: redis_listener     Framecount is stable
06.262: INFO: redis_controller   Changed value: rec = 0
06.263: INFO: mediator           Recording stopped!
06.264: INFO: gpio_output        GPIO 6 set to LOW
06.265: INFO: gpio_output        GPIO 21 set to LOW
06.266: INFO: redis_controller   Changed value: rec = 0
06.266: INFO: mediator           Recording stopped!
06.267: INFO: gpio_output        GPIO 6 set to LOW
06.267: INFO: gpio_output        GPIO 21 set to LOW
06.364: INFO: redis_controller   Changed value: frame_duration = 41666
06.366: INFO: redis_controller   Changed value: fps = 24
06.366: INFO: PWMcontroller      Setting PWM with fps=24, shutter_angle=None
06.367: INFO: PWMcontroller      PWM frequency set to 24.0Hz on pins 19, None
06.367: INFO: PWMcontroller      Shutter angle is None, keeping existing duty cycle.
06.367: INFO: PWMcontroller      Updating PWM with cycles=1
06.375: INFO: PWMcontroller      PWM duty cycle set to 49.999237048905165% on pins 19, None
06.385: INFO: redis_controller   Changed value: fps_user = 24
06.401: INFO: redis_controller   Changed value: fps = 24
06.406: INFO: PWMcontroller      Setting PWM with fps=24, shutter_angle=None
06.416: INFO: PWMcontroller      PWM frequency set to 24.0Hz on pins 19, None
06.416: INFO: PWMcontroller      Shutter angle is None, keeping existing duty cycle.
06.421: INFO: PWMcontroller      Updating PWM with cycles=1
06.463: INFO: PWMcontroller      PWM duty cycle set to 49.999237048905165% on pins 19, None
09.057: INFO: main               Graceful shutdown initiated.
09.059: WARNING: redis_listener     Recording stopped, but no recording start time was registered.
09.059: WARNING: redis_listener     Recording stopped, but no recording start time was registered.
09.063: INFO: redis_controller   Changed value: is_recording = 0
09.065: INFO: redis_listener     Framecount reset to 0.
09.067: INFO: PWMcontroller      PWM stopped
09.069: INFO: PWMcontroller      PWM stopped
09.070: INFO: redis_controller   Changed value: is_writing = 0
09.072: INFO: redis_controller   Changed value: shutter_a_nom = 180
09.073: INFO: redis_controller   Changed value: cg_rb = 2.5,2.0
09.074: INFO: redis_controller   Changed value: rec = 0
09.075: INFO: mediator           Recording stopped!
09.075: INFO: gpio_output        GPIO 6 set to LOW
09.075: INFO: gpio_output        GPIO 21 set to LOW
09.076: INFO: redis_controller   Changed value: framecount = 0
09.268: INFO: main               Graceful shutdown initiated.
09.450: INFO: main               Graceful shutdown initiated.
09.656: INFO: main               Graceful shutdown initiated.
