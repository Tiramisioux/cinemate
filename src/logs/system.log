17.539: INFO: main               Contents of /home/pi/cinemate/src/logs/system.log have been erased.
17.539: INFO: main               Contents of /home/pi/cinemate/src/logs/cinemate-service.log have been erased.
17.540: INFO: main               Contents of /home/pi/cinemate/src/logs/cinemate-service-error.log have been erased.
17.575: INFO: wifi_hotspot       WiFi hotspot is already active. Skipping creation.
17.581: INFO: redis_controller   Initializing cache with Redis values...
17.589: INFO: PWMcontroller      Initializing PWM on pin 19 (channel 3) with frequency 24Hz and chip 2
17.589: ERROR: PWMcontroller      Failed to initialize PWM on pin 19: Need to add 'dtoverlay=pwm-2chan' to /boot/config.txt and reboot
17.590: INFO: redis_controller   Changed value: pi_model = pi4
17.590: INFO: PWMcontroller      Updating PWM with cycles=1
17.625: INFO: PWMcontroller      PWM duty cycle set to 49.999237048905165% on pins 19, None
17.989: INFO: sensor_detect      cinepi-raw output: Available cameras
-----------------
0 : imx477 [4056x3040 12-bit RGGB] (/base/soc/i2c0mux/i2c@1/imx477@1a)
    Modes: 'SRGGB10_CSI2P' : 1332x990 [120.05 fps - (696, 528)/2664x1980 crop]
           'SRGGB12_CSI2P' : 2028x1080 [50.03 fps - (0, 440)/4056x2160 crop]
                             2028x1520 [40.01 fps - (0, 0)/4056x3040 crop]
                             4056x3040 [10.00 fps - (0, 0)/4056x3040 crop]


17.990: INFO: sensor_detect      Detected camera model: imx477
17.990: WARNING: sensor_detect      cinepi-raw command exited with non-zero status: 134
17.990: WARNING: sensor_detect      stderr: terminate called after throwing an instance of 'std::system_error'
  what():  Invalid argument
Aborted

18.352: INFO: sensor_detect      cinepi-raw output: Available cameras
-----------------
0 : imx477 [4056x3040 12-bit RGGB] (/base/soc/i2c0mux/i2c@1/imx477@1a)
    Modes: 'SRGGB10_CSI2P' : 1332x990 [120.05 fps - (696, 528)/2664x1980 crop]
           'SRGGB12_CSI2P' : 2028x1080 [50.03 fps - (0, 440)/4056x2160 crop]
                             2028x1520 [40.01 fps - (0, 0)/4056x3040 crop]
                             4056x3040 [10.00 fps - (0, 0)/4056x3040 crop]


18.353: INFO: sensor_detect      Detected camera model: imx477
18.353: WARNING: sensor_detect      cinepi-raw command exited with non-zero status: 134
18.353: WARNING: sensor_detect      stderr: terminate called after throwing an instance of 'std::system_error'
  what():  Invalid argument
Aborted

18.354: INFO: cinepi_app         CinePi instantiated
18.354: INFO: cinepi_app         Log level set to INFO
18.354: INFO: cinepi_app         Active filters set to: 
18.355: INFO: ssd_monitor        SSD monitoring thread started.
18.361: INFO: gpio_output        REC light instantiated on pin 6
18.361: INFO: gpio_output        REC light instantiated on pin 21
18.367: INFO: redis_controller   Changed value: framecount = 0
18.368: INFO: redis_controller   Changed value: rec = 0
18.376: INFO: redis_controller   Changed value: sensor = imx477
18.377: INFO: cinepi_controller  Settings loaded successfully.
18.378: INFO: redis_controller   Changed value: fps_max = 50
18.379: INFO: cinepi_controller  Initialized fps_steps: [1, 2, 4, 8, 12, 16, 18, 24, 25, 33, 40, 50]
18.380: INFO: cinepi_controller  Initialized shutter_a_steps: [1, 45, 90, 135, 172.8, 180, 225, 270, 315, 346.6, 360]
18.380: INFO: cinepi_controller  Loading tuning file from: /home/pi/cinemate/resources/tuning_files/imx477.json
18.381: INFO: redis_controller   Changed value: fps_max = 50
18.384: INFO: cinepi_controller  Tuning data loaded successfully.
18.384: INFO: cinepi_controller  'rpi.awb' data found: {'priors': [{'lux': 0, 'prior': [2000, 1.0, 3000, 0.0, 13000, 0.0]}, {'lux': 800, 'prior': [2000, 0.0, 6000, 2.0, 13000, 2.0]}, {'lux': 1500, 'prior': [2000, 0.0, 4000, 1.0, 6000, 6.0, 6500, 7.0, 7000, 1.0, 13000, 1.0]}], 'modes': {'auto': {'lo': 2500, 'hi': 7700}, 'incandescent': {'lo': 2500, 'hi': 3000}, 'tungsten': {'lo': 3000, 'hi': 3500}, 'fluorescent': {'lo': 4000, 'hi': 4700}, 'indoor': {'lo': 3000, 'hi': 5000}, 'daylight': {'lo': 5500, 'hi': 6500}, 'cloudy': {'lo': 7000, 'hi': 8000}}, 'bayes': 1, 'ct_curve': [2850.0, 0.4307, 0.3957, 2960.0, 0.4159, 0.4313, 3580.0, 0.3771, 0.5176, 4559.0, 0.3031, 0.6573, 5881.0, 0.2809, 0.6942, 7600.0, 0.2263, 0.7762], 'sensitivity_r': 1.0, 'sensitivity_b': 1.0, 'transverse_pos': 0.02634, 'transverse_neg': 0.02255}
18.385: INFO: cinepi_controller  Retrieved ct_curve: [2850.0, 0.4307, 0.3957, 2960.0, 0.4159, 0.4313, 3580.0, 0.3771, 0.5176, 4559.0, 0.3031, 0.6573, 5881.0, 0.2809, 0.6942, 7600.0, 0.2263, 0.7762]
18.385: INFO: cinepi_controller  Parsed temperatures: [2850.0, 2960.0, 3580.0, 4559.0, 5881.0, 7600.0]
18.386: INFO: cinepi_controller  Parsed r_values: [0.4307, 0.4159, 0.3771, 0.3031, 0.2809, 0.2263]
18.386: INFO: cinepi_controller  Parsed b_values: [0.3957, 0.4313, 0.5176, 0.6573, 0.6942, 0.7762]
18.387: INFO: cinepi_controller  Interpolating for wb step: 3200K, lower index: 1, upper index: 2
18.387: INFO: cinepi_controller  Interpolated values for 3200K - r_interp: 0.4008806451612903, b_interp: 0.4647064516129032
18.388: INFO: cinepi_controller  Calculated reciprocal cg_rb for 3200K: (2.5, 2.2)
18.388: INFO: cinepi_controller  Interpolating for wb step: 4400K, lower index: 2, upper index: 3
18.388: INFO: cinepi_controller  Interpolated values for 4400K - r_interp: 0.31511838610827375, b_interp: 0.6346112359550562
18.389: INFO: cinepi_controller  Calculated reciprocal cg_rb for 4400K: (3.2, 1.6)
18.389: INFO: cinepi_controller  Interpolating for wb step: 5600K, lower index: 3, upper index: 4
18.389: INFO: cinepi_controller  Interpolated values for 5600K - r_interp: 0.28561875945537063, b_interp: 0.686356656580938
18.390: INFO: cinepi_controller  Calculated reciprocal cg_rb for 5600K: (3.5, 1.5)
18.390: INFO: cinepi_controller  Initialized wb_cg_rb_array: {3200: (2.5, 2.2), 4400: (3.2, 1.6), 5600: (3.5, 1.5)}
18.391: INFO: cinepi_controller  Settings loaded successfully.
18.392: INFO: cinepi_controller  Received set_fps call with value: 24.0
18.393: INFO: cinepi_controller  Retrieved max_fps from Redis: 50
18.393: INFO: cinepi_controller  Calculated safe_value: 24.0
18.394: INFO: cinepi_controller  Setting fps to 24.0
18.395: INFO: redis_controller   Changed value: fps = 24.0
18.396: INFO: cinepi_controller  [1, 45, 90, 135, 172.8, 180, 225, 270, 315, 346.6, 360]
18.396: INFO: cinepi_controller  Initialized fps: 24
18.402: INFO: cinepi_controller  Resolution set to mode 0, height: 1080, width: 2028, gui_layout: 0
18.403: INFO: redis_controller   Changed value: fps_last = 24.0
18.404: INFO: redis_controller   Changed value: sensor_mode = 0
18.405: INFO: redis_controller   Changed value: height = 1080
18.405: INFO: redis_controller   Changed value: width = 2028
18.406: INFO: redis_controller   Changed value: bit_depth = 12
18.407: INFO: redis_controller   Changed value: fps_max = 50
18.407: INFO: redis_controller   Changed value: gui_layout = 0
18.408: INFO: redis_controller   Changed value: file_size = 3.2
18.409: INFO: redis_controller   Changed value: cam_init = 1
18.903: INFO: cinepi_app         Restarting CinePi instance.
18.906: INFO: redis_controller   Changed value: fps_last = 24.0
19.266: INFO: sensor_detect      cinepi-raw output: Available cameras
-----------------
0 : imx477 [4056x3040 12-bit RGGB] (/base/soc/i2c0mux/i2c@1/imx477@1a)
    Modes: 'SRGGB10_CSI2P' : 1332x990 [120.05 fps - (696, 528)/2664x1980 crop]
           'SRGGB12_CSI2P' : 2028x1080 [50.03 fps - (0, 440)/4056x2160 crop]
                             2028x1520 [40.01 fps - (0, 0)/4056x3040 crop]
                             4056x3040 [10.00 fps - (0, 0)/4056x3040 crop]


19.266: INFO: sensor_detect      Detected camera model: imx477
19.266: WARNING: sensor_detect      cinepi-raw command exited with non-zero status: 134
19.266: WARNING: sensor_detect      stderr: terminate called after throwing an instance of 'std::system_error'
  what():  Invalid argument
Aborted

19.267: INFO: cinepi_app         Issuing ['cinepi-raw', '--mode', '2028:1080:12', '--width', '2028', '--height', '1080', '--lores-width', '1920', '--lores-height', '1080', '-p', '0,30,1920,1020', '--post-process-file', '/home/pi/post-processing.json', '--shutter', '20000', '--awbgains', '2.5,2.0', '--awb', 'auto']
19.269: ERROR: cinepi_controller  Error setting resolution: invalid literal for int() with base 10: '24.0'
19.271: INFO: gpio_input         Button on pin 4:
19.272: INFO: redis_controller   Changed value: sensor = imx477
19.272: INFO: gpio_input           Press: rec
19.281: INFO: gpio_input         Button on pin 5:
19.282: INFO: gpio_input           Press: rec
19.285: INFO: gpio_input         Button on pin 27:
19.286: INFO: gpio_input           Press: inc_iso
19.289: INFO: gpio_input         Button on pin 10:
19.290: INFO: gpio_input           Press: dec_iso
19.294: INFO: gpio_input         Button on pin 22:
19.294: INFO: gpio_input           Press: set_all_lock
19.298: INFO: gpio_input         Button on pin 12:
19.298: INFO: gpio_input           Single Click: set_shutter_a_sync_mode
19.302: INFO: gpio_input         Button on pin 1:
19.302: INFO: gpio_input           Single Click: set_fps_double
19.303: INFO: gpio_input           Double Click: set_trigger_mode
19.306: INFO: gpio_input         Button on pin 13:
19.306: INFO: gpio_input           Single Click: set_resolution
19.307: INFO: gpio_input           Double Click: restart_camera
19.307: INFO: gpio_input           Triple Click: reboot
19.307: INFO: gpio_input           Hold: unmount
19.311: INFO: gpio_input         Rotary Encoder with Button on CLK pin: 9, DT pin: 11
19.311: INFO: gpio_input           Rotate Clockwise: inc_iso
19.312: INFO: gpio_input           Rotate CounterClockwise: dec_iso
19.317: INFO: gpio_input         Rotary Encoder with Button on CLK pin: 24, DT pin: 25
19.317: INFO: gpio_input           Rotate Clockwise: inc_shutter_a_nom
19.318: INFO: gpio_input           Rotate CounterClockwise: dec_shutter_a_nom
19.322: INFO: gpio_input         Rotary Encoder with Button on CLK pin: 0, DT pin: 8
19.323: INFO: gpio_input           Rotate Clockwise: inc_fps
19.323: INFO: gpio_input           Rotate CounterClockwise: dec_fps
19.327: INFO: gpio_input         Rotary Encoder with Button on CLK pin: 16, DT pin: 20
19.328: INFO: gpio_input           Rotate Clockwise: inc_wb
19.328: INFO: gpio_input           Rotate CounterClockwise: dec_wb
19.338: WARNING: gpio_input         No I2C device found at address: 0x49. Quad Rotary Encoder not initialized.
19.345: INFO: redis_controller   Changed value: framecount = 0
19.347: INFO: redis_controller   Changed value: rec = 0
19.351: INFO: simple_gui         HDMI display found. (1920, 1080)
19.664: INFO: main               Stream module loaded
19.668: INFO: mediator           Mediator instantiated
19.943: INFO: redis_listener     Framecount is changing
19.952: INFO: redis_controller   Changed value: rec = 1
19.957: INFO: mediator           Recording started!
19.959: INFO: gpio_output        GPIO 6 set to HIGH
19.959: INFO: gpio_output        GPIO 21 set to HIGH
20.543: WARNING: redis_listener     Not enough sensor timestamps to calculate average framerate.
20.544: WARNING: redis_listener     Not enough sensor timestamps to calculate average framerate.
20.544: INFO: redis_listener     Drop frame detected
20.545: INFO: redis_listener     Drop frame detected
20.741: INFO: main               Loaded WB steps: [3200, 4400, 5600]
20.760: INFO: analog_controls    Grove Base HAT not found.
20.838: INFO: cinepi_controller  Trigger mode set to 0
20.844: INFO: cinepi_app         Restarting CinePi instance.
20.855: INFO: redis_controller   Changed value: trigger_mode = 0
20.864: INFO: cinepi_app         Shutting down CinePi instance.
20.882: INFO: redis_controller   Changed value: fps_last = 24.0
20.884: INFO: redis_controller   Changed value: fps_last = 24.0
20.946: INFO: cinepi_app         CinePi instance shut down.
21.053: INFO: redis_listener     Drop frame flag reset
21.055: INFO: redis_listener     Drop frame flag reset
21.434: INFO: sensor_detect      cinepi-raw output: Available cameras
-----------------
0 : imx477 [4056x3040 12-bit RGGB] (/base/soc/i2c0mux/i2c@1/imx477@1a)
    Modes: 'SRGGB10_CSI2P' : 1332x990 [120.05 fps - (696, 528)/2664x1980 crop]
           'SRGGB12_CSI2P' : 2028x1080 [50.03 fps - (0, 440)/4056x2160 crop]
                             2028x1520 [40.01 fps - (0, 0)/4056x3040 crop]
                             4056x3040 [10.00 fps - (0, 0)/4056x3040 crop]


21.435: INFO: sensor_detect      Detected camera model: imx477
21.435: WARNING: sensor_detect      cinepi-raw command exited with non-zero status: 134
21.436: WARNING: sensor_detect      stderr: terminate called after throwing an instance of 'std::system_error'
  what():  Invalid argument
Aborted

21.436: INFO: cinepi_app         Issuing ['cinepi-raw', '--mode', '2028:1080:12', '--width', '2028', '--height', '1080', '--lores-width', '1920', '--lores-height', '1080', '-p', '0,30,1920,1020', '--post-process-file', '/home/pi/post-processing.json', '--shutter', '20000', '--awbgains', '2.5,2.0', '--awb', 'auto']
21.439: INFO: main               Trigger mode set to 0 using cinepi_controller.
21.441: INFO: main               Initialized WB steps: [3200, 4400, 5600]
21.441: INFO: redis_controller   Changed value: sensor = imx477
21.445: INFO: cinepi_controller  Set white balance for 3200K: (2.5, 2.2)
21.446: INFO: main               --- initialization complete
21.447: INFO: redis_controller   Changed value: cg_rb = 2.5,2.2
21.450: INFO: redis_controller   Changed value: wb_user = 3200
21.451: INFO: redis_controller   Changed value: fps = 24.0
21.452: INFO: PWMcontroller      Setting PWM with fps=24.0, shutter_angle=None
21.452: INFO: PWMcontroller      PWM frequency set to 24.0Hz on pins 19, None
21.453: INFO: PWMcontroller      Shutter angle is None, keeping existing duty cycle.
21.453: INFO: PWMcontroller      Updating PWM with cycles=1
21.458: INFO: PWMcontroller      PWM duty cycle set to 49.999237048905165% on pins 19, None
22.108: INFO: redis_listener     Framecount is changing
22.112: INFO: redis_controller   Changed value: rec = 1
22.113: INFO: mediator           Recording started!
22.114: INFO: gpio_output        GPIO 6 set to HIGH
22.114: INFO: gpio_output        GPIO 21 set to HIGH
22.723: INFO: redis_listener     Drop frame detected
22.731: INFO: redis_listener     Drop frame detected
23.227: INFO: redis_listener     Drop frame flag reset
23.237: INFO: redis_listener     Drop frame flag reset
23.262: INFO: redis_listener     Drop frame detected
23.278: INFO: redis_listener     Drop frame detected
23.295: INFO: redis_listener     Framecount is stable
23.303: INFO: redis_listener     Framecount is stable
23.304: INFO: redis_controller   Changed value: rec = 0
23.306: INFO: mediator           Recording stopped!
23.308: INFO: gpio_output        GPIO 6 set to LOW
23.309: INFO: gpio_output        GPIO 21 set to LOW
23.321: INFO: redis_controller   Changed value: rec = 0
23.333: INFO: mediator           Recording stopped!
23.337: INFO: gpio_output        GPIO 6 set to LOW
23.338: INFO: gpio_output        GPIO 21 set to LOW
23.765: INFO: redis_listener     Drop frame flag reset
23.780: INFO: redis_listener     Drop frame flag reset
23.810: INFO: redis_listener     Drop frame detected
23.814: INFO: redis_listener     Drop frame detected
24.316: INFO: redis_listener     Drop frame flag reset
24.319: INFO: redis_listener     Drop frame flag reset
24.327: INFO: redis_listener     Drop frame detected
24.366: INFO: redis_listener     Drop frame detected
24.834: INFO: redis_listener     Drop frame flag reset
24.857: INFO: redis_listener     Drop frame detected
24.868: INFO: redis_listener     Drop frame flag reset
24.890: INFO: redis_listener     Drop frame detected
25.366: INFO: redis_listener     Drop frame flag reset
25.397: INFO: redis_listener     Drop frame flag reset
25.400: INFO: redis_listener     Drop frame detected
25.433: INFO: redis_listener     Drop frame detected
25.914: INFO: redis_listener     Drop frame flag reset
25.933: INFO: redis_listener     Drop frame detected
25.940: INFO: redis_listener     Drop frame flag reset
25.948: INFO: redis_listener     Drop frame detected
26.440: INFO: redis_listener     Drop frame flag reset
26.455: INFO: redis_listener     Drop frame flag reset
26.472: INFO: redis_listener     Drop frame detected
26.475: INFO: redis_listener     Drop frame detected
26.978: INFO: redis_listener     Drop frame flag reset
26.979: INFO: redis_listener     Drop frame detected
26.980: INFO: redis_listener     Drop frame flag reset
27.482: INFO: redis_listener     Drop frame flag reset
18.613: INFO: main               Graceful shutdown initiated.
18.631: WARNING: redis_listener     Recording stopped, but no recording start time was registered.
18.634: WARNING: redis_listener     Recording stopped, but no recording start time was registered.
18.652: INFO: redis_controller   Changed value: is_recording = 0
18.665: INFO: redis_listener     Framecount reset to 0.
18.672: INFO: redis_controller   Changed value: is_writing = 0
18.673: INFO: PWMcontroller      PWM stopped
18.680: INFO: redis_controller   Changed value: shutter_a_nom = 180
18.684: INFO: PWMcontroller      PWM stopped
18.688: INFO: redis_controller   Changed value: cg_rb = 2.5,2.0
18.696: INFO: redis_controller   Changed value: rec = 0
18.699: INFO: mediator           Recording stopped!
18.699: INFO: gpio_output        GPIO 6 set to LOW
18.700: INFO: gpio_output        GPIO 21 set to LOW
18.701: INFO: redis_controller   Changed value: framecount = 0
18.816: INFO: main               Graceful shutdown initiated.
19.002: INFO: main               Graceful shutdown initiated.
19.196: INFO: main               Graceful shutdown initiated.
